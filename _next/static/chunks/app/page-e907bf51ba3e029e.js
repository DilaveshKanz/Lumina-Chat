(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1036:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>a4});var t=s(8081),r=s(2149),l=s(7687),n=s(1153),i=s(2522),d=s(8019),c=s(18),o=s(4314),m=s(1107),u=s(2950),h=s(6425),x=s(4248);let g=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(x.bL,{ref:a,className:(0,l.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...r})});g.displayName=x.bL.displayName;let f=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(x._V,{ref:a,className:(0,l.cn)("aspect-square h-full w-full",s),...r})});f.displayName=x._V.displayName;let b=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(x.H4,{ref:a,className:(0,l.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...r})});b.displayName=x.H4.displayName;var p=s(7590),j=s(3484);let v=(0,j.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),y=r.forwardRef((e,a)=>{let{className:s,variant:r,size:n,asChild:i=!1,...d}=e,c=i?p.DX:"button";return(0,t.jsx)(c,{className:(0,l.cn)(v({variant:r,size:n,className:s})),ref:a,...d})});y.displayName="Button";let N=r.forwardRef((e,a)=>{let{className:s,type:r,...n}=e;return(0,t.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...n})});N.displayName="Input";var w=s(9101);let k=w.Kq,C=w.bL,A=w.l9,S=r.forwardRef((e,a)=>{let{className:s,sideOffset:r=4,...n}=e;return(0,t.jsx)(w.UC,{ref:a,sideOffset:r,className:(0,l.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n})});S.displayName=w.UC.displayName;let M=(0,j.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function z(e){let{className:a,variant:s,...r}=e;return(0,t.jsx)("div",{className:(0,l.cn)(M({variant:s}),a),...r})}var D=s(3047),L=s(6722),T=s(3210);let E=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...r})});E.displayName="Textarea";var R=s(4822);let P=(0,j.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),F=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(R.b,{ref:a,className:(0,l.cn)(P(),s),...r})});F.displayName=R.b.displayName;var I=s(515);let O=I.bL,G=I.l9,U=I.ZL;I.bm;let B=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(I.hJ,{ref:a,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});B.displayName=I.hJ.displayName;let V=r.forwardRef((e,a)=>{let{className:s,children:r,...n}=e;return(0,t.jsxs)(U,{children:[(0,t.jsx)(B,{}),(0,t.jsxs)(I.UC,{ref:a,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...n,children:[r,(0,t.jsxs)(I.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(i.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});V.displayName=I.UC.displayName;let Y=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...s})};Y.displayName="DialogHeader";let _=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(I.hE,{ref:a,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",s),...r})});function q(e){let{isOpen:a,onClose:s,onCreateGroup:n,contacts:d}=e,[c,o]=(0,r.useState)(""),[m,h]=(0,r.useState)(""),[x,p]=(0,r.useState)("/placeholder.svg?height=100&width=100"),[j,v]=(0,r.useState)([]),[w,k]=(0,r.useState)(""),[C,A]=(0,r.useState)("info"),S=d.filter(e=>e.name.toLowerCase().includes(w.toLowerCase())),M=e=>{j.includes(e)?v(j.filter(a=>a!==e)):v([...j,e])},z=()=>{o(""),h(""),p("/placeholder.svg?height=100&width=100"),v([]),A("info"),s()};return(0,t.jsx)(O,{open:a,onOpenChange:z,children:(0,t.jsxs)(V,{className:"sm:max-w-md",children:[(0,t.jsx)(Y,{children:(0,t.jsx)(_,{children:"Create New Group"})}),"info"===C?(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)(g,{className:"h-24 w-24",children:[(0,t.jsx)(f,{src:x,alt:"Group avatar"}),(0,t.jsx)(b,{children:"GP"})]}),(0,t.jsxs)("label",{htmlFor:"avatar-upload",className:"absolute bottom-0 right-0 h-8 w-8 rounded-full bg-accent-blue flex items-center justify-center cursor-pointer shadow-glossy",children:[(0,t.jsx)(D.A,{className:"h-4 w-4 text-white"}),(0,t.jsx)("span",{className:"sr-only",children:"Upload avatar"}),(0,t.jsx)("input",{id:"avatar-upload",type:"file",accept:"image/*",className:"hidden",onChange:e=>{var a;let s=null===(a=e.target.files)||void 0===a?void 0:a[0];if(s){let e=new FileReader;e.onload=()=>{p(e.result)},e.readAsDataURL(s)}}})]})]}),(0,t.jsxs)("div",{className:"w-full space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(F,{htmlFor:"group-name",children:"Group Name"}),(0,t.jsx)(N,{id:"group-name",placeholder:"Enter group name",value:c,onChange:e=>o(e.target.value),className:"mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(F,{htmlFor:"group-description",children:"Description (optional)"}),(0,t.jsx)(E,{id:"group-description",placeholder:"Enter group description",value:m,onChange:e=>h(e.target.value),className:"mt-1 resize-none",rows:3})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(y,{variant:"outline",onClick:z,children:"Cancel"}),(0,t.jsx)(y,{onClick:()=>A("members"),disabled:!c.trim(),children:"Next"})]})]}):(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(F,{htmlFor:"search-members",children:"Add Members"}),(0,t.jsxs)("div",{className:"relative mt-1",children:[(0,t.jsx)(u.A,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,t.jsx)(N,{id:"search-members",placeholder:"Search contacts...",className:"pl-9",value:w,onChange:e=>k(e.target.value)})]})]}),j.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)(F,{className:"text-sm text-muted-foreground",children:["Selected (",j.length,")"]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:j.map(e=>{let a=d.find(a=>a.id===e);return a?(0,t.jsxs)("div",{className:"flex items-center gap-1 bg-secondary rounded-full pl-1 pr-2 py-1",children:[(0,t.jsxs)(g,{className:"h-5 w-5",children:[(0,t.jsx)(f,{src:a.avatar,alt:a.name}),(0,t.jsx)(b,{children:a.name.charAt(0)})]}),(0,t.jsx)("span",{className:"text-xs",children:a.name}),(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"h-4 w-4 rounded-full ml-1 hover:bg-muted",onClick:()=>M(e),children:[(0,t.jsx)(i.A,{className:"h-2 w-2"}),(0,t.jsxs)("span",{className:"sr-only",children:["Remove ",a.name]})]})]},e):null})})]}),(0,t.jsx)("div",{className:"max-h-60 overflow-y-auto border rounded-md",children:0===S.length?(0,t.jsx)("div",{className:"p-4 text-center text-muted-foreground",children:"No contacts found"}):(0,t.jsx)("div",{className:"divide-y",children:S.map(e=>(0,t.jsxs)("div",{className:(0,l.cn)("flex items-center justify-between p-3 hover:bg-secondary/50 cursor-pointer",j.includes(e.id)&&"bg-secondary/50"),onClick:()=>M(e.id),children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(g,{className:"h-8 w-8",children:[(0,t.jsx)(f,{src:e.avatar,alt:e.name}),(0,t.jsx)(b,{children:e.name.charAt(0)})]}),(0,t.jsx)("span",{children:e.name})]}),j.includes(e.id)?(0,t.jsx)("div",{className:"h-5 w-5 rounded-full bg-accent-blue flex items-center justify-center",children:(0,t.jsx)(L.A,{className:"h-3 w-3 text-white"})}):(0,t.jsx)("div",{className:"h-5 w-5 rounded-full border border-muted-foreground/30 flex items-center justify-center",children:(0,t.jsx)(T.A,{className:"h-3 w-3 text-muted-foreground"})})]},e.id))})}),(0,t.jsxs)("div",{className:"flex justify-between gap-2",children:[(0,t.jsx)(y,{variant:"outline",onClick:()=>A("info"),children:"Back"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(y,{variant:"outline",onClick:z,children:"Cancel"}),(0,t.jsx)(y,{onClick:()=>{n({name:c,description:m,avatar:x,members:j}),o(""),h(""),p("/placeholder.svg?height=100&width=100"),v([]),A("info"),s()},disabled:0===j.length,children:"Create Group"})]})]})]})]})})}_.displayName=I.hE.displayName,r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(I.VY,{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",s),...r})}).displayName=I.VY.displayName;var H=s(1516),J=s(8295),W=s(6174),X=s(4360);function K(e){let{className:a,variant:s="icon"}=e,{theme:n,setTheme:i}=(0,W.D)(),[d,c]=r.useState(!1);return(r.useEffect(()=>{c(!0)},[]),d)?"switch"===s?(0,t.jsx)("div",{className:(0,l.cn)("h-8 w-14 rounded-full p-1 shadow-inner bg-secondary dark:bg-gray-700 cursor-pointer","transition-colors duration-300 ease-in-out",a),onClick:()=>i("dark"===n?"light":"dark"),role:"button",tabIndex:0,"aria-label":"Switch to ".concat("dark"===n?"light":"dark"," mode"),onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),i("dark"===n?"light":"dark"))},children:(0,t.jsx)(X.P.div,{className:"flex items-center justify-center h-6 w-6 rounded-full bg-white dark:bg-accent-blue shadow-md",animate:{x:24*("dark"===n)},transition:{type:"spring",stiffness:500,damping:30},children:"dark"===n?(0,t.jsx)(J.A,{className:"h-3.5 w-3.5 text-white"}):(0,t.jsx)(H.A,{className:"h-3.5 w-3.5 text-accent-blue"})})}):"button"===s?(0,t.jsx)(y,{variant:"outline",size:"sm",className:(0,l.cn)("rounded-full px-3 py-1 transition-all duration-300","border-light-gray dark:border-gray-700",a),onClick:()=>i("dark"===n?"light":"dark"),children:"dark"===n?(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(H.A,{className:"h-4 w-4 mr-2 text-accent-blue"}),(0,t.jsx)("span",{className:"dark:text-white",children:"Light"})]}):(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(J.A,{className:"h-4 w-4 mr-2 text-accent-blue"}),(0,t.jsx)("span",{children:"Dark"})]})}):(0,t.jsxs)(y,{onClick:()=>i("dark"===n?"light":"dark"),variant:"ghost",size:"icon",className:(0,l.cn)("glossy-icon-button w-9 h-9 flex items-center justify-center overflow-hidden","dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700",a),"aria-label":"Toggle theme",children:[(0,t.jsx)("span",{className:"sr-only",children:"Toggle theme"}),(0,t.jsx)(H.A,{className:"h-4 w-4 transition-all duration-500 ease-in-out ".concat("dark"===n?"rotate-90 scale-0 opacity-0":"rotate-0 scale-100 opacity-100 text-accent-blue")}),(0,t.jsx)(J.A,{className:"absolute h-4 w-4 transition-all duration-500 ease-in-out ".concat("dark"===n?"rotate-0 scale-100 opacity-100 text-accent-blue":"rotate-90 scale-0 opacity-0")})]}):(0,t.jsx)(y,{variant:"ghost",size:"icon",className:(0,l.cn)("w-9 h-9 flex items-center justify-center","icon"===s&&"glossy-icon-button",a),"aria-label":"Toggle theme",children:(0,t.jsx)(H.A,{className:"h-4 w-4 rotate-0 scale-100 transition-all text-accent-blue"})})}function Z(e){let{activeContactId:a,onContactSelect:s,groups:x,activeGroupId:p,onGroupSelect:j,onCreateGroup:v,contacts:w,onOpenSettings:M,onOpenCallHistory:D,className:L}=e,[T,E]=(0,r.useState)(!1),[R,P]=(0,r.useState)("direct"),[F,I]=(0,r.useState)(""),[O,G]=(0,r.useState)(!1),[U,B]=(0,r.useState)(!1),V=(0,r.useRef)(null),[Y,_]=(0,r.useState)([]),[H,J]=(0,r.useState)([]),W=w.map(e=>e.id===a&&e.unreadCount&&!Y.includes(e.id)?(_(a=>[...a,e.id]),{...e,unreadCount:0}):e).filter(e=>e.name.toLowerCase().includes(F.toLowerCase())||e.lastMessage&&e.lastMessage.toLowerCase().includes(F.toLowerCase())),X=x.map(e=>e.id===p&&e.unreadCount&&!H.includes(e.id)?(J(a=>[...a,e.id]),{...e,unreadCount:0}):e).filter(e=>e.name.toLowerCase().includes(F.toLowerCase())||e.lastMessage&&e.lastMessage.toLowerCase().includes(F.toLowerCase())||e.description&&e.description.toLowerCase().includes(F.toLowerCase()));(0,r.useEffect)(()=>{O&&V.current&&V.current.focus()},[O]);let Z=e=>{s(e),_(a=>[...a,e.id]),T&&E(!1)},Q=e=>{j(e),J(a=>[...a,e.id]),T&&E(!1)};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"fixed left-4 top-4 z-50 md:hidden glossy-icon-button",onClick:()=>E(!0),children:[(0,t.jsx)(n.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"sr-only",children:"Open menu"})]}),(0,t.jsxs)("aside",{className:(0,l.cn)("fixed inset-y-0 left-0 z-40 flex flex-col border-r border-light-gray bg-glossy-white/80 backdrop-blur-md transition-all duration-300 ease-in-out dark:bg-gray-900 dark:border-gray-800","w-full md:w-72",L),children:[(0,t.jsxs)("div",{className:"flex h-16 items-center justify-between border-b border-light-gray/50 dark:border-gray-800 px-4",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)("span",{className:"text-xl font-semibold tracking-tight text-accent-blue animate-fade-slide-in dark:text-white",children:"Lumina"})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(K,{}),(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"md:hidden glossy-icon-button dark:bg-gray-800 dark:border-gray-700",onClick:()=>E(!1),children:[(0,t.jsx)(i.A,{className:"h-5 w-5 dark:text-white"}),(0,t.jsx)("span",{className:"sr-only",children:"Close menu"})]})]})]}),(0,t.jsx)("nav",{className:"flex border-b border-light-gray/50 dark:border-gray-800 p-2",children:(0,t.jsxs)("div",{className:"grid grid-cols-4 gap-1 w-full",children:[(0,t.jsx)(k,{delayDuration:0,children:(0,t.jsxs)(C,{children:[(0,t.jsx)(A,{asChild:!0,children:(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:(0,l.cn)("h-10 w-10 rounded-full glossy-icon-button dark:bg-gray-800 dark:border-gray-700","direct"===R&&"bg-accent-blue/10 text-accent-blue border-accent-blue/50 dark:bg-accent-blue/20"),onClick:()=>P("direct"),children:[(0,t.jsx)(d.A,{className:"h-5 w-5 dark:text-white"}),(0,t.jsx)("span",{className:"sr-only",children:"Direct Messages"})]})}),(0,t.jsx)(S,{children:"Direct Messages"})]})}),(0,t.jsx)(k,{delayDuration:0,children:(0,t.jsxs)(C,{children:[(0,t.jsx)(A,{asChild:!0,children:(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:(0,l.cn)("h-10 w-10 rounded-full glossy-icon-button dark:bg-gray-800 dark:border-gray-700","groups"===R&&"bg-accent-blue/10 text-accent-blue border-accent-blue/50 dark:bg-accent-blue/20"),onClick:()=>P("groups"),children:[(0,t.jsx)(c.A,{className:"h-5 w-5 dark:text-white"}),(0,t.jsx)("span",{className:"sr-only",children:"Groups"})]})}),(0,t.jsx)(S,{children:"Groups"})]})}),(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"h-10 w-10 rounded-full glossy-icon-button dark:bg-gray-800 dark:border-gray-700",onClick:D,children:[(0,t.jsx)(o.A,{className:"h-5 w-5 dark:text-white"}),(0,t.jsx)("span",{className:"sr-only",children:"Call History"})]}),(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"h-10 w-10 rounded-full glossy-icon-button dark:bg-gray-800 dark:border-gray-700",onClick:M,children:[(0,t.jsx)(m.A,{className:"h-5 w-5 dark:text-white"}),(0,t.jsx)("span",{className:"sr-only",children:"Settings"})]})]})}),(0,t.jsx)("div",{className:"p-4",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground dark:text-gray-400",children:(0,t.jsx)(u.A,{className:"h-4 w-4"})}),(0,t.jsx)(N,{ref:V,type:"search",placeholder:"direct"===R?"Search messages, contacts...":"Search groups...",className:"pl-9 border-light-gray focus-visible:ring-accent-blue dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:placeholder-gray-400",value:F,onChange:e=>I(e.target.value)}),F&&(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 h-6 w-6 -translate-y-1/2 rounded-full dark:text-white",onClick:()=>I(""),children:[(0,t.jsx)(i.A,{className:"h-3 w-3"}),(0,t.jsx)("span",{className:"sr-only",children:"Clear search"})]})]})}),"groups"===R&&(0,t.jsx)("div",{className:"px-4 mb-2",children:(0,t.jsxs)(y,{className:"w-full bg-accent-blue hover:bg-accent-blue/90 text-white",onClick:()=>B(!0),children:[(0,t.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Create New Group"]})}),(0,t.jsx)("div",{className:"flex-1 overflow-auto p-2 scrollbar-thin scrollbar-thumb-light-gray/50 scrollbar-track-transparent dark:scrollbar-thumb-gray-700",children:"direct"===R?(0,t.jsx)("div",{className:"space-y-2",children:W.map(e=>{let s=e.id===a;return(0,t.jsx)("button",{className:(0,l.cn)("group w-full text-left transition-all duration-200 glossy-card dark:bg-gray-800 dark:border-gray-700","p-3",s&&"ring-2 ring-accent-blue/50 shadow-blue-glow dark:ring-accent-blue/70"),onClick:()=>Z(e),children:(0,t.jsxs)("div",{className:"relative flex items-center gap-3",children:[(0,t.jsxs)(g,{className:(0,l.cn)("profile-picture h-10 w-10",s&&"ring-2 ring-accent-blue dark:ring-accent-blue"),children:[(0,t.jsx)(f,{src:e.avatar,alt:e.name}),(0,t.jsx)(b,{children:e.name.charAt(0)}),(0,t.jsx)("span",{className:(0,l.cn)("absolute bottom-0 right-0 h-2.5 w-2.5 rounded-full border-2 border-background dark:border-gray-800","online"===e.status&&"bg-green-500","away"===e.status&&"bg-accent-blue","offline"===e.status&&"bg-muted dark:bg-gray-600")})]}),(0,t.jsxs)("div",{className:"flex-1 truncate",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:(0,l.cn)("font-medium transition-colors duration-200 dark:text-white",s&&"text-accent-blue dark:text-accent-blue"),children:e.name}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground dark:text-gray-400",children:e.lastActive})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"truncate text-sm text-muted-foreground dark:text-gray-400",children:e.lastMessage}),e.unreadCount&&e.unreadCount>0&&(0,t.jsx)("span",{className:"flex h-5 min-w-5 items-center justify-center rounded-full bg-accent-blue px-1.5 text-xs font-medium text-white animate-pulse-glossy",children:e.unreadCount})]})]})]})},e.id)})}):(0,t.jsx)("div",{className:"space-y-2",children:X.map(e=>{let a=e.id===p;return(0,t.jsx)("button",{className:(0,l.cn)("group w-full text-left transition-all duration-200 glossy-card dark:bg-gray-800 dark:border-gray-700","p-3",a&&"ring-2 ring-accent-blue/50 shadow-blue-glow dark:ring-accent-blue/70"),onClick:()=>Q(e),children:(0,t.jsxs)("div",{className:"relative flex items-center gap-3",children:[(0,t.jsxs)(g,{className:(0,l.cn)("profile-picture h-10 w-10",a&&"ring-2 ring-accent-blue dark:ring-accent-blue"),children:[(0,t.jsx)(f,{src:e.avatar,alt:e.name}),(0,t.jsx)(b,{children:e.name.charAt(0)})]}),(0,t.jsxs)("div",{className:"flex-1 truncate",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:(0,l.cn)("font-medium transition-colors duration-200 dark:text-white",a&&"text-accent-blue dark:text-accent-blue"),children:e.name}),(0,t.jsx)(z,{variant:"outline",className:"h-4 text-[10px] bg-accent-blue/10 text-accent-blue border-accent-blue/20 dark:bg-accent-blue/20",children:e.members.length})]}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground dark:text-gray-400",children:e.lastActive})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"truncate text-sm text-muted-foreground dark:text-gray-400",children:e.lastMessage}),e.unreadCount&&e.unreadCount>0&&(0,t.jsx)("span",{className:"flex h-5 min-w-5 items-center justify-center rounded-full bg-accent-blue px-1.5 text-xs font-medium text-white animate-pulse-glossy",children:e.unreadCount})]})]})]})},e.id)})})})]}),(0,t.jsx)(q,{isOpen:U,onClose:()=>B(!1),onCreateGroup:e=>{v(e),B(!1)},contacts:w})]})}var Q=s(2297),$=s(5586),ee=s(1215),ea=s(7326),es=s(3565),et=s(7474),er=s(118),el=s(9415),en=s(8381),ei=s(3022),ed=s(8195),ec=s(5283),eo=s(8313),em=s(6703),eu=s(2235),eh=s(1767),ex=s(7485),eg=s(3602),ef=s(8022);let eb=ex.bL,ep=ex.l9;ex.YJ,ex.ZL,ex.Pb,ex.z6,r.forwardRef((e,a)=>{let{className:s,inset:r,children:n,...i}=e;return(0,t.jsxs)(ex.ZP,{ref:a,className:(0,l.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",s),...i,children:[n,(0,t.jsx)(eg.A,{className:"ml-auto"})]})}).displayName=ex.ZP.displayName,r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(ex.G5,{ref:a,className:(0,l.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})}).displayName=ex.G5.displayName;let ej=r.forwardRef((e,a)=>{let{className:s,sideOffset:r=4,...n}=e;return(0,t.jsx)(ex.ZL,{children:(0,t.jsx)(ex.UC,{ref:a,sideOffset:r,className:(0,l.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n})})});ej.displayName=ex.UC.displayName;let ev=r.forwardRef((e,a)=>{let{className:s,inset:r,...n}=e;return(0,t.jsx)(ex.q7,{ref:a,className:(0,l.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",s),...n})});ev.displayName=ex.q7.displayName,r.forwardRef((e,a)=>{let{className:s,children:r,checked:n,...i}=e;return(0,t.jsxs)(ex.H_,{ref:a,className:(0,l.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:n,...i,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(ex.VF,{children:(0,t.jsx)(L.A,{className:"h-4 w-4"})})}),r]})}).displayName=ex.H_.displayName,r.forwardRef((e,a)=>{let{className:s,children:r,...n}=e;return(0,t.jsxs)(ex.hN,{ref:a,className:(0,l.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(ex.VF,{children:(0,t.jsx)(ef.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=ex.hN.displayName,r.forwardRef((e,a)=>{let{className:s,inset:r,...n}=e;return(0,t.jsx)(ex.JU,{ref:a,className:(0,l.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",s),...n})}).displayName=ex.JU.displayName;let ey=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(ex.wv,{ref:a,className:(0,l.cn)("-mx-1 my-1 h-px bg-muted",s),...r})});ey.displayName=ex.wv.displayName;var eN=s(7849),ew=s(5058),ek=s(7531),eC=s(3938),eA=s(6360),eS=s(1528),eM=s(6913),ez=s(2739),eD=s(4624),eL=s(2544),eT=s(212),eE=s(9451),eR=s(4404),eP=s(7083);let eF=r.forwardRef((e,a)=>{let{className:s,value:r,indicatorClassName:n,...i}=e;return(0,t.jsx)(eP.bL,{ref:a,className:(0,l.cn)("relative h-2 w-full overflow-hidden rounded-full bg-secondary dark:bg-gray-700",s),...i,children:(0,t.jsx)(eP.C1,{className:(0,l.cn)("h-full w-full flex-1 bg-primary transition-all dark:bg-accent-blue",n),style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});eF.displayName=eP.bL.displayName;var eI=s(5844),eO=s(3309);function eG(e){let{type:a,url:s,fileName:n,fileSize:i,className:d,onOpenFullscreen:c,isDownloading:o=!1,downloadProgress:m=0}=e,[u,h]=(0,r.useState)(!1),[x,g]=(0,r.useState)(!0),[f,b]=(0,r.useState)(!0),[p,j]=(0,r.useState)(!1),[v,N]=(0,r.useState)(0),[w,M]=(0,r.useState)(null),[z,D]=(0,r.useState)(!1),L=(0,r.useRef)(null),{toast:T}=(0,eI.d)();(0,r.useEffect)(()=>{if(f&&"application"!==a){let e=setInterval(()=>{N(a=>{let s=a+15*Math.random();return s>=100?(clearInterval(e),100):s})},200);return()=>clearInterval(e)}},[f,a]);let E=e=>{e&&e.stopPropagation();let a=document.createElement("a");a.href=s,a.download=n,document.body.appendChild(a),a.click(),document.body.removeChild(a),T({title:"Download started",description:"Downloading ".concat(n)})},R=e=>{e&&e.stopPropagation(),navigator.clipboard.writeText(s),T({title:"Link copied",description:"Media link copied to clipboard"})};return"image"===a?(0,t.jsxs)(X.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:(0,l.cn)("relative group rounded-lg overflow-hidden max-w-xs cursor-pointer",f?"bg-secondary/50 dark:bg-gray-700/50 min-h-[200px] min-w-[200px]":"","hover:shadow-lg hover:scale-[1.01] transition-all duration-300",d),onClick:c,onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),children:[f&&(0,t.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[(0,t.jsx)("div",{className:"h-8 w-8 rounded-full border-2 border-accent-blue border-t-transparent animate-spin mb-2"}),(0,t.jsx)("div",{className:"w-3/4 mt-2",children:(0,t.jsx)(eF,{value:v,className:"h-1"})}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-2 dark:text-gray-400",children:"Loading image..."})]}),w&&(0,t.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-destructive/10 dark:bg-destructive/20",children:[(0,t.jsx)(eN.A,{className:"h-8 w-8 text-destructive mb-2"}),(0,t.jsx)("p",{className:"text-sm text-destructive",children:w})]}),(0,t.jsx)("img",{src:s||"/placeholder.svg",alt:n,className:(0,l.cn)("max-w-full rounded-lg object-cover transition-opacity duration-300",f?"opacity-0":"opacity-100"),style:{maxHeight:"300px"},onLoad:()=>{b(!1)},onError:()=>{b(!1),M("Failed to load image")}}),(0,t.jsx)(eO.N,{children:p&&(0,t.jsx)(X.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 bg-black/30 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(k,{delayDuration:300,children:(0,t.jsxs)(C,{children:[(0,t.jsx)(A,{asChild:!0,children:(0,t.jsx)(y,{variant:"secondary",size:"icon",className:"h-10 w-10 rounded-full bg-black/50 text-white hover:bg-black/70 backdrop-blur-sm",onClick:e=>{e.stopPropagation(),E(e)},children:(0,t.jsx)(ew.A,{className:"h-5 w-5"})})}),(0,t.jsx)(S,{children:"Download"})]})}),(0,t.jsx)(k,{delayDuration:300,children:(0,t.jsxs)(C,{children:[(0,t.jsx)(A,{asChild:!0,children:(0,t.jsx)(y,{variant:"secondary",size:"icon",className:"h-10 w-10 rounded-full bg-black/50 text-white hover:bg-black/70 backdrop-blur-sm",onClick:c,children:(0,t.jsx)(ek.A,{className:"h-5 w-5"})})}),(0,t.jsx)(S,{children:"View fullscreen"})]})}),(0,t.jsxs)(eb,{children:[(0,t.jsx)(ep,{asChild:!0,children:(0,t.jsx)(y,{variant:"secondary",size:"icon",className:"h-10 w-10 rounded-full bg-black/50 text-white hover:bg-black/70 backdrop-blur-sm",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(et.A,{className:"h-5 w-5"})})}),(0,t.jsxs)(ej,{align:"end",className:"w-48 dark:bg-gray-800 dark:border-gray-700",children:[(0,t.jsxs)(ev,{onClick:e=>R(),className:"dark:text-white dark:focus:bg-gray-700",children:[(0,t.jsx)(ec.A,{className:"mr-2 h-4 w-4"}),"Copy link"]}),(0,t.jsxs)(ev,{className:"dark:text-white dark:focus:bg-gray-700",children:[(0,t.jsx)(eC.A,{className:"mr-2 h-4 w-4"}),"Share image"]}),(0,t.jsxs)(ev,{className:"dark:text-white dark:focus:bg-gray-700",children:[(0,t.jsx)(er.A,{className:"mr-2 h-4 w-4"}),"Image info"]}),(0,t.jsx)(ey,{className:"dark:bg-gray-700"}),(0,t.jsxs)(ev,{className:"text-destructive dark:text-red-400 dark:focus:bg-gray-700",children:[(0,t.jsx)(eu.A,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})})}),(0,t.jsxs)("div",{className:"absolute bottom-2 left-2 right-2 flex items-center justify-between",children:[(0,t.jsx)("div",{className:"bg-black/60 text-white text-xs px-2 py-1 rounded-md backdrop-blur-sm max-w-[80%] truncate",children:n}),(0,t.jsx)("div",{className:"bg-black/60 text-white text-xs px-2 py-1 rounded-md backdrop-blur-sm",children:i})]})]}):"video"===a?(0,t.jsxs)(X.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:(0,l.cn)("relative group rounded-lg overflow-hidden max-w-xs transition-all duration-300","hover:shadow-lg hover:scale-[1.01]",d),onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),children:[f&&(0,t.jsxs)("div",{className:"absolute inset-0 z-10 flex flex-col items-center justify-center bg-black/30 backdrop-blur-sm",children:[(0,t.jsx)("div",{className:"h-8 w-8 rounded-full border-2 border-accent-blue border-t-transparent animate-spin mb-2"}),(0,t.jsx)("div",{className:"w-3/4 mt-2",children:(0,t.jsx)(eF,{value:v,className:"h-1"})}),(0,t.jsx)("p",{className:"text-xs text-white mt-2",children:"Loading video..."})]}),w&&(0,t.jsxs)("div",{className:"absolute inset-0 z-10 flex flex-col items-center justify-center bg-destructive/20 backdrop-blur-sm",children:[(0,t.jsx)(eN.A,{className:"h-8 w-8 text-destructive mb-2"}),(0,t.jsx)("p",{className:"text-sm text-destructive",children:w})]}),(0,t.jsx)("video",{ref:L,src:s,className:"max-w-full rounded-lg object-cover",style:{maxHeight:"300px",maxWidth:"300px"},muted:x,loop:!0,onClick:c,onPlay:()=>h(!0),onPause:()=>h(!1),onLoadedData:()=>{b(!1)},onError:()=>{b(!1),M("Failed to load video")},poster:"/placeholder.svg?height=300&width=300"}),(0,t.jsx)("div",{className:(0,l.cn)("absolute inset-0 bg-black/30 transition-opacity duration-300 flex items-center justify-center",!p&&!f&&u&&"opacity-0"),children:(0,t.jsxs)(y,{variant:"secondary",size:"icon",className:"h-12 w-12 rounded-full bg-black/50 text-white hover:bg-black/70 backdrop-blur-sm",onClick:e=>{e.stopPropagation(),L.current&&(u?L.current.pause():L.current.play(),h(!u))},children:[u?(0,t.jsx)(eA.A,{className:"h-6 w-6"}):(0,t.jsx)(eS.A,{className:"h-6 w-6"}),(0,t.jsx)("span",{className:"sr-only",children:u?"Pause":"Play"})]})}),(0,t.jsxs)("div",{className:"absolute bottom-2 left-2 right-2 flex items-center justify-between",children:[(0,t.jsx)("div",{className:"bg-black/60 text-white text-xs px-2 py-1 rounded-md backdrop-blur-sm max-w-[60%] truncate",children:n}),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)(k,{delayDuration:300,children:(0,t.jsxs)(C,{children:[(0,t.jsx)(A,{asChild:!0,children:(0,t.jsx)(y,{variant:"secondary",size:"icon",className:"h-7 w-7 rounded-full bg-black/60 text-white hover:bg-black/70 backdrop-blur-sm",onClick:e=>{e.stopPropagation(),L.current&&(L.current.muted=!L.current.muted,g(!x))},children:x?(0,t.jsx)(eM.A,{className:"h-3 w-3"}):(0,t.jsx)(ez.A,{className:"h-3 w-3"})})}),(0,t.jsx)(S,{children:x?"Unmute":"Mute"})]})}),(0,t.jsx)(k,{delayDuration:300,children:(0,t.jsxs)(C,{children:[(0,t.jsx)(A,{asChild:!0,children:(0,t.jsx)(y,{variant:"secondary",size:"icon",className:"h-7 w-7 rounded-full bg-black/60 text-white hover:bg-black/70 backdrop-blur-sm",onClick:e=>{e.stopPropagation(),E(e)},children:(0,t.jsx)(ew.A,{className:"h-3 w-3"})})}),(0,t.jsx)(S,{children:"Download"})]})}),(0,t.jsx)(k,{delayDuration:300,children:(0,t.jsxs)(C,{children:[(0,t.jsx)(A,{asChild:!0,children:(0,t.jsx)(y,{variant:"secondary",size:"icon",className:"h-7 w-7 rounded-full bg-black/60 text-white hover:bg-black/70 backdrop-blur-sm",onClick:e=>{e.stopPropagation(),c&&c()},children:(0,t.jsx)(eD.A,{className:"h-3 w-3"})})}),(0,t.jsx)(S,{children:"Fullscreen"})]})})]})]})]}):(0,t.jsxs)(X.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:(0,l.cn)("flex items-center p-3 bg-secondary/30 dark:bg-gray-700/30 rounded-lg max-w-xs border border-light-gray/20 dark:border-gray-600/20","hover:bg-secondary/50 dark:hover:bg-gray-700/50 transition-all duration-300","hover:shadow-lg hover:scale-[1.01]",d),onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),children:[(0,t.jsx)("div",{className:"h-12 w-12 rounded-md bg-accent-blue/10 dark:bg-accent-blue/20 flex items-center justify-center flex-shrink-0 mr-3",children:"application/pdf"===a?(0,t.jsx)(eL.A,{className:"h-6 w-6 text-accent-blue"}):a.includes("word")?(0,t.jsx)(eT.A,{className:"h-6 w-6 text-accent-blue"}):a.includes("image")?(0,t.jsx)(eE.A,{className:"h-6 w-6 text-accent-blue"}):a.includes("video")?(0,t.jsx)(es.A,{className:"h-6 w-6 text-accent-blue"}):(0,t.jsx)(eT.A,{className:"h-6 w-6 text-accent-blue"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"font-medium text-sm truncate dark:text-white",children:n}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground dark:text-gray-400",children:i}),o?(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("span",{className:"text-xs text-muted-foreground dark:text-gray-400",children:"Downloading..."}),(0,t.jsxs)("span",{className:"text-xs font-medium dark:text-white",children:[Math.round(m),"%"]})]}),(0,t.jsx)(eF,{value:m,className:"h-1.5"})]}):(0,t.jsxs)("div",{className:"mt-2 flex items-center gap-1.5 flex-wrap",children:[(0,t.jsx)(k,{delayDuration:300,children:(0,t.jsxs)(C,{children:[(0,t.jsx)(A,{asChild:!0,children:(0,t.jsxs)(y,{variant:"outline",size:"sm",className:"h-7 text-xs rounded-full px-3 bg-white dark:bg-gray-800 hover:bg-accent-blue/10 hover:text-accent-blue",onClick:E,children:[(0,t.jsx)(ew.A,{className:"h-3 w-3 mr-1"}),"Download"]})}),(0,t.jsx)(S,{children:"Download file"})]})}),(0,t.jsx)(k,{delayDuration:300,children:(0,t.jsxs)(C,{children:[(0,t.jsx)(A,{asChild:!0,children:(0,t.jsxs)(y,{variant:"outline",size:"sm",className:"h-7 text-xs rounded-full px-3 bg-white dark:bg-gray-800 hover:bg-accent-blue/10 hover:text-accent-blue",onClick:c,children:[(0,t.jsx)(ek.A,{className:"h-3 w-3 mr-1"}),"Preview"]})}),(0,t.jsx)(S,{children:"Preview file"})]})}),(0,t.jsxs)(eb,{children:[(0,t.jsx)(ep,{asChild:!0,children:(0,t.jsx)(y,{variant:"ghost",size:"icon",className:"h-7 w-7 rounded-full hover:bg-accent-blue/10 hover:text-accent-blue",children:(0,t.jsx)(et.A,{className:"h-3 w-3"})})}),(0,t.jsxs)(ej,{align:"end",className:"w-48 dark:bg-gray-800 dark:border-gray-700",children:[(0,t.jsxs)(ev,{onClick:R,className:"dark:text-white dark:focus:bg-gray-700",children:[(0,t.jsx)(ec.A,{className:"mr-2 h-4 w-4"}),"Copy link"]}),(0,t.jsxs)(ev,{className:"dark:text-white dark:focus:bg-gray-700",children:[(0,t.jsx)(eC.A,{className:"mr-2 h-4 w-4"}),"Share file"]}),(0,t.jsxs)(ev,{className:"dark:text-white dark:focus:bg-gray-700",children:[(0,t.jsx)(eR.A,{className:"mr-2 h-4 w-4"}),"Open in new tab"]}),(0,t.jsx)(ey,{className:"dark:bg-gray-700"}),(0,t.jsxs)(ev,{className:"text-destructive dark:text-red-400 dark:focus:bg-gray-700",children:[(0,t.jsx)(eu.A,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})]})]})}function eU(e){let{media:a,onClose:s,mediaList:l=[]}=e,[n,d]=(0,r.useState)(0),[c,o]=(0,r.useState)(!1),[m,u]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(l.length>0){let e=l.findIndex(e=>e.url===a.url);-1!==e&&d(e)}},[a,l]);let h=l.length>0?l[n]:a,x=()=>{l.length>0&&d(e=>(e+1)%l.length)},g=()=>{l.length>0&&d(e=>(e-1+l.length)%l.length)},f=()=>{let e=document.createElement("a");e.href=h.url,e.download=h.fileName,document.body.appendChild(e),e.click(),document.body.removeChild(e)},b=()=>{let e=document.getElementById("fullscreen-video");e&&(c?e.pause():e.play(),o(!c))};return(0,r.useEffect)(()=>{let e=e=>{"Escape"===e.key?s():"ArrowRight"===e.key?x():"ArrowLeft"===e.key?g():" "===e.key&&"video"===h.type&&(e.preventDefault(),b())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[h,c]),(0,t.jsxs)("div",{className:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center animate-fade-slide-in",children:[(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"absolute top-4 right-4 text-white hover:bg-white/10 z-10",onClick:s,children:[(0,t.jsx)(i.A,{className:"h-6 w-6"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]}),(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"absolute top-4 left-4 text-white hover:bg-white/10 z-10",onClick:f,children:[(0,t.jsx)(ew.A,{className:"h-6 w-6"}),(0,t.jsx)("span",{className:"sr-only",children:"Download"})]}),l.length>1&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"absolute left-4 top-1/2 -translate-y-1/2 text-white hover:bg-white/10 z-10",onClick:g,children:[(0,t.jsx)(Q.A,{className:"h-8 w-8"}),(0,t.jsx)("span",{className:"sr-only",children:"Previous"})]}),(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"absolute right-4 top-1/2 -translate-y-1/2 text-white hover:bg-white/10 z-10",onClick:x,children:[(0,t.jsx)(eg.A,{className:"h-8 w-8"}),(0,t.jsx)("span",{className:"sr-only",children:"Next"})]})]}),(0,t.jsx)("div",{className:"max-h-[90vh] max-w-[90vw] relative",children:"image"===h.type?(0,t.jsx)("img",{src:h.url||"/placeholder.svg",alt:h.fileName,className:"max-h-[90vh] max-w-[90vw] object-contain"}):"video"===h.type?(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)("video",{id:"fullscreen-video",src:h.url,className:"max-h-[90vh] max-w-[90vw] object-contain",controls:!1,autoPlay:!0,loop:!0,muted:m,onPlay:()=>o(!0),onPause:()=>o(!1)}),(0,t.jsxs)("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex items-center gap-4 bg-black/50 rounded-full px-4 py-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"h-10 w-10 text-white hover:bg-white/10",onClick:b,children:[c?(0,t.jsx)(eA.A,{className:"h-6 w-6"}):(0,t.jsx)(eS.A,{className:"h-6 w-6"}),(0,t.jsx)("span",{className:"sr-only",children:c?"Pause":"Play"})]}),(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"h-10 w-10 text-white hover:bg-white/10",onClick:()=>{let e=document.getElementById("fullscreen-video");e&&(e.muted=!e.muted,u(!e.muted))},children:[m?(0,t.jsx)(eM.A,{className:"h-6 w-6"}):(0,t.jsx)(ez.A,{className:"h-6 w-6"}),(0,t.jsx)("span",{className:"sr-only",children:m?"Unmute":"Mute"})]})]})]}):(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-lg",children:[(0,t.jsx)("p",{className:"text-xl font-medium mb-4 dark:text-white",children:"File Preview Not Available"}),(0,t.jsxs)("p",{className:"mb-4 dark:text-gray-300",children:['The file "',h.fileName,'" cannot be previewed directly.']}),(0,t.jsx)(y,{onClick:f,children:"Download File"})]})}),(0,t.jsx)("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-black/50 text-white px-4 py-2 rounded-full text-sm",children:h.fileName})]})}function eB(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:640,[a,s]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{{let a=()=>{s(window.innerWidth<e)};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)}},[e]),a}function eV(e){let{content:a,timestamp:s,sender:n,isSent:i=!1,isRead:d=!1,isDelivered:c=!1,isEdited:o=!1,className:m,reactions:u=[],onReply:h,onEdit:x,onDelete:p,onPin:j,isPinned:v=!1,onReaction:N,currentUserId:w,senderRole:k,isSystemMessage:C=!1,media:A}=e,[S,M]=(0,r.useState)(!1),[D,T]=(0,r.useState)(!1),[E,R]=(0,r.useState)(!1),P=(0,r.useRef)(null),F=(0,r.useRef)(null),[I,O]=(0,r.useState)(0),[G,U]=(0,r.useState)(0),[B,V]=(0,r.useState)(null),Y=eB();(0,r.useEffect)(()=>{let e=e=>{S&&F.current&&!F.current.contains(e.target)&&M(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[S]);let _=()=>{M(!0)},q=()=>{h&&h(a)};return(0,t.jsxs)("div",{className:(0,l.cn)("group flex w-full animate-soft-bounce opacity-0 gap-2",i?"ml-auto justify-end":"",C?"justify-center":"",m),children:[!i&&!C&&(0,t.jsx)("div",{className:"flex-shrink-0 pt-1 hidden sm:block",children:(0,t.jsxs)(g,{className:"profile-picture h-8 w-8",children:[(0,t.jsx)(f,{src:n.avatar,alt:n.name}),(0,t.jsx)(b,{children:n.name.charAt(0)})]})}),(0,t.jsxs)("div",{className:"flex flex-col",style:{maxWidth:Y?A?"85%":"75%":A?"max-w-md":"max-w-sm"},children:[!i&&!C&&(0,t.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[(0,t.jsx)("span",{className:"text-sm font-medium dark:text-white",children:n.name}),"admin"===k&&(0,t.jsx)(z,{variant:"outline",className:"text-[10px] px-1 py-0 h-4 bg-accent-blue/10 text-accent-blue border-accent-blue/20 dark:bg-accent-blue/20",children:"Admin"}),"moderator"===k&&(0,t.jsx)(z,{variant:"outline",className:"text-[10px] px-1 py-0 h-4 bg-secondary text-muted-foreground border-muted-foreground/20 dark:bg-gray-700 dark:text-gray-300",children:"Mod"})]}),(0,t.jsxs)("div",{className:"flex items-end gap-2",children:[(0,t.jsxs)("div",{ref:P,className:(0,l.cn)("message-bubble shadow-message relative",i?"message-bubble-sent":"message-bubble-received",C?"message-bubble-system":"",0!==I&&"transition-transform",A?"p-0 overflow-hidden":"p-3","break-words"),style:{transform:"translateX(".concat(I,"px)")},onTouchStart:e=>{U(e.touches[0].clientX),V(setTimeout(()=>{_()},500))},onTouchMove:e=>{B&&(clearTimeout(B),V(null));let a=e.touches[0].clientX-G;(i&&a<0||!i&&a>0)&&O(Math.min(Math.abs(a),60)*(a<0?-1:1))},onTouchEnd:()=>{B&&(clearTimeout(B),V(null)),Math.abs(I)>40&&h&&q(),O(0)},onContextMenu:e=>{e.preventDefault(),_()},onMouseEnter:()=>R(!0),onMouseLeave:()=>R(!1),children:[A?(0,t.jsx)(eG,{type:A.type,url:A.url,fileName:A.fileName,fileSize:A.fileSize,onOpenFullscreen:()=>{A&&T(!0)}}):(0,t.jsxs)(t.Fragment,{children:[a,o&&(0,t.jsx)("span",{className:"text-xs opacity-70 ml-2 dark:text-gray-300",children:"(edited)"})]}),u.length>0&&(0,t.jsx)("div",{className:"absolute -bottom-3 right-2 bg-white dark:bg-gray-800 rounded-full px-1.5 py-0.5 shadow-glossy border border-light-gray/50 dark:border-gray-700 text-sm flex items-center gap-1 animate-scale-in",children:u.map((e,a)=>(0,t.jsxs)("div",{className:(0,l.cn)("flex items-center gap-0.5 px-1 rounded-full cursor-pointer hover:bg-secondary/50 dark:hover:bg-gray-700/50",w&&e.users.includes(w)&&"bg-accent-blue/10 dark:bg-accent-blue/20"),onClick:()=>N&&N(e.emoji),children:[(0,t.jsx)("span",{children:e.emoji}),(0,t.jsx)("span",{className:"text-xs dark:text-gray-300",children:e.count})]},a))}),S&&(0,t.jsx)("div",{ref:F,className:"absolute -top-12 left-0 right-0 mx-auto w-fit flex items-center gap-1 rounded-full bg-glossy-white dark:bg-gray-800 p-1.5 shadow-glossy backdrop-blur-sm z-10 animate-scale-in border border-light-gray/50 dark:border-gray-700",children:["\uD83D\uDC4D","❤️","\uD83D\uDE02","\uD83C\uDF89","\uD83D\uDD25","\uD83D\uDC4F"].map(e=>(0,t.jsx)("button",{className:"hover:scale-125 transition-transform duration-200",onClick:()=>{N&&N(e),M(!1)},children:(0,t.jsx)("span",{className:"text-lg",children:e})},e))}),(0,t.jsxs)("div",{className:(0,l.cn)("absolute right-1 -top-8 flex items-center gap-1 rounded-md bg-glossy-white dark:bg-gray-800 p-1 shadow-glossy backdrop-blur-sm z-10",E||Y?"opacity-100":"opacity-0 invisible","transition-opacity duration-200"),children:[(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-accent-blue dark:text-gray-400 dark:hover:text-accent-blue",onClick:()=>{N&&N("\uD83D\uDC4D")},children:[(0,t.jsx)("span",{className:"sr-only",children:"React to message"}),(0,t.jsx)("span",{children:"\uD83D\uDC4D"})]}),(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-accent-blue dark:text-gray-400 dark:hover:text-accent-blue",onClick:()=>{N&&N("❤️")},children:[(0,t.jsx)("span",{className:"sr-only",children:"React to message"}),(0,t.jsx)("span",{children:"❤️"})]}),(0,t.jsxs)(eb,{children:[(0,t.jsx)(ep,{asChild:!0,children:(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-accent-blue dark:text-gray-400 dark:hover:text-accent-blue",children:[(0,t.jsx)(en.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"More options"})]})}),(0,t.jsxs)(ej,{align:"end",className:"w-[160px] dark:bg-gray-800 dark:border-gray-700",children:[h&&(0,t.jsxs)(ev,{onClick:q,className:"dark:text-white dark:focus:bg-gray-700",children:[(0,t.jsx)(ei.A,{className:"mr-2 h-4 w-4"}),"Reply"]}),(0,t.jsxs)(ev,{className:"dark:text-white dark:focus:bg-gray-700",children:[(0,t.jsx)(ed.A,{className:"mr-2 h-4 w-4"}),"Forward"]}),(0,t.jsxs)(ev,{onClick:()=>navigator.clipboard.writeText(a),className:"dark:text-white dark:focus:bg-gray-700",children:[(0,t.jsx)(ec.A,{className:"mr-2 h-4 w-4"}),"Copy Text"]}),j&&(0,t.jsxs)(ev,{onClick:j,className:"dark:text-white dark:focus:bg-gray-700",children:[(0,t.jsx)(eo.A,{className:"mr-2 h-4 w-4"}),v?"Unpin":"Pin"]}),x&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ey,{className:"dark:bg-gray-700"}),(0,t.jsxs)(ev,{onClick:x,className:"dark:text-white dark:focus:bg-gray-700",children:[(0,t.jsx)(em.A,{className:"mr-2 h-4 w-4"}),"Edit"]})]}),p&&(0,t.jsxs)(ev,{className:"text-destructive dark:text-red-400 dark:focus:bg-gray-700",onClick:p,children:[(0,t.jsx)(eu.A,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})]}),i&&(0,t.jsx)("div",{className:"mb-1 flex h-4 w-4 items-center justify-center text-muted-foreground dark:text-gray-400",children:d?(0,t.jsx)(eh.A,{className:"h-3 w-3 text-accent-blue"}):c?(0,t.jsx)(eh.A,{className:"h-3 w-3"}):(0,t.jsx)(L.A,{className:"h-3 w-3"})})]}),(0,t.jsx)("span",{className:"mt-1 text-xs text-muted-foreground dark:text-gray-400",children:s})]}),i&&!C&&(0,t.jsx)("div",{className:"flex-shrink-0 pt-1 hidden sm:block",children:(0,t.jsxs)(g,{className:"profile-picture h-8 w-8",children:[(0,t.jsx)(f,{src:n.avatar,alt:n.name}),(0,t.jsx)(b,{children:n.name.charAt(0)})]})}),D&&A&&(0,t.jsx)(eU,{media:A,onClose:()=>T(!1)})]})}var eY=s(7188),e_=s(678),eq=s(9769),eH=s(457),eJ=s(4666),eW=s(8305),eX=s(5516),eK=s(6525),eZ=s(734),eQ=s(7500),e$=s(4556);let e0=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsxs)(e$.bL,{ref:a,className:(0,l.cn)("relative flex w-full touch-none select-none items-center",s),...r,children:[(0,t.jsx)(e$.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,t.jsx)(e$.Q6,{className:"absolute h-full bg-accent-blue"})}),(0,t.jsx)(e$.zi,{className:"block h-5 w-5 rounded-full border-2 border-accent-blue bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});function e1(e){let{onStop:a,onCancel:s}=e,[n,d]=(0,r.useState)(!0),[c,o]=(0,r.useState)(!1),[m,u]=(0,r.useState)(0),[h,x]=(0,r.useState)(null),[g,f]=(0,r.useState)([]),[b,p]=(0,r.useState)(null),[j,v]=(0,r.useState)(!1),[N,w]=(0,r.useState)(0),[k,C]=(0,r.useState)(!1),[A,S]=(0,r.useState)(null),M=(0,r.useRef)(null),z=(0,r.useRef)([]),D=(0,r.useRef)(null),L=(0,r.useRef)(null),T=(0,r.useRef)(null),E=(0,r.useRef)(0),R=(0,r.useRef)(0),P=(0,r.useRef)(null),F=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=null;return(async()=>{try{let a=await navigator.mediaDevices.getUserMedia({audio:!0});L.current=new(window.AudioContext||window.webkitAudioContext),T.current=L.current.createAnalyser(),L.current.createMediaStreamSource(a).connect(T.current),T.current.fftSize=128,M.current=new MediaRecorder(a),z.current=[],M.current.ondataavailable=e=>{e.data.size>0&&z.current.push(e.data)},M.current.onstop=()=>{let e=new Blob(z.current,{type:"audio/webm"});x(e);let s=URL.createObjectURL(e);S(s),P.current&&(P.current.src=s),a.getTracks().forEach(e=>e.stop())},M.current.start(100),E.current=Date.now(),e=setInterval(()=>{if(!c){let e=Date.now()-E.current-R.current;u(Math.floor(e/1e3))}},100),I()}catch(e){console.error("Error accessing microphone:",e),e instanceof DOMException&&("NotAllowedError"===e.name||"PermissionDeniedError"===e.name)&&C(!0),s()}})(),()=>{e&&clearInterval(e),D.current&&cancelAnimationFrame(D.current),F.current&&clearInterval(F.current),M.current&&"inactive"!==M.current.state&&M.current.stop(),L.current&&L.current.close(),A&&URL.revokeObjectURL(A)}},[s]),(0,r.useEffect)(()=>{c&&M.current&&"recording"===M.current.state?(M.current.pause(),R.current+=Date.now()-E.current):!c&&M.current&&"paused"===M.current.state&&(M.current.resume(),E.current=Date.now())},[c]),(0,r.useEffect)(()=>(P.current||(P.current=new Audio,P.current.onplay=()=>{v(!0)},P.current.onpause=()=>{v(!1)},P.current.onended=()=>{v(!1),w(0)}),b&&P.current&&(P.current.src=b),()=>{P.current&&P.current.pause()}),[b]),(0,r.useEffect)(()=>(j?F.current=setInterval(()=>{P.current&&w(P.current.currentTime)},100):F.current&&clearInterval(F.current),()=>{F.current&&clearInterval(F.current)}),[j]);let I=()=>{if(!T.current)return;let e=new Uint8Array(T.current.frequencyBinCount),a=()=>{T.current&&(T.current.getByteFrequencyData(e),f(Array.from(e).slice(0,20).map(e=>e/255)),n&&(D.current=requestAnimationFrame(a)))};a()},O=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({audio:!0});L.current=new(window.AudioContext||window.webkitAudioContext),T.current=L.current.createAnalyser(),L.current.createMediaStreamSource(e).connect(T.current),T.current.fftSize=128,M.current=new MediaRecorder(e),z.current=[],M.current.ondataavailable=e=>{e.data.size>0&&z.current.push(e.data)},M.current.onstop=()=>{let a=new Blob(z.current,{type:"audio/webm"});x(a);let s=URL.createObjectURL(a);S(s),P.current&&(P.current.src=s),e.getTracks().forEach(e=>e.stop())},M.current.start(100),I()}catch(e){console.error("Error accessing microphone:",e),e instanceof DOMException&&("NotAllowedError"===e.name||"PermissionDeniedError"===e.name)&&C(!0),s()}},G=e=>{let a=Math.floor(e/60),s=Math.floor(e%60);return"".concat(a,":").concat(s<10?"0":"").concat(s)},U=()=>P.current&&P.current.duration?P.current.duration:m;return(0,t.jsx)("div",{className:"absolute inset-x-0 bottom-0 bg-glossy-white dark:bg-white/95 rounded-t-xl border border-light-gray/50 shadow-glossy p-4 animate-soft-bounce z-10",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:k?"Microphone access denied":n?"Recording voice message...":"Voice message recorded"}),(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full",onClick:s,children:[(0,t.jsx)(i.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Cancel"})]})]}),k?(0,t.jsxs)("div",{className:"w-full p-4 bg-destructive/10 rounded-lg text-center",children:[(0,t.jsx)("p",{className:"text-sm text-destructive mb-2",children:"Microphone access was denied"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mb-4",children:"Please allow microphone access in your browser settings to record voice messages."}),(0,t.jsx)(y,{variant:"outline",className:"w-full",onClick:s,children:"Close"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"w-full flex items-center gap-4",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:n?(0,t.jsx)("div",{className:(0,l.cn)("h-10 w-10 rounded-full flex items-center justify-center",c?"bg-secondary":"bg-accent-blue animate-pulse"),children:(0,t.jsx)(eK.A,{className:"h-5 w-5 text-white"})}):(0,t.jsx)(y,{variant:"ghost",size:"icon",className:(0,l.cn)("h-10 w-10 rounded-full bg-accent-blue flex items-center justify-center",j&&"bg-secondary"),onClick:()=>{P.current&&b&&(j?P.current.pause():P.current.play())},children:j?(0,t.jsx)(eA.A,{className:"h-5 w-5 text-white"}):(0,t.jsx)(eS.A,{className:"h-5 w-5 text-white"})})}),(0,t.jsxs)("div",{className:"flex-1",children:[n?(0,t.jsx)("div",{className:"h-12 flex items-center justify-center",children:(0,t.jsx)("div",{className:"w-full h-8 flex items-center justify-around",children:g.map((e,a)=>(0,t.jsx)("div",{className:"w-1 bg-accent-blue rounded-full",style:{height:"".concat(Math.max(4,40*e),"px"),opacity:c?.5:1,animation:c?"none":"typing-dot ".concat(.5+e,"s infinite ease-in-out")}},a))})}):(0,t.jsx)("div",{className:"w-full",children:(0,t.jsx)(e0,{value:[N],max:U(),step:.1,onValueChange:e=>{P.current&&(P.current.currentTime=e[0],w(e[0]))},className:"my-2"})}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[(0,t.jsx)("span",{children:G(n?m:N)}),!n&&(0,t.jsx)("span",{children:G(U())})]})]})]}),(0,t.jsx)("div",{className:"flex items-center gap-2 w-full",children:n?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(y,{variant:"outline",className:"flex-1 rounded-full border-light-gray",onClick:()=>{o(!c)},children:[c?(0,t.jsx)(eS.A,{className:"mr-2 h-4 w-4"}):(0,t.jsx)(eA.A,{className:"mr-2 h-4 w-4"}),c?"Resume":"Pause"]}),(0,t.jsx)(y,{className:"flex-1 rounded-full bg-blue-gradient text-white hover:shadow-blue-glow",onClick:()=>{d(!1),M.current&&"inactive"!==M.current.state&&M.current.stop()},children:(0,t.jsx)("span",{children:"Done"})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(y,{variant:"outline",className:"flex-1 rounded-full border-light-gray",onClick:()=>{P.current&&P.current.pause(),x(null),p(null),d(!0),o(!1),u(0),R.current=0,E.current=Date.now(),O()},children:[(0,t.jsx)(eu.A,{className:"mr-2 h-4 w-4"}),"Delete"]}),(0,t.jsxs)(y,{className:"flex-1 rounded-full bg-blue-gradient text-white hover:shadow-blue-glow",onClick:()=>{a(h)},children:[(0,t.jsx)(eQ.A,{className:"mr-2 h-4 w-4"}),"Send"]})]})})]})]})})}e0.displayName=e$.bL.displayName;var e4=s(2184);function e2(e){var a;let{onFileUpload:s,onCancel:n,acceptedTypes:d="image/*,video/*,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,text/plain",maxSizeMB:c=50}=e,[o,m]=(0,r.useState)(null),[u,h]=(0,r.useState)(null),[x,g]=(0,r.useState)(""),[f,b]=(0,r.useState)(0),[p,j]=(0,r.useState)(!1),[v,N]=(0,r.useState)("idle"),[w,k]=(0,r.useState)(!1),C=(0,r.useRef)(null),A=(0,r.useRef)(null),{toast:S}=(0,eI.d)(),M=e=>{if(e.size/1048576>c){S({title:"File too large",description:"File size exceeds the maximum limit of ".concat(c,"MB"),variant:"destructive"});return}m(e);let a=e.type.split("/")[0];if(g(a),"image"===a||"video"===a){let a=new FileReader;a.onload=()=>{h(a.result)},a.readAsDataURL(e)}else h(null)},z=()=>{var e;null===(e=C.current)||void 0===e||e.click()},T=(0,r.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),k(!0)},[]),E=(0,r.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),k(!1)},[]),R=(0,r.useCallback)(e=>{e.preventDefault(),e.stopPropagation()},[]),P=(0,r.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),k(!1);let a=e.dataTransfer.files;a.length>0&&M(a[0])},[]);return(0,t.jsx)("div",{className:"absolute inset-x-0 bottom-0 bg-glossy-white dark:bg-gray-800 rounded-t-xl border border-light-gray/50 dark:border-gray-700 shadow-glossy p-4 animate-soft-bounce z-10",children:(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-lg font-medium dark:text-white",children:"Upload File"}),(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full",onClick:n,children:[(0,t.jsx)(i.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Cancel"})]})]}),o?(0,t.jsx)("div",{className:"border rounded-lg p-4 dark:border-gray-700",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:["image"===x&&u?(0,t.jsx)("div",{className:"h-20 w-20 rounded-md overflow-hidden bg-secondary dark:bg-gray-700 flex-shrink-0",children:(0,t.jsx)("img",{src:u||"/placeholder.svg",alt:"Preview",className:"h-full w-full object-cover"})}):"video"===x&&u?(0,t.jsx)("div",{className:"h-20 w-20 rounded-md overflow-hidden bg-secondary dark:bg-gray-700 flex-shrink-0",children:(0,t.jsx)("video",{src:u,className:"h-full w-full object-cover"})}):(0,t.jsx)("div",{className:"h-20 w-20 rounded-md bg-secondary dark:bg-gray-700 flex items-center justify-center flex-shrink-0",children:(()=>{switch(x){case"image":return(0,t.jsx)(eE.A,{className:"h-8 w-8 text-accent-blue"});case"video":return(0,t.jsx)(es.A,{className:"h-8 w-8 text-accent-blue"});case"application":return(0,t.jsx)(eL.A,{className:"h-8 w-8 text-accent-blue"});default:return(0,t.jsx)(eT.A,{className:"h-8 w-8 text-accent-blue"})}})()}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"font-medium truncate dark:text-white",children:o.name}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground dark:text-gray-400",children:(a=o.size)<1024?a+" bytes":a<1048576?(a/1024).toFixed(1)+" KB":(a/1048576).toFixed(1)+" MB"}),"idle"!==v&&(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsxs)("span",{className:"text-xs text-muted-foreground dark:text-gray-400",children:["uploading"===v&&"Uploading...","success"===v&&"Upload complete","error"===v&&"Upload failed"]}),(0,t.jsxs)("span",{className:"text-xs font-medium dark:text-white",children:[Math.round(f),"%"]})]}),(0,t.jsx)(eF,{value:f,className:"h-2",indicatorClassName:(0,l.cn)("success"===v&&"bg-green-500","error"===v&&"bg-red-500")})]})]}),"idle"===v&&(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0",onClick:()=>{m(null),h(null)},children:[(0,t.jsx)(i.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Remove"})]}),"success"===v&&(0,t.jsx)("div",{className:"h-8 w-8 rounded-full bg-green-100 dark:bg-green-900 flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(L.A,{className:"h-4 w-4 text-green-600 dark:text-green-400"})}),"error"===v&&(0,t.jsx)("div",{className:"h-8 w-8 rounded-full bg-red-100 dark:bg-red-900 flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(eN.A,{className:"h-4 w-4 text-red-600 dark:text-red-400"})})]})}):(0,t.jsxs)("div",{ref:A,className:(0,l.cn)("border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-all",w?"border-accent-blue bg-accent-blue/5 dark:bg-accent-blue/10":"border-light-gray dark:border-gray-700 hover:border-accent-blue dark:hover:border-accent-blue/70"),onClick:z,onDragEnter:T,onDragLeave:E,onDragOver:R,onDrop:P,role:"button",tabIndex:0,"aria-label":"Upload file",children:[(0,t.jsx)("input",{ref:C,type:"file",className:"hidden",accept:d,onChange:e=>{var a;let s=null===(a=e.target.files)||void 0===a?void 0:a[0];s&&M(s)},"aria-hidden":"true"}),(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full bg-accent-blue/10 dark:bg-accent-blue/20 flex items-center justify-center mb-4",children:(0,t.jsx)(D.A,{className:"h-8 w-8 text-accent-blue"})}),(0,t.jsx)("p",{className:"font-medium mb-1 dark:text-white",children:"Drag and drop or click to upload"}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground dark:text-gray-400 mb-4",children:["Support for images, videos, and documents up to ",c,"MB"]}),(0,t.jsx)(y,{variant:"outline",size:"sm",className:"rounded-full px-4",onClick:e=>{e.stopPropagation(),z()},children:"Browse Files"})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(y,{variant:"outline",onClick:n,disabled:p,className:"rounded-full px-4",children:"Cancel"}),(0,t.jsx)(y,{onClick:()=>{if(!o)return;j(!0),N("uploading");let e=0,a=setInterval(()=>{(e+=10*Math.random())>100&&(e=100,clearInterval(a),setTimeout(()=>{let e=URL.createObjectURL(o);N("success"),S({title:"File uploaded",description:"Your file has been uploaded successfully"}),setTimeout(()=>{s(o,x,e),j(!1)},1e3)},500)),b(e)},200)},disabled:!o||p||"success"===v,className:(0,l.cn)("rounded-full px-4",p?"cursor-not-allowed":"","success"===v&&"bg-green-500 hover:bg-green-600"),children:"uploading"===v?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e4.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Uploading..."]}):"success"===v?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(L.A,{className:"mr-2 h-4 w-4"}),"Uploaded"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(D.A,{className:"mr-2 h-4 w-4"}),"Upload"]})})]})]})})}function e5(e){let{onSendMessage:a,onSendVoice:s,onSendMedia:n,replyingTo:d,onCancelReply:c,isEditing:o=!1,className:m}=e,[u,h]=(0,r.useState)(""),[x,g]=(0,r.useState)(!1),[f,b]=(0,r.useState)(!1),[p,j]=(0,r.useState)(!1),[v,N]=(0,r.useState)(!1),[w,M]=(0,r.useState)(""),[z,D]=(0,r.useState)(40),[L,T]=(0,r.useState)("recent"),R=(0,r.useRef)(null),P=(0,r.useRef)(null),F=(0,r.useRef)(null),I=(0,r.useRef)(null);(0,r.useRef)(null),eB();let O=[{id:"recent",name:"Recent",icon:(0,t.jsx)(eY.A,{className:"h-4 w-4"}),emojis:["\uD83D\uDE0A","\uD83D\uDC4D","❤️","\uD83C\uDF89","\uD83D\uDD25","\uD83D\uDE02","\uD83D\uDE4F","✨","\uD83D\uDC4F","\uD83E\uDD14","\uD83D\uDE0D","\uD83D\uDE4C"]},{id:"smileys",name:"Smileys",icon:(0,t.jsx)(e_.A,{className:"h-4 w-4"}),emojis:["\uD83D\uDE00","\uD83D\uDE03","\uD83D\uDE04","\uD83D\uDE01","\uD83D\uDE06","\uD83D\uDE05","\uD83D\uDE02","\uD83E\uDD23","\uD83D\uDE0A","\uD83D\uDE07","\uD83D\uDE42","\uD83D\uDE43","\uD83D\uDE09","\uD83D\uDE0C","\uD83D\uDE0D","\uD83E\uDD70","\uD83D\uDE18","\uD83D\uDE17","\uD83D\uDE19","\uD83D\uDE1A"]},{id:"gestures",name:"Gestures",icon:(0,t.jsx)(eg.A,{className:"h-4 w-4"}),emojis:["\uD83D\uDC4D","\uD83D\uDC4E","\uD83D\uDC4C","✌️","\uD83E\uDD1E","\uD83E\uDD1F","\uD83E\uDD19","\uD83E\uDD1B","\uD83E\uDD1C","\uD83D\uDC4F","\uD83D\uDE4C","\uD83D\uDC50","\uD83E\uDD32","\uD83E\uDD1D","\uD83D\uDE4F","✍️","\uD83D\uDCAA","\uD83E\uDDBE","\uD83E\uDDBF","\uD83E\uDDB5"]},{id:"love",name:"Love",icon:(0,t.jsx)(eg.A,{className:"h-4 w-4"}),emojis:["❤️","\uD83E\uDDE1","\uD83D\uDC9B","\uD83D\uDC9A","\uD83D\uDC99","\uD83D\uDC9C","\uD83D\uDDA4","\uD83E\uDD0D","\uD83E\uDD0E","\uD83D\uDC94","❣️","\uD83D\uDC95","\uD83D\uDC9E","\uD83D\uDC93","\uD83D\uDC97","\uD83D\uDC96","\uD83D\uDC98","\uD83D\uDC9D","\uD83D\uDC9F","♥️"]}],G=[{id:"media",name:"Media",items:[{id:"photo",icon:(0,t.jsx)(eE.A,{className:"h-5 w-5"}),label:"Photo",onClick:()=>_("image")},{id:"video",icon:(0,t.jsx)(es.A,{className:"h-5 w-5"}),label:"Video",onClick:()=>_("video")},{id:"camera",icon:(0,t.jsx)(eq.A,{className:"h-5 w-5"}),label:"Camera",onClick:()=>_("camera")},{id:"gif",icon:(0,t.jsx)(eE.A,{className:"h-5 w-5"}),label:"GIF",onClick:()=>_("gif")}]},{id:"files",name:"Files",items:[{id:"document",icon:(0,t.jsx)(eT.A,{className:"h-5 w-5"}),label:"Document",onClick:()=>_("document")},{id:"sticker",icon:(0,t.jsx)(eH.A,{className:"h-5 w-5"}),label:"Sticker",onClick:()=>_("sticker")}]},{id:"other",name:"Other",items:[{id:"location",icon:(0,t.jsx)(eJ.A,{className:"h-5 w-5"}),label:"Location",onClick:()=>_("location")},{id:"link",icon:(0,t.jsx)(eW.A,{className:"h-5 w-5"}),label:"Link",onClick:()=>_("link")},{id:"schedule",icon:(0,t.jsx)(eX.A,{className:"h-5 w-5"}),label:"Schedule",onClick:()=>_("schedule")},{id:"voice",icon:(0,t.jsx)(eK.A,{className:"h-5 w-5"}),label:"Voice",onClick:()=>_("voice")}]}],{toast:U}=(0,eI.d)(),{screenSize:B}=eB();(0,r.useEffect)(()=>{d&&R.current&&(R.current.focus(),o&&h(d))},[d,o]),(0,r.useEffect)(()=>{let e=e=>{f&&F.current&&!F.current.contains(e.target)&&b(!1),p&&I.current&&!I.current.contains(e.target)&&j(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[f,p]),(0,r.useEffect)(()=>{if(R.current){R.current.style.height="auto";let e=Math.min(Math.max(40,R.current.scrollHeight),120);R.current.style.height="".concat(e,"px"),D(e)}},[u]);let V=()=>{u.trim()&&(a(u),h(""),R.current&&(R.current.style.height="40px",D(40)))},Y=e=>{var a;let s=(null===(a=R.current)||void 0===a?void 0:a.selectionStart)||u.length;h(u.slice(0,s)+e+u.slice(s)),setTimeout(()=>{R.current&&(R.current.focus(),R.current.selectionStart=s+e.length,R.current.selectionEnd=s+e.length)},10)},_=e=>{switch(b(!1),e){case"camera":U({title:"Camera",description:"Camera functionality would open here"}),M("image"),N(!0);break;case"image":M("image"),N(!0);break;case"video":M("video"),N(!0);break;case"document":M("document"),N(!0);break;case"location":U({title:"Location",description:"Location picker would open here"}),a("\uD83D\uDCCD Shared location");break;case"voice":g(!0);break;case"gif":U({title:"GIF selector",description:"GIF selector would open here"});break;case"sticker":U({title:"Sticker pack",description:"Sticker selector would open here"});break;case"schedule":U({title:"Schedule message",description:"Message scheduler would open here"});break;case"link":U({title:"Share link",description:"Link sharing options would open here"});break;default:U({title:"Feature not implemented",description:"The ".concat(e," feature is not yet implemented")})}};return(0,t.jsxs)("div",{className:(0,l.cn)("flex flex-col gap-2 p-2 sm:p-3",m),children:[(0,t.jsx)(eO.N,{children:d&&(0,t.jsxs)(X.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"flex items-center gap-2 rounded-lg bg-secondary/50 dark:bg-gray-700/50 p-2",children:[(0,t.jsx)("div",{className:"w-1 self-stretch bg-accent-blue rounded-full"}),(0,t.jsxs)("div",{className:"flex-1 text-sm text-muted-foreground dark:text-gray-300 truncate",children:[o?"Editing message":"Replying to",": ",d]}),(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"h-6 w-6 rounded-full dark:text-gray-300 dark:hover:bg-gray-600",onClick:c,children:[(0,t.jsx)(i.A,{className:"h-4 w-4"}),(0,t.jsxs)("span",{className:"sr-only",children:["Cancel ",o?"edit":"reply"]})]})]})}),x&&(0,t.jsx)(e1,{onStop:e=>{g(!1),e&&s&&s(e)},onCancel:()=>g(!1)}),v&&(0,t.jsx)(e2,{onFileUpload:(e,a,s)=>{n&&n(e,a,s),N(!1)},onCancel:()=>N(!1),acceptedTypes:"image"===w?"image/*":"video"===w?"video/*":"image/*,video/*,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,text/plain"}),(0,t.jsx)(eO.N,{children:f&&(0,t.jsxs)(X.P.div,{ref:F,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.2},className:"flex flex-col p-4 bg-glossy-white dark:bg-gray-800 rounded-lg border border-light-gray/50 dark:border-gray-700 shadow-glossy absolute bottom-[calc(100%_-_8px)] left-2 right-2 sm:left-auto sm:w-[320px] z-10",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("h3",{className:"text-sm font-medium dark:text-white",children:"Attach files"}),(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"h-6 w-6 rounded-full dark:text-white dark:hover:bg-gray-700",onClick:()=>b(!1),children:[(0,t.jsx)(i.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]}),(0,t.jsx)("div",{className:"space-y-3",children:G.map(e=>(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)("h4",{className:"text-xs font-medium text-muted-foreground dark:text-gray-400 px-1",children:e.name}),(0,t.jsx)("div",{className:"grid grid-cols-4 gap-1.5",children:e.items.map(e=>(0,t.jsx)(e3,{icon:e.icon,label:e.label,onClick:e.onClick},e.id))})]},e.id))}),(0,t.jsx)("div",{className:"mt-3 text-xs text-muted-foreground dark:text-gray-400",children:"Drag and drop files here or click an option to select"})]})}),(0,t.jsx)(eO.N,{children:p&&(0,t.jsxs)(X.P.div,{ref:I,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"absolute bottom-[calc(100%_-_8px)] right-2 sm:right-12 z-10 w-64 bg-glossy-white dark:bg-gray-800 rounded-lg border border-light-gray/50 dark:border-gray-700 shadow-glossy p-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("h3",{className:"text-sm font-medium dark:text-white",children:"Emojis"}),(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"h-6 w-6 rounded-full dark:text-white dark:hover:bg-gray-700",onClick:()=>j(!1),children:[(0,t.jsx)(i.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]}),(0,t.jsx)("div",{className:"flex border-b border-light-gray/50 dark:border-gray-700 mb-2",children:O.map(e=>(0,t.jsx)("button",{className:(0,l.cn)("flex-1 p-2 text-xs transition-colors",L===e.id?"border-b-2 border-accent-blue text-accent-blue":"text-muted-foreground hover:text-foreground dark:text-gray-400 dark:hover:text-white"),onClick:()=>T(e.id),children:(0,t.jsx)("div",{className:"flex justify-center",children:e.icon})},e.id))}),O.map(e=>(0,t.jsx)("div",{className:(0,l.cn)("grid grid-cols-6 gap-1",L!==e.id&&"hidden"),children:e.emojis.map(e=>(0,t.jsx)("button",{className:"h-8 w-8 flex items-center justify-center rounded hover:bg-secondary dark:hover:bg-gray-700 text-lg transition-colors",onClick:()=>Y(e),children:e},e))},e.id))]})}),(0,t.jsxs)("div",{className:"flex items-end gap-1.5",children:[(0,t.jsx)(k,{delayDuration:300,children:(0,t.jsxs)(C,{children:[(0,t.jsx)(A,{asChild:!0,children:(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:(0,l.cn)("h-10 w-10 rounded-full glossy-icon-button dark:bg-gray-700 dark:border-gray-600 dark:hover:bg-gray-600 transition-all duration-200 mr-0.5",f&&"bg-accent-blue/10 text-accent-blue border-accent-blue/50 dark:bg-accent-blue/20 rotate-45"),onClick:()=>{b(!f),p&&j(!1),P.current&&(clearTimeout(P.current),P.current=null)},children:[(0,t.jsx)(eZ.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"sr-only",children:"Attach files"})]})}),(0,t.jsx)(S,{children:"Attach files"})]})}),(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(E,{ref:R,placeholder:o?"Edit your message...":"Type a message...",className:(0,l.cn)("resize-none rounded-xl border border-light-gray bg-glossy-white py-2 pr-12 shadow-glossy focus-visible:ring-1 focus-visible:ring-accent-blue","dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:placeholder-gray-400","min-h-[40px] max-h-[120px] transition-height duration-200"),value:u,onChange:e=>h(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),V())},style:{height:"".concat(z,"px")}}),(0,t.jsx)("div",{className:"absolute bottom-1 right-1",children:(0,t.jsx)(k,{delayDuration:300,children:(0,t.jsxs)(C,{children:[(0,t.jsx)(A,{asChild:!0,children:(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:(0,l.cn)("h-8 w-8 rounded-full text-muted-foreground hover:text-accent-blue dark:text-gray-400 dark:hover:text-accent-blue dark:hover:bg-gray-700 transition-all duration-200",p&&"text-accent-blue bg-accent-blue/10 dark:bg-accent-blue/20"),onClick:()=>{j(!p),f&&b(!1)},children:[(0,t.jsx)(e_.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"sr-only",children:"Add emoji"})]})}),(0,t.jsx)(S,{children:"Add emoji"})]})})})]}),(0,t.jsx)(k,{delayDuration:300,children:(0,t.jsxs)(C,{children:[(0,t.jsx)(A,{asChild:!0,children:(0,t.jsxs)(y,{className:(0,l.cn)("flex-shrink-0 rounded-full bg-blue-gradient text-white h-10 w-10 transition-all duration-300","hover:shadow-blue-glow hover:scale-105 active:scale-95"),size:"icon",onClick:u.trim()?V:()=>{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){U({title:"Microphone not supported",description:"Your browser doesn't support microphone access",variant:"destructive"});return}g(!0)},children:[u.trim()?(0,t.jsx)(eQ.A,{className:"h-5 w-5"}):(0,t.jsx)(eK.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"sr-only",children:u.trim()?o?"Save changes":"Send message":"Record voice message"})]})}),(0,t.jsx)(S,{children:u.trim()?o?"Save changes":"Send message":"Record voice message"})]})})]})]})}function e3(e){let{icon:a,label:s,onClick:r}=e;return(0,t.jsxs)("button",{className:"flex flex-col items-center justify-center p-1.5 rounded-lg bg-secondary/30 dark:bg-gray-700/30 hover:bg-accent-blue/10 dark:hover:bg-accent-blue/20 transition-colors",onClick:r,children:[(0,t.jsx)("div",{className:"h-8 w-8 rounded-full bg-white dark:bg-gray-800 flex items-center justify-center mb-1 text-accent-blue shadow-sm",children:a}),(0,t.jsx)("span",{className:"text-xs font-medium dark:text-white truncate w-full text-center",children:s})]})}function e7(){return(0,t.jsxs)("div",{className:"flex items-center space-x-1 p-2 rounded-full bg-secondary/50 dark:bg-secondary/20 w-fit",children:[(0,t.jsx)("span",{className:"typing-dot animate-typing-dot",style:{animationDelay:"0ms"}}),(0,t.jsx)("span",{className:"typing-dot animate-typing-dot",style:{animationDelay:"200ms"}}),(0,t.jsx)("span",{className:"typing-dot animate-typing-dot",style:{animationDelay:"400ms"}})]})}var e8=s(7993),e6=s(3673);function e9(e){let{contact:a,callType:s,onEndCall:n}=e,[i,d]=(0,r.useState)(!1),[c,o]=(0,r.useState)(!0),[m,u]=(0,r.useState)("video"===s),[h,x]=(0,r.useState)(0),[p,j]=(0,r.useState)("connecting");return(0,r.useEffect)(()=>{let e=setTimeout(()=>{j("ringing");let e=setTimeout(()=>{j("connected")},2e3);return()=>clearTimeout(e)},1500);return()=>clearTimeout(e)},[]),(0,r.useEffect)(()=>{let e=null;return"connected"===p&&(e=setInterval(()=>{x(e=>e+1)},1e3)),()=>{e&&clearInterval(e)}},[p]),(0,t.jsxs)("div",{className:"fixed inset-0 z-[55] bg-gradient-to-b from-accent-blue/10 to-background backdrop-blur-md flex flex-col items-center justify-between p-6 animate-fade-slide-in",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center mt-10",children:[(0,t.jsxs)("div",{className:"text-lg font-medium text-center",children:["connecting"===p&&"Connecting...","ringing"===p&&"Ringing...","connected"===p&&(e=>{let a=Math.floor(e/3600),s=Math.floor(e%3600/60),t=e%60;return a>0?"".concat(a,":").concat(s<10?"0":"").concat(s,":").concat(t<10?"0":"").concat(t):"".concat(s,":").concat(t<10?"0":"").concat(t)})(h)]}),(0,t.jsx)("h2",{className:"text-2xl font-bold mt-2",children:a.name})]}),(0,t.jsx)("div",{className:"flex-1 flex items-center justify-center w-full",children:"video"===s&&m?(0,t.jsxs)("div",{className:"relative w-full max-w-md aspect-video bg-secondary rounded-2xl overflow-hidden shadow-glossy",children:[(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-muted-foreground",children:"Video feed"})}),(0,t.jsx)("div",{className:"absolute bottom-4 right-4 w-1/4 aspect-video bg-background rounded-lg overflow-hidden border border-light-gray shadow-glossy",children:(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"You"})})})]}):(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsxs)(g,{className:"h-32 w-32 ring-4 ring-accent-blue/20 animate-pulse-glossy",children:[(0,t.jsx)(f,{src:a.avatar,alt:a.name}),(0,t.jsx)(b,{className:"text-4xl",children:a.name.charAt(0)})]}),(0,t.jsxs)("div",{className:"mt-6 flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"relative flex h-3 w-3",children:[(0,t.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-accent-blue opacity-75"}),(0,t.jsx)("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-accent-blue"})]}),(0,t.jsx)("span",{className:"text-muted-foreground",children:"connected"===p?"On call":"Connecting..."})]})]})}),(0,t.jsxs)("div",{className:"flex flex-col items-center gap-8 mb-10",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(y,{variant:"outline",size:"icon",className:(0,l.cn)("h-12 w-12 rounded-full glossy-icon-button",i&&"bg-destructive/10 text-destructive border-destructive/50"),onClick:()=>d(!i),children:[i?(0,t.jsx)(e8.A,{className:"h-5 w-5"}):(0,t.jsx)(eK.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"sr-only",children:i?"Unmute":"Mute"})]}),(0,t.jsxs)(y,{variant:"destructive",size:"icon",className:"h-16 w-16 rounded-full shadow-glossy animate-pulse-glossy",onClick:n,children:[(0,t.jsx)(ea.A,{className:"h-8 w-8 rotate-135"}),(0,t.jsx)("span",{className:"sr-only",children:"End call"})]}),"video"===s?(0,t.jsxs)(y,{variant:"outline",size:"icon",className:(0,l.cn)("h-12 w-12 rounded-full glossy-icon-button",!m&&"bg-destructive/10 text-destructive border-destructive/50"),onClick:()=>u(!m),children:[m?(0,t.jsx)(es.A,{className:"h-5 w-5"}):(0,t.jsx)(e6.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"sr-only",children:m?"Turn off video":"Turn on video"})]}):(0,t.jsxs)(y,{variant:"outline",size:"icon",className:(0,l.cn)("h-12 w-12 rounded-full glossy-icon-button",!c&&"bg-destructive/10 text-destructive border-destructive/50"),onClick:()=>o(!c),children:[c?(0,t.jsx)(ez.A,{className:"h-5 w-5"}):(0,t.jsx)(eM.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"sr-only",children:c?"Turn off speaker":"Turn on speaker"})]})]}),(0,t.jsxs)(eb,{children:[(0,t.jsx)(ep,{asChild:!0,children:(0,t.jsxs)(y,{variant:"ghost",size:"sm",className:"text-muted-foreground",children:[(0,t.jsx)(et.A,{className:"h-4 w-4 mr-1"}),"More options"]})}),(0,t.jsxs)(ej,{align:"center",children:[(0,t.jsx)(ev,{children:"Add participant"}),(0,t.jsx)(ev,{children:"Switch to video call"}),(0,t.jsx)(ev,{children:"Share screen"}),(0,t.jsx)(ev,{className:"text-destructive",children:"Report issue"})]})]})]})]})}var ae=s(5500),aa=s(3585),as=s(5842);let at=as.bL,ar=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(as.B8,{ref:a,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...r})});ar.displayName=as.B8.displayName;let al=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(as.l9,{ref:a,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...r})});al.displayName=as.l9.displayName;let an=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(as.UC,{ref:a,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...r})});an.displayName=as.UC.displayName;var ai=s(7622);let ad=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(ai.bL,{className:(0,l.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...r,ref:a,children:(0,t.jsx)(ai.zi,{className:(0,l.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});ad.displayName=ai.bL.displayName;var ac=s(2135);function ao(e){let{contact:a,onClose:s,onStartCall:n}=e,[d,c]=(0,r.useState)(!1),[o,m]=(0,r.useState)(!1),u=()=>{c(!d),ac.oR.success(d?"Notifications unmuted":"Notifications muted")},h=()=>{m(!o),ac.oR.success(o?"Contact unblocked":"Contact blocked")};return(0,t.jsx)("div",{className:"fixed inset-0 z-[60] bg-background/80 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-slide-in",children:(0,t.jsxs)("div",{className:"bg-glossy-white dark:bg-gray-800 rounded-2xl shadow-glossy border border-light-gray/50 dark:border-gray-700 w-full max-w-md max-h-[90vh] overflow-hidden flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-light-gray/50 dark:border-gray-700",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold dark:text-white",children:"Profile"}),(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"rounded-full dark:text-white dark:hover:bg-gray-700",onClick:s,children:[(0,t.jsx)(i.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center p-6 border-b border-light-gray/50 dark:border-gray-700",children:[(0,t.jsxs)(g,{className:"h-24 w-24 ring-4 ring-accent-blue/20",children:[(0,t.jsx)(f,{src:a.avatar,alt:a.name}),(0,t.jsx)(b,{className:"text-3xl",children:a.name.charAt(0)})]}),(0,t.jsx)("h3",{className:"text-2xl font-bold mt-4 dark:text-white",children:a.name}),(0,t.jsxs)("div",{className:"flex items-center mt-2",children:[(0,t.jsx)("span",{className:(0,l.cn)("h-2.5 w-2.5 rounded-full mr-2","online"===a.status&&"bg-green-500","away"===a.status&&"bg-accent-blue","offline"===a.status&&"bg-muted")}),(0,t.jsx)("span",{className:"text-muted-foreground dark:text-gray-300",children:"online"===a.status?"Online":"away"===a.status?"Away":"Last seen ".concat(a.lastActive||"recently")})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 mt-6",children:[(0,t.jsxs)(y,{variant:"outline",size:"icon",className:"h-10 w-10 rounded-full glossy-icon-button dark:bg-gray-700 dark:border-gray-600 dark:hover:bg-gray-600",onClick:()=>n("audio"),children:[(0,t.jsx)(ea.A,{className:"h-5 w-5 text-accent-blue"}),(0,t.jsx)("span",{className:"sr-only",children:"Call"})]}),(0,t.jsxs)(y,{variant:"outline",size:"icon",className:"h-10 w-10 rounded-full glossy-icon-button dark:bg-gray-700 dark:border-gray-600 dark:hover:bg-gray-600",onClick:()=>n("video"),children:[(0,t.jsx)(es.A,{className:"h-5 w-5 text-accent-blue"}),(0,t.jsx)("span",{className:"sr-only",children:"Video call"})]}),(0,t.jsxs)(y,{variant:"outline",size:"icon",className:(0,l.cn)("h-10 w-10 rounded-full glossy-icon-button dark:bg-gray-700 dark:border-gray-600 dark:hover:bg-gray-600",d&&"bg-destructive/10 text-destructive border-destructive/50 dark:bg-destructive/20"),onClick:u,children:[d?(0,t.jsx)(ee.A,{className:"h-5 w-5"}):(0,t.jsx)(el.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"sr-only",children:d?"Unmute":"Mute"})]}),(0,t.jsxs)(y,{variant:"outline",size:"icon",className:(0,l.cn)("h-10 w-10 rounded-full glossy-icon-button dark:bg-gray-700 dark:border-gray-600 dark:hover:bg-gray-600",o&&"bg-destructive/10 text-destructive border-destructive/50 dark:bg-destructive/20"),onClick:h,children:[(0,t.jsx)(ae.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"sr-only",children:o?"Unblock":"Block"})]})]})]}),(0,t.jsxs)(at,{defaultValue:"info",className:"flex-1 overflow-hidden",children:[(0,t.jsxs)(ar,{className:"grid grid-cols-3 px-4 py-2",children:[(0,t.jsx)(al,{value:"info",children:"Info"}),(0,t.jsx)(al,{value:"media",children:"Media"}),(0,t.jsx)(al,{value:"settings",children:"Settings"})]}),(0,t.jsx)(an,{value:"info",className:"p-4 overflow-y-auto",children:(0,t.jsxs)("div",{className:"space-y-4",children:[a.email&&(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-md hover:bg-secondary/10 dark:hover:bg-gray-700/50",children:[(0,t.jsx)("div",{className:"h-10 w-10 rounded-full bg-accent-blue/10 dark:bg-accent-blue/20 flex items-center justify-center",children:(0,t.jsx)(aa.A,{className:"h-5 w-5 text-accent-blue"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground dark:text-gray-400",children:"Email"}),(0,t.jsx)("p",{className:"font-medium dark:text-white",children:a.email})]})]}),a.phone&&(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-md hover:bg-secondary/10 dark:hover:bg-gray-700/50",children:[(0,t.jsx)("div",{className:"h-10 w-10 rounded-full bg-accent-blue/10 dark:bg-accent-blue/20 flex items-center justify-center",children:(0,t.jsx)(ea.A,{className:"h-5 w-5 text-accent-blue"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground dark:text-gray-400",children:"Phone"}),(0,t.jsx)("p",{className:"font-medium dark:text-white",children:a.phone})]})]}),a.location&&(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-md hover:bg-secondary/10 dark:hover:bg-gray-700/50",children:[(0,t.jsx)("div",{className:"h-10 w-10 rounded-full bg-accent-blue/10 dark:bg-accent-blue/20 flex items-center justify-center",children:(0,t.jsx)(eJ.A,{className:"h-5 w-5 text-accent-blue"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground dark:text-gray-400",children:"Location"}),(0,t.jsx)("p",{className:"font-medium dark:text-white",children:a.location})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-md hover:bg-secondary/10 dark:hover:bg-gray-700/50",children:[(0,t.jsx)("div",{className:"h-10 w-10 rounded-full bg-accent-blue/10 dark:bg-accent-blue/20 flex items-center justify-center",children:(0,t.jsx)(eX.A,{className:"h-5 w-5 text-accent-blue"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground dark:text-gray-400",children:"Connected since"}),(0,t.jsx)("p",{className:"font-medium dark:text-white",children:"January 15, 2023"})]})]})]})}),(0,t.jsx)(an,{value:"media",className:"overflow-y-auto",children:(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("h3",{className:"font-medium mb-3 dark:text-white",children:"Shared Media"}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[{type:"image",name:"Photo 1.jpg",date:"Today"},{type:"image",name:"Photo 2.jpg",date:"Yesterday"},{type:"file",name:"Document.pdf",date:"2 days ago"},{type:"image",name:"Photo 3.jpg",date:"Last week"}].map((e,a)=>(0,t.jsxs)("div",{className:"aspect-square rounded-lg overflow-hidden border border-light-gray/50 dark:border-gray-700 relative group",children:[(0,t.jsx)("div",{className:(0,l.cn)("absolute inset-0 flex items-center justify-center","image"===e.type?"bg-accent-blue/10 dark:bg-accent-blue/20":"bg-secondary dark:bg-gray-700"),children:"image"===e.type?(0,t.jsx)(eE.A,{className:"h-8 w-8 text-accent-blue"}):(0,t.jsx)(eT.A,{className:"h-8 w-8 text-muted-foreground dark:text-gray-400"})}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:(0,t.jsx)("p",{className:"text-white text-xs text-center p-2",children:e.name})})]},a))})]})}),(0,t.jsx)(an,{value:"settings",className:"p-4 overflow-y-auto",children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-md hover:bg-secondary/10 dark:hover:bg-gray-700/50",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(F,{htmlFor:"mute-notifications",className:"font-medium dark:text-white",children:"Mute notifications"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground dark:text-gray-400",children:"Stop receiving notifications from this contact"})]}),(0,t.jsx)(ad,{id:"mute-notifications",checked:d,onCheckedChange:u})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-md hover:bg-secondary/10 dark:hover:bg-gray-700/50",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(F,{htmlFor:"block-contact",className:"font-medium dark:text-white",children:"Block contact"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground dark:text-gray-400",children:"Prevent this contact from messaging you"})]}),(0,t.jsx)(ad,{id:"block-contact",checked:o,onCheckedChange:h})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-md hover:bg-secondary/10 dark:hover:bg-gray-700/50",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(F,{htmlFor:"media-auto-download",className:"font-medium dark:text-white",children:"Auto-download media"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground dark:text-gray-400",children:"Automatically download media from this contact"})]}),(0,t.jsx)(ad,{id:"media-auto-download",defaultChecked:!0})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-md hover:bg-secondary/10 dark:hover:bg-gray-700/50",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(F,{htmlFor:"encryption",className:"font-medium dark:text-white",children:"End-to-end encryption"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground dark:text-gray-400",children:"Messages are encrypted end-to-end"})]}),(0,t.jsx)("div",{className:"text-xs bg-green-500/10 text-green-500 px-2 py-1 rounded-full",children:"Active"})]})]})})]})]})})}let am=[{id:"1",content:"Hi there! How's your day going?",timestamp:"10:30 AM",sender:{name:"Olivia Martinez",avatar:"/placeholder.svg?height=40&width=40"},isSent:!1},{id:"2",content:"Pretty good, thanks for asking! Just finishing up some work.",timestamp:"10:32 AM",sender:{name:"You",avatar:"/placeholder.svg?height=40&width=40"},isSent:!0,isRead:!0},{id:"3",content:"That's great! Are we still on for coffee tomorrow?",timestamp:"10:33 AM",sender:{name:"Olivia Martinez",avatar:"/placeholder.svg?height=40&width=40"},isSent:!1},{id:"4",content:"Looking forward to it. How about 2 PM at the usual place?",timestamp:"10:35 AM",sender:{name:"You",avatar:"/placeholder.svg?height=40&width=40"},isSent:!0,isRead:!0}];function au(e){let{contact:a,className:s,chatBackground:n="bg-1",onUpdateContact:d,onBackToList:c}=e,[o,m]=(0,r.useState)(am),[h,x]=(0,r.useState)(!1),[p,j]=(0,r.useState)(null),[v,N]=(0,r.useState)(!1),[w,M]=(0,r.useState)("audio"),[z,D]=(0,r.useState)(!1),[L,T]=(0,r.useState)(!1),[E,R]=(0,r.useState)(""),[P,F]=(0,r.useState)(!1),[I,O]=(0,r.useState)(!1),[G,U]=(0,r.useState)([]),{toast:B}=(0,eI.d)(),V=(0,r.useRef)(null),Y=(0,r.useRef)(null),_=(0,r.useRef)(null);eB();let q=()=>{var e;null===(e=V.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,r.useEffect)(()=>{a.unreadCount&&a.unreadCount>0&&d&&d(a.id,{unreadCount:0})},[a.id,a.unreadCount,d]),(0,r.useEffect)(()=>{q()},[o]),(0,r.useEffect)(()=>{L&&Y.current&&Y.current.focus()},[L]);let H=e=>{let s={id:"msg-".concat(Date.now()),content:e,timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),sender:{name:"You",avatar:"/placeholder.svg?height=40&width=40"},isSent:!0,isDelivered:!1,isRead:!1};m([...o,s]),j(null),setTimeout(()=>{m(e=>e.map(e=>e.id===s.id?{...e,isDelivered:!0}:e)),setTimeout(()=>{x(!0),setTimeout(()=>{x(!1);let e={id:"msg-".concat(Date.now()+1),content:"That sounds perfect! I'll see you tomorrow at 2 PM.",timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),sender:{name:a.name,avatar:a.avatar},isSent:!1};m(a=>[...a,e]),setTimeout(()=>{m(e=>e.map(e=>e.isSent&&!e.isRead?{...e,isRead:!0}:e))},1e3)},2e3)},1e3)},500)},J=e=>{j(e)},W=e=>{M(e),N(!0)},X=()=>{T(!L),L?R(""):setTimeout(()=>{var e;null===(e=Y.current)||void 0===e||e.focus()},100)},K=(e,a)=>{m(s=>s.map(s=>{if(s.id===e){let e=s.reactions||[];return e.find(e=>e.emoji===a)?{...s,reactions:e.filter(e=>e.emoji!==a)}:{...s,reactions:[...e,{emoji:a,count:1,users:["current-user"]}]}}return s}))},Z=E?o.filter(e=>e.content.toLowerCase().includes(E.toLowerCase())):o;return(0,t.jsxs)("div",{className:(0,l.cn)("flex h-full flex-col",s),children:[v&&(0,t.jsx)("div",{className:"z-[55]",children:(0,t.jsx)(e9,{contact:a,callType:w,onEndCall:()=>{N(!1)}})}),z&&(0,t.jsx)(ao,{contact:{...a,email:a.email||"olivia.martinez@example.com",phone:a.phone||"+1 (555) 123-4567",location:a.location||"San Francisco, CA"},onClose:()=>D(!1),onStartCall:W}),(0,t.jsxs)("div",{className:"flex h-16 items-center justify-between border-b border-light-gray/50 dark:border-gray-700 px-2 sm:px-4 bg-glossy-white/80 backdrop-blur-md shadow-glossy dark:bg-gray-800",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[c&&(0,t.jsx)(y,{variant:"ghost",size:"icon",className:"h-10 w-10 mr-1 flex-shrink-0 rounded-full glossy-icon-button dark:bg-gray-700 dark:border-gray-600 dark:hover:bg-gray-600",onClick:c,"aria-label":"Back to contacts",children:(0,t.jsx)(Q.A,{className:"h-5 w-5 dark:text-white"})}),(0,t.jsxs)("button",{className:"flex items-center gap-3 max-w-[200px] sm:max-w-none",onClick:()=>D(!0),"aria-label":"View profile",children:[(0,t.jsxs)(g,{className:"profile-picture h-10 w-10 flex-shrink-0",children:[(0,t.jsx)(f,{src:a.avatar,alt:a.name}),(0,t.jsx)(b,{children:a.name.charAt(0)}),(0,t.jsx)("span",{className:(0,l.cn)("absolute bottom-0 right-0 h-2.5 w-2.5 rounded-full border-2 border-background dark:border-gray-800","online"===a.status&&"bg-green-500","away"===a.status&&"bg-accent-blue","offline"===a.status&&"bg-muted")})]}),(0,t.jsxs)("div",{className:"overflow-hidden",children:[(0,t.jsxs)("div",{className:"font-medium dark:text-white flex items-center gap-2 truncate",children:[(0,t.jsx)("span",{className:"truncate",children:a.name}),I&&(0,t.jsx)($.A,{className:"h-3.5 w-3.5 fill-yellow-400 text-yellow-400 flex-shrink-0"}),P&&(0,t.jsx)(ee.A,{className:"h-3.5 w-3.5 text-muted-foreground flex-shrink-0"})]}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground dark:text-gray-400 truncate",children:"online"===a.status?"Online":"away"===a.status?"Away":"Offline"})]})]})]}),(0,t.jsx)("div",{className:"flex items-center gap-1",children:(0,t.jsxs)(k,{delayDuration:300,children:[L?(0,t.jsxs)("div",{className:"relative w-full max-w-[150px] sm:max-w-[200px] mr-1 animate-soft-bounce",children:[(0,t.jsx)("input",{ref:Y,type:"search",placeholder:"Search in chat...",className:"w-full h-8 rounded-full border border-light-gray bg-glossy-white dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400 pl-8 pr-2 text-sm focus:outline-none focus:ring-1 focus:ring-accent-blue",value:E,onChange:e=>R(e.target.value)}),(0,t.jsx)(u.A,{className:"absolute left-2 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground dark:text-gray-400"}),(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 h-6 w-6 -translate-y-1/2 rounded-full dark:hover:bg-gray-600",onClick:X,children:[(0,t.jsx)(i.A,{className:"h-3 w-3 dark:text-white"}),(0,t.jsx)("span",{className:"sr-only",children:"Close search"})]})]}):(0,t.jsxs)(C,{children:[(0,t.jsx)(A,{asChild:!0,children:(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"glossy-icon-button dark:text-white dark:border-gray-700 dark:hover:bg-gray-700 h-9 w-9",onClick:X,children:[(0,t.jsx)(u.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"sr-only",children:"Search conversation"})]})}),(0,t.jsx)(S,{children:"Search conversation"})]}),(0,t.jsxs)(C,{children:[(0,t.jsx)(A,{asChild:!0,children:(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"glossy-icon-button dark:text-white dark:border-gray-700 dark:hover:bg-gray-700 h-9 w-9 hidden sm:flex",onClick:()=>W("audio"),children:[(0,t.jsx)(ea.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"sr-only",children:"Call"})]})}),(0,t.jsx)(S,{children:"Call"})]}),(0,t.jsxs)(C,{children:[(0,t.jsx)(A,{asChild:!0,children:(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"glossy-icon-button dark:text-white dark:border-gray-700 dark:hover:bg-gray-700 h-9 w-9 hidden sm:flex",onClick:()=>W("video"),children:[(0,t.jsx)(es.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"sr-only",children:"Video call"})]})}),(0,t.jsx)(S,{children:"Video call"})]}),(0,t.jsxs)(eb,{children:[(0,t.jsx)(ep,{asChild:!0,children:(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"glossy-icon-button dark:text-white dark:border-gray-700 dark:hover:bg-gray-700 h-9 w-9",children:[(0,t.jsx)(et.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"sr-only",children:"More options"})]})}),(0,t.jsxs)(ej,{align:"end",className:"w-[200px] dark:bg-gray-800 dark:border-gray-700",children:[(0,t.jsxs)(ev,{onClick:()=>D(!0),className:"dark:text-white dark:focus:bg-gray-700",children:[(0,t.jsx)(er.A,{className:"mr-2 h-4 w-4"}),"View profile"]}),(0,t.jsxs)(ev,{className:"sm:hidden dark:text-white dark:focus:bg-gray-700",onClick:()=>W("audio"),children:[(0,t.jsx)(ea.A,{className:"mr-2 h-4 w-4"}),"Call"]}),(0,t.jsxs)(ev,{className:"sm:hidden dark:text-white dark:focus:bg-gray-700",onClick:()=>W("video"),children:[(0,t.jsx)(es.A,{className:"mr-2 h-4 w-4"}),"Video call"]}),(0,t.jsxs)(ev,{onClick:()=>{O(!I),B({title:I?"Removed from favorites":"Added to favorites",description:I?"".concat(a.name," has been removed from your favorites"):"".concat(a.name," has been added to your favorites")})},className:"dark:text-white dark:focus:bg-gray-700",children:[(0,t.jsx)($.A,{className:(0,l.cn)("mr-2 h-4 w-4",I&&"fill-yellow-400 text-yellow-400")}),I?"Remove from favorites":"Add to favorites"]}),(0,t.jsx)(ev,{onClick:()=>{F(!P),B({title:P?"Notifications unmuted":"Notifications muted",description:P?"You will now receive notifications from ".concat(a.name):"You will no longer receive notifications from ".concat(a.name)})},className:"dark:text-white dark:focus:bg-gray-700",children:P?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(el.A,{className:"mr-2 h-4 w-4"}),"Unmute notifications"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ee.A,{className:"mr-2 h-4 w-4"}),"Mute notifications"]})})]})]})]})})]}),(0,t.jsx)("div",{ref:_,className:(0,l.cn)("flex-1 overflow-y-auto p-2 sm:p-4 scrollbar-thin scrollbar-thumb-light-gray/50 scrollbar-track-transparent dark:scrollbar-thumb-gray-700",(()=>{switch(n){case"bg-1":default:return"bg-off-white/50 dark:bg-gray-900";case"bg-2":return"bg-blue-50 dark:bg-blue-950/30";case"bg-3":return"bg-green-50 dark:bg-green-950/30";case"bg-4":return"bg-purple-50 dark:bg-purple-950/30";case"bg-5":return"bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-950/30 dark:to-purple-950/30";case"bg-6":return"bg-gradient-to-br from-green-50 to-blue-50 dark:from-green-950/30 dark:to-blue-950/30";case"bg-7":return"bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-950/30 dark:to-red-950/30";case"bg-8":return"bg-gradient-to-br from-gray-50 to-slate-100 dark:from-gray-900 dark:to-slate-950"}})()),children:(0,t.jsxs)("div",{className:"space-y-4 max-w-3xl mx-auto",children:[Z.map((e,a)=>(0,t.jsx)(eV,{content:e.content,timestamp:e.timestamp,sender:e.sender,isSent:e.isSent,isRead:e.isRead,isDelivered:e.isDelivered,reactions:e.reactions||[],className:"delay-".concat(100*a),onReply:J,onReaction:a=>K(e.id,a),currentUserId:"current-user",media:e.media},e.id)),h&&(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsxs)(g,{className:"h-8 w-8 flex-shrink-0",children:[(0,t.jsx)(f,{src:a.avatar,alt:a.name}),(0,t.jsx)(b,{children:a.name.charAt(0)})]}),(0,t.jsx)(e7,{})]}),(0,t.jsx)("div",{ref:V})]})}),(0,t.jsx)("div",{className:"border-t border-light-gray/50 dark:border-gray-700 bg-glossy-white/80 backdrop-blur-md shadow-glossy dark:bg-gray-800",children:(0,t.jsx)(e5,{onSendMessage:H,onSendVoice:e=>{H("\uD83C\uDFA4 Voice message (0:07)")},onSendMedia:(e,a,s)=>{let t=(0,l.v)(e.size),r={id:"msg-".concat(Date.now()),timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),sender:{name:"You",avatar:"/placeholder.svg?height=40&width=40"},isSent:!0,isDelivered:!1,isRead:!1,media:{type:a,url:s,fileName:e.name,fileSize:t}};m([...o,r]),U([...G,{type:a,url:s,fileName:e.name,fileSize:t}]),setTimeout(()=>{m(e=>e.map(e=>e.id===r.id?{...e,isDelivered:!0}:e)),setTimeout(()=>{m(e=>e.map(e=>e.isSent&&!e.isRead?{...e,isRead:!0}:e))},2e3),B({title:"Media sent",description:"Media sent successfully"})},500)},replyingTo:p,onCancelReply:()=>j(null)})})]})}var ah=s(249),ax=s(1860),ag=s(1441),af=s(2516),ab=s(2047);let ap=r.forwardRef((e,a)=>{let{className:s,orientation:r="horizontal",decorative:n=!0,...i}=e;return(0,t.jsx)(ab.b,{ref:a,decorative:n,orientation:r,className:(0,l.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",s),...i})});function aj(e){let{members:a,count:s,limit:r=3,className:n,onClick:i}=e,d=a.slice(0,r),c=(s||a.length)-d.length;return(0,t.jsxs)("div",{className:(0,l.cn)("flex items-center -space-x-2",n,i&&"cursor-pointer"),onClick:i,children:[d.map((e,a)=>(0,t.jsxs)(g,{className:(0,l.cn)("h-8 w-8 border-2 border-background",a>0&&"-ml-2"),children:[(0,t.jsx)(f,{src:e.avatar,alt:e.name}),(0,t.jsx)(b,{children:e.name.charAt(0)})]},e.id)),c>0&&(0,t.jsxs)("div",{className:"h-8 w-8 rounded-full bg-secondary flex items-center justify-center text-xs font-medium border-2 border-background -ml-2",children:["+",c]})]})}function av(e){let{group:a,currentUser:s,pinnedMessages:n,onClose:d,onMemberRoleChange:c,onMemberRemove:o}=e,[m,h]=(0,r.useState)(""),[x,p]=(0,r.useState)(!1),[j,v]=(0,r.useState)(!1),[w,k]=(0,r.useState)(a.name),[C,A]=(0,r.useState)(a.description||""),[S,M]=(0,r.useState)(!1),z="admin"===s.role,D="moderator"===s.role||z;a.members.filter(e=>e.name.toLowerCase().includes(m.toLowerCase()));let L=a.members.filter(e=>"admin"===e.role),T=a.members.filter(e=>"moderator"===e.role),E=a.members.filter(e=>"member"===e.role),{toast:R}=(0,eI.d)(),P=(e,s)=>{var t;let r=(null===(t=a.members.find(a=>a.id===e))||void 0===t?void 0:t.name)||"Unknown member";c&&(c(e,s),R({title:"Role updated",description:"".concat(r,"'s role changed to ").concat(s)}))},I=e=>{var s;let t=(null===(s=a.members.find(a=>a.id===e))||void 0===s?void 0:s.name)||"Unknown member";o&&(o(e),R({title:"Member removed",description:"".concat(t," removed from the group")}))},U=e=>{R({title:"Invitation sent",description:"Invitation sent to ".concat(e)}),M(!1)};return(0,t.jsxs)("div",{className:"fixed inset-y-0 right-0 z-40 w-80 md:w-96 bg-glossy-white dark:bg-gray-800 border-l border-light-gray/50 dark:border-gray-700 shadow-glossy flex flex-col animate-fade-slide-in",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-light-gray/50 dark:border-gray-700",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold dark:text-white",children:"Group Info"}),(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"rounded-full dark:text-white dark:hover:bg-gray-700",onClick:d,children:[(0,t.jsx)(i.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,t.jsxs)(at,{defaultValue:"about",className:"w-full",children:[(0,t.jsxs)(ar,{className:"grid grid-cols-3 p-1 mx-4 mt-4",children:[(0,t.jsx)(al,{value:"about",children:"About"}),(0,t.jsx)(al,{value:"members",children:"Members"}),(0,t.jsx)(al,{value:"media",children:"Media"})]}),(0,t.jsxs)(an,{value:"about",className:"p-4 space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsxs)(g,{className:"h-24 w-24 mb-4",children:[(0,t.jsx)(f,{src:a.avatar,alt:a.name}),(0,t.jsx)(b,{className:"text-2xl dark:text-white",children:a.name.charAt(0)})]}),j?(0,t.jsxs)("div",{className:"w-full space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(F,{htmlFor:"group-name",className:"dark:text-white",children:"Group Name"}),(0,t.jsx)(N,{id:"group-name",value:w,onChange:e=>k(e.target.value),className:"mt-1 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(F,{htmlFor:"group-description",className:"dark:text-white",children:"Description"}),(0,t.jsx)(N,{id:"group-description",value:C,onChange:e=>A(e.target.value),className:"mt-1 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(y,{variant:"outline",className:"flex-1 dark:text-white dark:border-gray-600 dark:hover:bg-gray-700",onClick:()=>v(!1),children:"Cancel"}),(0,t.jsx)(y,{className:"flex-1",onClick:()=>{v(!1),R({title:"Group info updated",description:"Group info updated successfully"})},children:"Save"})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h3",{className:"text-2xl font-bold dark:text-white",children:a.name}),a.description&&(0,t.jsx)("p",{className:"text-muted-foreground text-center mt-2 dark:text-gray-300",children:a.description}),z&&(0,t.jsxs)(y,{variant:"outline",size:"sm",className:"mt-4 dark:text-white dark:border-gray-600 dark:hover:bg-gray-700",onClick:()=>v(!0),children:[(0,t.jsx)(em.A,{className:"mr-2 h-4 w-4"}),"Edit Group Info"]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium dark:text-white",children:"Group ID"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground dark:text-gray-400",children:a.id})]}),(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"h-8 w-8 dark:text-white dark:hover:bg-gray-700",onClick:()=>{navigator.clipboard.writeText(a.id),R({title:"Group ID copied",description:"Group ID copied to clipboard"})},children:[(0,t.jsx)(ec.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Copy ID"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium dark:text-white",children:"Created by"}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground dark:text-gray-400",children:[a.createdBy," on ",a.createdAt]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium dark:text-white",children:"Members"}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground dark:text-gray-400",children:[a.members.length," members"]})]}),(0,t.jsx)(aj,{members:a.members.slice(0,3),count:a.members.length,onClick:()=>{var e;return null===(e=document.getElementById("members-tab"))||void 0===e?void 0:e.click()}})]}),(0,t.jsx)(ap,{className:"dark:bg-gray-700"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(F,{htmlFor:"mute-notifications",className:"font-medium dark:text-white",children:"Mute notifications"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground dark:text-gray-400",children:"Stop receiving notifications from this group"})]}),(0,t.jsx)(ad,{id:"mute-notifications",checked:x,onCheckedChange:e=>{p(e),R({title:e?"Notifications muted":"Notifications unmuted",description:e?"Notifications muted":"Notifications unmuted"})}})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(F,{htmlFor:"media-auto-download",className:"font-medium dark:text-white",children:"Auto-download media"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground dark:text-gray-400",children:"Automatically download media from this group"})]}),(0,t.jsx)(ad,{id:"media-auto-download",defaultChecked:!0})]})]}),(0,t.jsx)("div",{className:"pt-4",children:(0,t.jsxs)(y,{variant:"outline",className:"w-full dark:text-white dark:border-gray-600 dark:hover:bg-gray-700",onClick:()=>{navigator.clipboard.writeText("https://lumina.app/join-group/".concat(a.id)),R({title:"Invite link copied",description:"Invite link copied to clipboard"})},children:[(0,t.jsx)(eC.A,{className:"mr-2 h-4 w-4"}),"Share Group Invite Link"]})}),(0,t.jsx)("div",{children:(0,t.jsxs)(y,{variant:"destructive",className:"w-full",onClick:()=>{R({title:"Left group",description:"You left ".concat(a.name)}),d()},children:[(0,t.jsx)(ag.A,{className:"mr-2 h-4 w-4"}),"Leave Group"]})})]}),n.length>0&&(0,t.jsxs)("div",{className:"space-y-2 pt-4",children:[(0,t.jsxs)("h3",{className:"font-medium flex items-center gap-2 dark:text-white",children:[(0,t.jsx)(eo.A,{className:"h-4 w-4"}),"Pinned Messages (",n.length,")"]}),(0,t.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:n.map(e=>(0,t.jsxs)("div",{className:"p-3 rounded-md bg-secondary/50 dark:bg-gray-700/50 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsxs)(g,{className:"h-5 w-5",children:[(0,t.jsx)(f,{src:e.sender.avatar,alt:e.sender.name}),(0,t.jsx)(b,{children:e.sender.name.charAt(0)})]}),(0,t.jsx)("span",{className:"font-medium text-xs dark:text-white",children:e.sender.name}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground dark:text-gray-400 ml-auto",children:e.timestamp})]}),(0,t.jsx)("p",{className:"line-clamp-2 dark:text-gray-200",children:e.content})]},e.id))})]})]}),(0,t.jsxs)(an,{value:"members",id:"members-tab",className:"p-4 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("h3",{className:"font-medium dark:text-white",children:["Members (",a.members.length,")"]}),D&&(0,t.jsxs)(O,{open:S,onOpenChange:M,children:[(0,t.jsx)(G,{asChild:!0,children:(0,t.jsxs)(y,{size:"sm",children:[(0,t.jsx)(ax.A,{className:"mr-2 h-4 w-4"}),"Add"]})}),(0,t.jsxs)(V,{className:"dark:bg-gray-800 dark:border-gray-700",children:[(0,t.jsx)(Y,{children:(0,t.jsx)(_,{className:"dark:text-white",children:"Add Member"})}),(0,t.jsxs)("div",{className:"space-y-4 pt-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(F,{htmlFor:"member-email",className:"dark:text-white",children:"Email or Username"}),(0,t.jsx)(N,{id:"member-email",placeholder:"Enter email or username",className:"mt-1 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400"})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(y,{variant:"outline",onClick:()=>M(!1),className:"dark:text-white dark:border-gray-600 dark:hover:bg-gray-700",children:"Cancel"}),(0,t.jsx)(y,{onClick:()=>U("example@email.com"),children:"Add Member"})]})]})]})]})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(u.A,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground dark:text-gray-400"}),(0,t.jsx)(N,{placeholder:"Search members...",className:"pl-9 border-light-gray dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400",value:m,onChange:e=>h(e.target.value)})]}),L.length>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-muted-foreground dark:text-gray-400",children:"Admins"}),L.filter(e=>e.name.toLowerCase().includes(m.toLowerCase())).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-md hover:bg-secondary/50 dark:hover:bg-gray-700/50",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(g,{className:"h-8 w-8",children:[(0,t.jsx)(f,{src:e.avatar,alt:e.name}),(0,t.jsx)(b,{className:"dark:text-white",children:e.name.charAt(0)}),(0,t.jsx)("span",{className:(0,l.cn)("absolute bottom-0 right-0 h-2 w-2 rounded-full border border-background dark:border-gray-800","online"===e.status&&"bg-green-500","away"===e.status&&"bg-accent-blue","offline"===e.status&&"bg-muted")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium dark:text-white",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground dark:text-gray-400",children:"Admin"})]})]}),z&&e.id!==s.id&&(0,t.jsxs)(eb,{children:[(0,t.jsx)(ep,{asChild:!0,children:(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full dark:text-white dark:hover:bg-gray-700",children:[(0,t.jsx)(et.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"More options"})]})}),(0,t.jsxs)(ej,{align:"end",className:"dark:bg-gray-800 dark:border-gray-700",children:[(0,t.jsxs)(ev,{onClick:()=>P(e.id,"moderator"),className:"dark:text-white dark:focus:bg-gray-700",children:[(0,t.jsx)(ae.A,{className:"mr-2 h-4 w-4"}),"Demote to Moderator"]}),(0,t.jsxs)(ev,{onClick:()=>I(e.id),className:"dark:text-white dark:focus:bg-gray-700",children:[(0,t.jsx)(af.A,{className:"mr-2 h-4 w-4"}),"Remove from Group"]})]})]})]},e.id))]}),T.length>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-muted-foreground dark:text-gray-400",children:"Moderators"}),T.filter(e=>e.name.toLowerCase().includes(m.toLowerCase())).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-md hover:bg-secondary/50 dark:hover:bg-gray-700/50",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(g,{className:"h-8 w-8",children:[(0,t.jsx)(f,{src:e.avatar,alt:e.name}),(0,t.jsx)(b,{className:"dark:text-white",children:e.name.charAt(0)}),(0,t.jsx)("span",{className:(0,l.cn)("absolute bottom-0 right-0 h-2 w-2 rounded-full border border-background dark:border-gray-800","online"===e.status&&"bg-green-500","away"===e.status&&"bg-accent-blue","offline"===e.status&&"bg-muted")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium dark:text-white",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground dark:text-gray-400",children:"Moderator"})]})]}),z&&(0,t.jsxs)(eb,{children:[(0,t.jsx)(ep,{asChild:!0,children:(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full dark:text-white dark:hover:bg-gray-700",children:[(0,t.jsx)(et.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"More options"})]})}),(0,t.jsxs)(ej,{align:"end",className:"dark:bg-gray-800 dark:border-gray-700",children:[(0,t.jsxs)(ev,{onClick:()=>P(e.id,"admin"),className:"dark:text-white dark:focus:bg-gray-700",children:[(0,t.jsx)(ax.A,{className:"mr-2 h-4 w-4"}),"Promote to Admin"]}),(0,t.jsxs)(ev,{onClick:()=>P(e.id,"member"),className:"dark:text-white dark:focus:bg-gray-700",children:[(0,t.jsx)(ae.A,{className:"mr-2 h-4 w-4"}),"Demote to Member"]}),(0,t.jsxs)(ev,{onClick:()=>I(e.id),className:"dark:text-white dark:focus:bg-gray-700",children:[(0,t.jsx)(af.A,{className:"mr-2 h-4 w-4"}),"Remove from Group"]})]})]})]},e.id))]}),E.length>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-muted-foreground dark:text-gray-400",children:"Members"}),E.filter(e=>e.name.toLowerCase().includes(m.toLowerCase())).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-md hover:bg-secondary/50 dark:hover:bg-gray-700/50",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(g,{className:"h-8 w-8",children:[(0,t.jsx)(f,{src:e.avatar,alt:e.name}),(0,t.jsx)(b,{className:"dark:text-white",children:e.name.charAt(0)}),(0,t.jsx)("span",{className:(0,l.cn)("absolute bottom-0 right-0 h-2 w-2 rounded-full border border-background dark:border-gray-800","online"===e.status&&"bg-green-500","away"===e.status&&"bg-accent-blue","offline"===e.status&&"bg-muted")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium dark:text-white",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground dark:text-gray-400",children:"Member"})]})]}),D&&(0,t.jsxs)(eb,{children:[(0,t.jsx)(ep,{asChild:!0,children:(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full dark:text-white dark:hover:bg-gray-700",children:[(0,t.jsx)(et.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"More options"})]})}),(0,t.jsxs)(ej,{align:"end",className:"dark:bg-gray-800 dark:border-gray-700",children:[z&&(0,t.jsxs)(ev,{onClick:()=>P(e.id,"moderator"),className:"dark:text-white dark:focus:bg-gray-700",children:[(0,t.jsx)(ax.A,{className:"mr-2 h-4 w-4"}),"Promote to Moderator"]}),(0,t.jsxs)(ev,{onClick:()=>I(e.id),className:"dark:text-white dark:focus:bg-gray-700",children:[(0,t.jsx)(af.A,{className:"mr-2 h-4 w-4"}),"Remove from Group"]})]})]})]},e.id))]})]}),(0,t.jsxs)(an,{value:"media",className:"p-4 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"font-medium dark:text-white",children:"Shared Media"}),(0,t.jsx)(y,{variant:"ghost",size:"sm",className:"dark:text-white dark:hover:bg-gray-700",children:"See all"})]}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2",children:Array.from({length:9}).map((e,a)=>(0,t.jsx)("div",{className:"aspect-square bg-secondary dark:bg-gray-700 rounded-md flex items-center justify-center",children:(0,t.jsx)(eE.A,{className:"h-6 w-6 text-muted-foreground dark:text-gray-400"})},a))}),(0,t.jsxs)("div",{className:"flex items-center justify-between pt-4",children:[(0,t.jsx)("h3",{className:"font-medium dark:text-white",children:"Documents"}),(0,t.jsx)(y,{variant:"ghost",size:"sm",className:"dark:text-white dark:hover:bg-gray-700",children:"See all"})]}),(0,t.jsx)("div",{className:"space-y-2",children:Array.from({length:3}).map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-md hover:bg-secondary/50 dark:hover:bg-gray-700/50",children:[(0,t.jsx)("div",{className:"h-10 w-10 bg-accent-blue/10 dark:bg-accent-blue/20 rounded-md flex items-center justify-center",children:(0,t.jsx)(eT.A,{className:"h-5 w-5 text-accent-blue"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-medium dark:text-white",children:["Document ",a+1,".pdf"]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground dark:text-gray-400",children:"2.4 MB • Shared yesterday"})]})]},a))})]})]})})]})}function ay(e){let{onClose:a,onCreatePoll:s}=e,[l,n]=(0,r.useState)(""),[d,c]=(0,r.useState)(["",""]),[o,m]=(0,r.useState)("1 day"),u=e=>{if(d.length>2){let a=[...d];a.splice(e,1),c(a)}},h=(e,a)=>{let s=[...d];s[e]=a,c(s)};return(0,t.jsx)("div",{className:"fixed inset-0 z-50 bg-background/80 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-slide-in",children:(0,t.jsxs)("div",{className:"bg-glossy-white dark:bg-gray-800 rounded-2xl shadow-glossy border border-light-gray/50 dark:border-gray-700 w-full max-w-md overflow-hidden flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-light-gray/50 dark:border-gray-700",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(ah.A,{className:"h-5 w-5 text-accent-blue"}),(0,t.jsx)("h2",{className:"text-xl font-semibold dark:text-white",children:"Create Poll"})]}),(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"rounded-full",onClick:a,children:[(0,t.jsx)(i.A,{className:"h-5 w-5 dark:text-white"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]}),(0,t.jsxs)("div",{className:"p-4 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(F,{htmlFor:"question",className:"dark:text-white",children:"Question"}),(0,t.jsx)(N,{id:"question",placeholder:"Ask a question...",value:l,onChange:e=>n(e.target.value),className:"mt-1 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(F,{className:"dark:text-white",children:"Options"}),d.map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(N,{placeholder:"Option ".concat(a+1),value:e,onChange:e=>h(a,e.target.value),className:"dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),d.length>2&&(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full",onClick:()=>u(a),children:[(0,t.jsx)(i.A,{className:"h-4 w-4 dark:text-white"}),(0,t.jsx)("span",{className:"sr-only",children:"Remove option"})]})]},a)),d.length<10&&(0,t.jsxs)(y,{variant:"outline",size:"sm",className:"mt-2 w-full dark:text-white dark:border-gray-700",onClick:()=>{d.length<10&&c([...d,""])},children:[(0,t.jsx)(T.A,{className:"mr-2 h-4 w-4"}),"Add Option"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(F,{htmlFor:"expires",className:"dark:text-white",children:"Poll Duration"}),(0,t.jsxs)("select",{id:"expires",value:o,onChange:e=>m(e.target.value),className:"w-full mt-1 p-2 rounded-md border border-light-gray dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[(0,t.jsx)("option",{value:"1 hour",children:"1 hour"}),(0,t.jsx)("option",{value:"6 hours",children:"6 hours"}),(0,t.jsx)("option",{value:"12 hours",children:"12 hours"}),(0,t.jsx)("option",{value:"1 day",children:"1 day"}),(0,t.jsx)("option",{value:"3 days",children:"3 days"}),(0,t.jsx)("option",{value:"1 week",children:"1 week"}),(0,t.jsx)("option",{value:"never",children:"Never (no expiration)"})]})]})]}),(0,t.jsxs)("div",{className:"border-t border-light-gray/50 dark:border-gray-700 p-4 flex justify-end gap-2",children:[(0,t.jsx)(y,{variant:"outline",onClick:a,className:"dark:text-white dark:border-gray-700",children:"Cancel"}),(0,t.jsx)(y,{onClick:()=>{if(!l.trim()){alert("Please enter a question");return}let e=d.filter(e=>""!==e.trim());if(e.length<2){alert("Please enter at least 2 options");return}s({question:l,options:e,expiresIn:o}),a()},children:"Create Poll"})]})]})})}function aN(e){let{id:a,question:s,options:n,expiresAt:i,createdBy:d,totalVotes:o,currentUserId:m,onVote:u,className:h}=e,[x,g]=(0,r.useState)(!1),[f,b]=(0,r.useState)(null),[p,j]=(0,r.useState)("");(0,r.useEffect)(()=>{let e=n.some(e=>e.voters.includes(m));if(g(e),e){let e=n.find(e=>e.voters.includes(m));e&&b(e.id)}},[n,m]),(0,r.useEffect)(()=>{if("never"===i){j("No expiration");return}let e=()=>{let e=new Date,a=new Date(i).getTime()-e.getTime();if(a<=0){j("Expired");return}let s=Math.floor(a/864e5),t=Math.floor(a%864e5/36e5),r=Math.floor(a%36e5/6e4);s>0?j("".concat(s,"d ").concat(t,"h left")):t>0?j("".concat(t,"h ").concat(r,"m left")):j("".concat(r,"m left"))};e();let a=setInterval(e,6e4);return()=>clearInterval(a)},[i]);let v=e=>{x||(b(e),u(a,e),g(!0))},y=e=>0===o?0:Math.round(e/o*100);return(0,t.jsxs)("div",{className:(0,l.cn)("rounded-lg border border-light-gray/50 dark:border-gray-700 p-4 bg-glossy-white dark:bg-gray-800 shadow-glossy",h),children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)(ah.A,{className:"h-5 w-5 text-accent-blue"}),(0,t.jsx)("h3",{className:"font-medium dark:text-white",children:s})]}),(0,t.jsx)("div",{className:"space-y-3 mb-4",children:n.map(e=>{let a=y(e.votes),s=f===e.id;return(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[x?(0,t.jsx)("div",{className:(0,l.cn)("w-5 h-5 rounded-full flex items-center justify-center border",s?"bg-accent-blue border-accent-blue text-white":"border-light-gray dark:border-gray-600"),children:s&&"✓"}):(0,t.jsx)("button",{className:"w-5 h-5 rounded-full border border-light-gray dark:border-gray-600 hover:border-accent-blue",onClick:()=>v(e.id)}),(0,t.jsx)("span",{className:"dark:text-white",children:e.text})]}),(0,t.jsxs)("span",{className:"text-sm font-medium dark:text-white",children:[a,"%"]})]}),(0,t.jsx)(eF,{value:a,className:(0,l.cn)("h-2",s?"bg-accent-blue/20":"bg-secondary dark:bg-gray-700"),indicatorClassName:s?"bg-accent-blue":"bg-muted dark:bg-gray-600"}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground dark:text-gray-400",children:[e.votes," ",1===e.votes?"vote":"votes"]})]},e.id)})}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground dark:text-gray-400",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(eY.A,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:p})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(c.A,{className:"h-3 w-3"}),(0,t.jsxs)("span",{children:[o," ",1===o?"vote":"votes"]})]})]})]})}ap.displayName=ab.b.displayName;var aw=s(3591);function ak(e){let{onClose:a,onAddMembers:s,contacts:n,groupId:d,groupName:c}=e,[o,m]=(0,r.useState)("username"),[u,h]=(0,r.useState)(""),[x,p]=(0,r.useState)(""),[j,v]=(0,r.useState)([]),[w,k]=(0,r.useState)(""),[C,A]=(0,r.useState)(!1),[S,M]=(0,r.useState)(!1),{toast:z}=(0,eI.d)(),D="https://lumina.app/join/".concat(d),L=n.filter(e=>e.name.toLowerCase().includes(w.toLowerCase())),T=e=>{j.includes(e)?v(j.filter(a=>a!==e)):v([...j,e])};return S?(0,t.jsx)("div",{className:"fixed inset-0 z-50 bg-background/80 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-slide-in",children:(0,t.jsxs)("div",{className:"bg-glossy-white dark:bg-gray-800 rounded-2xl shadow-glossy border border-light-gray/50 dark:border-gray-700 w-full max-w-md overflow-hidden flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-light-gray/50 dark:border-gray-700",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold dark:text-white",children:"Add Members"}),(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"rounded-full",onClick:a,children:[(0,t.jsx)(i.A,{className:"h-5 w-5 dark:text-white"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]}),(0,t.jsxs)("div",{className:"p-8 text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(ax.A,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),(0,t.jsx)("h3",{className:"text-xl font-semibold mb-2 dark:text-white",children:"Members Added Successfully!"}),(0,t.jsx)("p",{className:"text-muted-foreground dark:text-gray-400 mb-6",children:"Your invitations have been sent. New members will join the group once they accept."}),(0,t.jsx)(y,{onClick:a,children:"Done"})]})]})}):(0,t.jsx)("div",{className:"fixed inset-0 z-50 bg-background/80 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-slide-in",children:(0,t.jsxs)("div",{className:"bg-glossy-white dark:bg-gray-800 rounded-2xl shadow-glossy border border-light-gray/50 dark:border-gray-700 w-full max-w-md overflow-hidden flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-light-gray/50 dark:border-gray-700",children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold dark:text-white",children:["Add Members to ",c]}),(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"rounded-full",onClick:a,children:[(0,t.jsx)(i.A,{className:"h-5 w-5 dark:text-white"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]}),(0,t.jsxs)(at,{defaultValue:"username",value:o,onValueChange:m,className:"flex-1",children:[(0,t.jsxs)(ar,{className:"grid grid-cols-3 p-2 mx-4 mt-4",children:[(0,t.jsx)(al,{value:"username",children:"Username"}),(0,t.jsx)(al,{value:"email",children:"Email"}),(0,t.jsx)(al,{value:"link",children:"Invite Link"})]}),(0,t.jsxs)(an,{value:"username",className:"p-4 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(F,{htmlFor:"username",className:"dark:text-white",children:"Add by username"}),(0,t.jsxs)("div",{className:"flex gap-2 mt-1",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(aw.A,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground dark:text-gray-400"}),(0,t.jsx)(N,{id:"username",placeholder:"Enter username",className:"pl-9 dark:bg-gray-700 dark:border-gray-600 dark:text-white",value:u,onChange:e=>h(e.target.value)})]}),(0,t.jsx)(y,{variant:"outline",className:"dark:text-white dark:border-gray-600",children:"Add"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(F,{className:"dark:text-white",children:"Or select from contacts"}),(0,t.jsx)(N,{placeholder:"Search contacts...",className:"dark:bg-gray-700 dark:border-gray-600 dark:text-white",value:w,onChange:e=>k(e.target.value)}),(0,t.jsx)("div",{className:"max-h-60 overflow-y-auto border rounded-md dark:border-gray-700",children:0===L.length?(0,t.jsx)("div",{className:"p-4 text-center text-muted-foreground dark:text-gray-400",children:"No contacts found"}):(0,t.jsx)("div",{className:"divide-y dark:divide-gray-700",children:L.map(e=>(0,t.jsxs)("div",{className:(0,l.cn)("flex items-center justify-between p-3 hover:bg-secondary/50 dark:hover:bg-gray-700 cursor-pointer",j.includes(e.id)&&"bg-secondary/50 dark:bg-gray-700"),onClick:()=>T(e.id),children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(g,{className:"h-8 w-8",children:[(0,t.jsx)(f,{src:e.avatar,alt:e.name}),(0,t.jsx)(b,{children:e.name.charAt(0)})]}),(0,t.jsx)("span",{className:"dark:text-white",children:e.name})]}),(0,t.jsx)("div",{className:(0,l.cn)("w-5 h-5 rounded-full border flex items-center justify-center",j.includes(e.id)?"bg-accent-blue border-accent-blue text-white":"border-light-gray dark:border-gray-600"),children:j.includes(e.id)&&"✓"})]},e.id))})})]})]}),(0,t.jsxs)(an,{value:"email",className:"p-4 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(F,{htmlFor:"email",className:"dark:text-white",children:"Invite by email"}),(0,t.jsxs)("div",{className:"flex gap-2 mt-1",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(aa.A,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground dark:text-gray-400"}),(0,t.jsx)(N,{id:"email",type:"email",placeholder:"Enter email address",className:"pl-9 dark:bg-gray-700 dark:border-gray-600 dark:text-white",value:x,onChange:e=>p(e.target.value)})]}),(0,t.jsx)(y,{variant:"outline",className:"dark:text-white dark:border-gray-600",children:"Send"})]})]}),(0,t.jsx)("div",{className:"p-4 bg-secondary/30 dark:bg-gray-700/30 rounded-lg",children:(0,t.jsx)("p",{className:"text-sm text-muted-foreground dark:text-gray-400",children:"An invitation email will be sent with a link to join the group. The recipient doesn't need to have a Lumina account yet."})})]}),(0,t.jsxs)(an,{value:"link",className:"p-4 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(F,{className:"dark:text-white",children:"Share invite link"}),(0,t.jsxs)("div",{className:"flex gap-2 mt-1",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(eW.A,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground dark:text-gray-400"}),(0,t.jsx)(N,{value:D,readOnly:!0,className:"pl-9 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),(0,t.jsxs)(y,{variant:"outline",onClick:()=>{navigator.clipboard.writeText(D),z({title:"Link copied",description:"Invite link copied to clipboard"})},className:"dark:text-white dark:border-gray-600",children:[(0,t.jsx)(ec.A,{className:"h-4 w-4 mr-2"}),"Copy"]})]})]}),(0,t.jsx)("div",{className:"p-4 bg-secondary/30 dark:bg-gray-700/30 rounded-lg",children:(0,t.jsx)("p",{className:"text-sm text-muted-foreground dark:text-gray-400",children:"Anyone with this link can join the group. The link will expire in 7 days."})})]})]}),(0,t.jsxs)("div",{className:"border-t border-light-gray/50 dark:border-gray-700 p-4 flex justify-end gap-2",children:[(0,t.jsx)(y,{variant:"outline",onClick:a,className:"dark:text-white dark:border-gray-600",children:"Cancel"}),(0,t.jsx)(y,{onClick:()=>{A(!0),setTimeout(()=>{"username"===o?u.trim()?(z({title:"Member invited",description:"Invitation sent to ".concat(u)}),M(!0)):j.length>0?(s(j),z({title:"Members added",description:"".concat(j.length," members added to ").concat(c)}),M(!0)):(z({title:"No members selected",description:"Please select at least one contact or enter a username",variant:"destructive"}),A(!1)):"email"===o?x.trim()?(z({title:"Invitation sent",description:"Invitation email sent to ".concat(x)}),M(!0)):(z({title:"No email provided",description:"Please enter a valid email address",variant:"destructive"}),A(!1)):(z({title:"Link copied",description:"Invite link copied to clipboard"}),A(!1))},1e3)},disabled:C,children:C?"Adding...":"Add Members"})]})]})})}var aC=s(7073),aA=s(6617),aS=s(6539),aM=s(6814);let az=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(aM.bL,{className:(0,l.cn)("grid gap-2",s),...r,ref:a})});az.displayName=aM.bL.displayName;let aD=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(aM.q7,{ref:a,className:(0,l.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...r,children:(0,t.jsx)(aM.C1,{className:"flex items-center justify-center",children:(0,t.jsx)(ef.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});function aL(e){let{onClose:a,onSaveSettings:s,group:n}=e,[c,o]=(0,r.useState)(n.name),[m,u]=(0,r.useState)(n.description||""),[h,x]=(0,r.useState)("all"),[g,f]=(0,r.useState)("admins"),[b,p]=(0,r.useState)("admins"),[j,v]=(0,r.useState)(!0),[w,k]=(0,r.useState)(!0),[C,A]=(0,r.useState)("default"),[S,M]=(0,r.useState)(!1),{toast:z}=(0,eI.d)();return(0,t.jsx)("div",{className:"fixed inset-0 z-50 bg-background/80 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-slide-in",children:(0,t.jsxs)("div",{className:"bg-glossy-white dark:bg-gray-800 rounded-2xl shadow-glossy border border-light-gray/50 dark:border-gray-700 w-full max-w-md max-h-[90vh] overflow-hidden flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-light-gray/50 dark:border-gray-700",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold dark:text-white",children:"Group Settings"}),(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"rounded-full",onClick:a,children:[(0,t.jsx)(i.A,{className:"h-5 w-5 dark:text-white"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-medium dark:text-white",children:"Basic Information"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(F,{htmlFor:"group-name",className:"dark:text-white",children:"Group Name"}),(0,t.jsx)(N,{id:"group-name",value:c,onChange:e=>o(e.target.value),className:"mt-1 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(F,{htmlFor:"group-description",className:"dark:text-white",children:"Description"}),(0,t.jsx)(E,{id:"group-description",value:m,onChange:e=>u(e.target.value),className:"mt-1 dark:bg-gray-700 dark:border-gray-600 dark:text-white",rows:3})]})]}),(0,t.jsx)(ap,{className:"dark:bg-gray-700"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-medium flex items-center gap-2 dark:text-white",children:[(0,t.jsx)(d.A,{className:"h-5 w-5 text-accent-blue"}),"Posting Permissions"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(F,{className:"dark:text-white",children:"Who can post messages?"}),(0,t.jsxs)(az,{value:h,onValueChange:x,className:"mt-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(aD,{value:"all",id:"post-all",className:"dark:border-gray-600"}),(0,t.jsx)(F,{htmlFor:"post-all",className:"dark:text-white",children:"All members"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(aD,{value:"admins-mods",id:"post-admins-mods",className:"dark:border-gray-600"}),(0,t.jsx)(F,{htmlFor:"post-admins-mods",className:"dark:text-white",children:"Admins and moderators only"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(aD,{value:"admins",id:"post-admins",className:"dark:border-gray-600"}),(0,t.jsx)(F,{htmlFor:"post-admins",className:"dark:text-white",children:"Admins only"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(F,{className:"dark:text-white",children:"Who can add members?"}),(0,t.jsxs)(az,{value:g,onValueChange:f,className:"mt-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(aD,{value:"all",id:"add-all",className:"dark:border-gray-600"}),(0,t.jsx)(F,{htmlFor:"add-all",className:"dark:text-white",children:"All members"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(aD,{value:"admins-mods",id:"add-admins-mods",className:"dark:border-gray-600"}),(0,t.jsx)(F,{htmlFor:"add-admins-mods",className:"dark:text-white",children:"Admins and moderators only"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(aD,{value:"admins",id:"add-admins",className:"dark:border-gray-600"}),(0,t.jsx)(F,{htmlFor:"add-admins",className:"dark:text-white",children:"Admins only"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(F,{className:"dark:text-white",children:"Who can pin messages?"}),(0,t.jsxs)(az,{value:b,onValueChange:p,className:"mt-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(aD,{value:"all",id:"pin-all",className:"dark:border-gray-600"}),(0,t.jsx)(F,{htmlFor:"pin-all",className:"dark:text-white",children:"All members"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(aD,{value:"admins-mods",id:"pin-admins-mods",className:"dark:border-gray-600"}),(0,t.jsx)(F,{htmlFor:"pin-admins-mods",className:"dark:text-white",children:"Admins and moderators only"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(aD,{value:"admins",id:"pin-admins",className:"dark:border-gray-600"}),(0,t.jsx)(F,{htmlFor:"pin-admins",className:"dark:text-white",children:"Admins only"})]})]})]})]}),(0,t.jsx)(ap,{className:"dark:bg-gray-700"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-medium flex items-center gap-2 dark:text-white",children:[(0,t.jsx)(aC.A,{className:"h-5 w-5 text-accent-blue"}),"Privacy Settings"]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(F,{htmlFor:"private-group",className:"font-medium dark:text-white",children:"Private Group"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground dark:text-gray-400",children:"Group is only visible to members"})]}),(0,t.jsx)(ad,{id:"private-group",checked:j,onCheckedChange:v,className:"data-[state=checked]:bg-accent-blue"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(F,{htmlFor:"approve-members",className:"font-medium dark:text-white",children:"Approve New Members"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground dark:text-gray-400",children:"Admins must approve join requests"})]}),(0,t.jsx)(ad,{id:"approve-members",checked:w,onCheckedChange:k,className:"data-[state=checked]:bg-accent-blue"})]})]}),(0,t.jsx)(ap,{className:"dark:bg-gray-700"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-medium flex items-center gap-2 dark:text-white",children:[(0,t.jsx)(aA.A,{className:"h-5 w-5 text-accent-blue"}),"Group Appearance"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(F,{className:"dark:text-white",children:"Group Theme"}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2 mt-2",children:[{id:"default",name:"Default",class:"bg-glossy-white dark:bg-gray-800"},{id:"blue",name:"Blue",class:"bg-blue-50 dark:bg-blue-900"},{id:"green",name:"Green",class:"bg-green-50 dark:bg-green-900"},{id:"purple",name:"Purple",class:"bg-purple-50 dark:bg-purple-900"},{id:"orange",name:"Orange",class:"bg-orange-50 dark:bg-orange-900"},{id:"pink",name:"Pink",class:"bg-pink-50 dark:bg-pink-900"}].map(e=>(0,t.jsx)("div",{className:(0,l.cn)("h-16 rounded-md border cursor-pointer flex items-center justify-center",e.class,C===e.id&&"border-accent-blue ring-1 ring-accent-blue","dark:border-gray-700"),onClick:()=>A(e.id),children:(0,t.jsx)("span",{className:(0,l.cn)("text-sm font-medium",(e.id,"text-foreground dark:text-white")),children:e.name})},e.id))})]})]})]}),(0,t.jsxs)("div",{className:"border-t border-light-gray/50 dark:border-gray-700 p-4 flex justify-end gap-2",children:[(0,t.jsx)(y,{variant:"outline",onClick:a,className:"dark:text-white dark:border-gray-600",children:"Cancel"}),(0,t.jsx)(y,{onClick:()=>{M(!0),setTimeout(()=>{s({name:c,description:m,permissions:{whoCanPost:h,whoCanAddMembers:g,whoCanPinMessages:b},privacy:{isPrivate:j,approveNewMembers:w},theme:C}),z({title:"Settings saved",description:"Group settings have been updated successfully"}),M(!1),a()},1e3)},disabled:S,children:S?(0,t.jsx)(t.Fragment,{children:"Saving..."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(aS.A,{className:"mr-2 h-4 w-4"}),"Save Settings"]})})]})]})})}aD.displayName=aM.q7.displayName;var aT=s(9921);function aE(e){let{onClose:a,onLeaveGroup:s,groupName:l,isAdmin:n}=e,[d,c]=(0,r.useState)(!1),{toast:o}=(0,eI.d)();return(0,t.jsx)("div",{className:"fixed inset-0 z-50 bg-background/80 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-slide-in",children:(0,t.jsxs)("div",{className:"bg-glossy-white dark:bg-gray-800 rounded-2xl shadow-glossy border border-light-gray/50 dark:border-gray-700 w-full max-w-md overflow-hidden flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-light-gray/50 dark:border-gray-700",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold dark:text-white",children:"Leave Group"}),(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"rounded-full",onClick:a,children:[(0,t.jsx)(i.A,{className:"h-5 w-5 dark:text-white"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]}),(0,t.jsxs)("div",{className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-destructive/10 dark:bg-destructive/20 rounded-lg",children:[(0,t.jsx)(aT.A,{className:"h-10 w-10 text-destructive"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium dark:text-white",children:"Are you sure you want to leave?"}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground dark:text-gray-400",children:["You will no longer receive messages from this group.",n&&" As an admin, consider transferring ownership before leaving."]})]})]}),n&&(0,t.jsx)("div",{className:"p-4 bg-secondary/30 dark:bg-gray-700/30 rounded-lg",children:(0,t.jsxs)("p",{className:"text-sm text-muted-foreground dark:text-gray-400",children:[(0,t.jsx)("strong",{children:"Warning:"})," You are an admin of this group. If you leave without transferring ownership, another member will be promoted to admin."]})})]}),(0,t.jsxs)("div",{className:"border-t border-light-gray/50 dark:border-gray-700 p-4 flex justify-end gap-2",children:[(0,t.jsx)(y,{variant:"outline",onClick:a,className:"dark:text-white dark:border-gray-600",children:"Cancel"}),(0,t.jsx)(y,{variant:"destructive",onClick:()=>{c(!0),setTimeout(()=>{s(),o({title:"Left group",description:"You have left ".concat(l)}),c(!1),a()},1e3)},disabled:d,children:d?"Leaving...":(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ag.A,{className:"mr-2 h-4 w-4"}),"Leave Group"]})})]})]})})}let aR=[{id:"1",content:"Hey everyone! Welcome to our new project group.",timestamp:"10:30 AM",sender:{id:"1",name:"Olivia Martinez",avatar:"/placeholder.svg?height=40&width=40",role:"admin"},isSent:!0,isEdited:!1,reactions:[{emoji:"\uD83D\uDC4D",count:2,users:["2","3"]},{emoji:"\uD83C\uDF89",count:1,users:["4"]}]},{id:"2",content:"Thanks for setting this up! I'm excited to collaborate with everyone.",timestamp:"10:32 AM",sender:{id:"2",name:"Ethan Wilson",avatar:"/placeholder.svg?height=40&width=40",role:"member"},isSent:!0,isEdited:!1,reactions:[]},{id:"3",content:"I've shared the project requirements in the shared folder. Let me know if you have any questions!",timestamp:"10:35 AM",sender:{id:"1",name:"Olivia Martinez",avatar:"/placeholder.svg?height=40&width=40",role:"admin"},isSent:!0,isEdited:!1,reactions:[]},{id:"4",content:"I'll review them this afternoon and share my thoughts.",timestamp:"10:38 AM",sender:{id:"3",name:"Sophia Chen",avatar:"/placeholder.svg?height=40&width=40",role:"moderator"},isSent:!0,isEdited:!1,reactions:[]}],aP=[{id:"poll-1",question:"When should we schedule our next team meeting?",options:[{id:"opt-1",text:"Monday, 10 AM",votes:2,voters:["1","4"]},{id:"opt-2",text:"Tuesday, 2 PM",votes:1,voters:["3"]},{id:"opt-3",text:"Wednesday, 11 AM",votes:0,voters:[]}],expiresAt:new Date(Date.now()+864e5).toISOString(),createdBy:{id:"1",name:"Olivia Martinez"},totalVotes:3,timestamp:"11:15 AM"}];function aF(e){let{group:a,currentUser:s,className:n,chatBackground:d="bg-1",onLeaveGroup:o,onBackToList:h}=e,[x,p]=(0,r.useState)([...aR]),[j,v]=(0,r.useState)([...aP]),[N,w]=(0,r.useState)([]),[M,D]=(0,r.useState)(null),[L,T]=(0,r.useState)(null),[E,R]=(0,r.useState)(!1),[P,F]=(0,r.useState)(!1),[I,O]=(0,r.useState)(""),[G,U]=(0,r.useState)([]),[B,V]=(0,r.useState)(!1),[Y,_]=(0,r.useState)(!1),[q,H]=(0,r.useState)(!1),[J,W]=(0,r.useState)(!1),[X,K]=(0,r.useState)(!1),[Z,$]=(0,r.useState)(!1),[ea,es]=(0,r.useState)(null),[en,ei]=(0,r.useState)([]);eB();let[ed,ec]=(0,r.useState)(a.members),{toast:em}=(0,eI.d)(),eh=(0,r.useRef)(null),ex=(0,r.useRef)(null),eg=()=>{var e;null===(e=eh.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,r.useEffect)(()=>{eg()},[x,j]),(0,r.useEffect)(()=>{P&&ex.current&&ex.current.focus()},[P]),(0,r.useEffect)(()=>{let e=setInterval(()=>{let e=Math.floor(Math.random()*a.members.length),t=a.members[e];t.id!==s.id&&(w([t]),setTimeout(()=>{w([])},Math.floor(3e3*Math.random())+2e3))},Math.floor(2e4*Math.random())+1e4);return()=>clearInterval(e)},[a.members,s.id]);let ef=e=>{let t={id:"msg-".concat(Date.now()),content:e,timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),sender:{id:s.id,name:s.name,avatar:s.avatar,role:s.role},isSent:!0,isEdited:!1,reactions:[]};L?(p(a=>a.map(a=>a.id===L?{...a,content:e,isEdited:!0,timestamp:"".concat(a.timestamp," (edited)")}:a)),T(null)):(p([...x,t]),D(null)),Math.random()>.7&&setTimeout(()=>{let e=Math.floor(Math.random()*a.members.length),r=a.members[e];if(r.id===s.id)return;let l=["\uD83D\uDC4D","❤️","\uD83D\uDE02","\uD83C\uDF89","\uD83D\uDD25","\uD83D\uDC4F"],n=l[Math.floor(Math.random()*l.length)];p(e=>e.map(e=>e.id===t.id?e.reactions.find(e=>e.emoji===n)?{...e,reactions:e.reactions.map(e=>e.emoji===n?{...e,count:e.count+1,users:[...e.users,r.id]}:e)}:{...e,reactions:[...e.reactions,{emoji:n,count:1,users:[r.id]}]}:e))},3e3)},eN=e=>{D(e)},ew=(e,a)=>{T(e),D(a)},ek=e=>{p(a=>a.filter(a=>a.id!==e))},eC=e=>{G.includes(e)?(U(a=>a.filter(a=>a!==e)),em({title:"Message unpinned",description:"The message has been removed from pinned messages"})):(U([...G,e]),em({title:"Message pinned",description:"The message has been added to pinned messages"}))},eA=(e,a)=>{p(t=>t.map(t=>{if(t.id===e){let e=t.reactions.find(e=>e.emoji===a);return e&&e.users.includes(s.id)?1===e.count?{...t,reactions:t.reactions.filter(e=>e.emoji!==a)}:{...t,reactions:t.reactions.map(e=>e.emoji===a?{...e,count:e.count-1,users:e.users.filter(e=>e!==s.id)}:e)}:e?{...t,reactions:t.reactions.map(e=>e.emoji===a?{...e,count:e.count+1,users:[...e.users,s.id]}:e)}:{...t,reactions:[...t.reactions,{emoji:a,count:1,users:[s.id]}]}}return t}))},eS=(e,a)=>{v(t=>t.map(t=>{if(t.id===e){let e=t.options.map(e=>e.id===a?{...e,votes:e.votes+1,voters:[...e.voters,s.id]}:e);return{...t,options:e,totalVotes:t.totalVotes+1}}return t}))},eM=()=>{F(!P),P?O(""):setTimeout(()=>{var e;null===(e=ex.current)||void 0===e||e.focus()},100)},ez=I?x.filter(e=>{var a;return(null===(a=e.content)||void 0===a?void 0:a.toLowerCase().includes(I.toLowerCase()))||e.sender.name.toLowerCase().includes(I.toLowerCase())}):x,eD=a.members.filter(e=>"online"===e.status),eL=a.members.length,eT="admin"===s.role;return s.role,(0,t.jsxs)("div",{className:(0,l.cn)("flex h-full flex-col",n),children:[E&&(0,t.jsx)(av,{group:{...a,members:ed},currentUser:s,onClose:()=>R(!1),pinnedMessages:x.filter(e=>G.includes(e.id)),onMemberRoleChange:(e,a)=>{var t;ec(s=>s.map(s=>s.id===e?{...s,role:a}:s));let r=(null===(t=ed.find(a=>a.id===e))||void 0===t?void 0:t.name)||"Unknown member",l={id:"msg-".concat(Date.now()),content:"".concat(s.name," changed ").concat(r,"'s role to ").concat(a,"."),timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),sender:{id:"system",name:"System",avatar:"/placeholder.svg?height=40&width=40",role:"system"},isSent:!0,isEdited:!1,reactions:[],isSystemMessage:!0};p(e=>[...e,l])},onMemberRemove:e=>{var a;let t=(null===(a=ed.find(a=>a.id===e))||void 0===a?void 0:a.name)||"Unknown member";ec(a=>a.filter(a=>a.id!==e));let r={id:"msg-".concat(Date.now()),content:"".concat(s.name," removed ").concat(t," from the group."),timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),sender:{id:"system",name:"System",avatar:"/placeholder.svg?height=40&width=40",role:"system"},isSent:!0,isEdited:!1,reactions:[],isSystemMessage:!0};p(e=>[...e,r])}}),B&&(0,t.jsx)(ay,{onClose:()=>V(!1),onCreatePoll:e=>{let a="never";if("never"!==e.expiresIn){let s=new Date,[t,r]=e.expiresIn.split(" ");r.includes("hour")?s.setHours(s.getHours()+Number.parseInt(t)):r.includes("day")?s.setDate(s.getDate()+Number.parseInt(t)):r.includes("week")&&s.setDate(s.getDate()+7*Number.parseInt(t)),a=s.toISOString()}v([...j,{id:"poll-".concat(Date.now()),question:e.question,options:e.options.map((e,a)=>({id:"opt-".concat(Date.now(),"-").concat(a),text:e,votes:0,voters:[]})),expiresAt:a,createdBy:{id:s.id,name:s.name},totalVotes:0,timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}]),em({title:"Poll created",description:"Your poll has been created successfully"})}}),Y&&(0,t.jsx)(ak,{onClose:()=>_(!1),onAddMembers:e=>{console.log("Adding members:",e),em({title:"Members added",description:"".concat(e.length," members have been added to the group")})},contacts:a.members.map(e=>({id:e.id,name:e.name,avatar:e.avatar,status:e.status})),groupId:a.id,groupName:a.name}),q&&(0,t.jsx)(aL,{onClose:()=>H(!1),onSaveSettings:e=>{console.log("Saving group settings:",e),em({title:"Settings updated",description:"Group settings updated successfully"})},group:a}),J&&(0,t.jsx)(aE,{onClose:()=>W(!1),onLeaveGroup:()=>{let e={id:"msg-".concat(Date.now()),content:"".concat(s.name," left the group."),timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),sender:{id:"system",name:"System",avatar:"/placeholder.svg?height=40&width=40",role:"system"},isSent:!0,isEdited:!1,reactions:[],isSystemMessage:!0};p(a=>[...a,e]),o&&setTimeout(()=>{o()},1e3)},groupName:a.name,isAdmin:eT}),Z&&ea&&(0,t.jsx)(eU,{media:ea,onClose:()=>$(!1),mediaList:en}),(0,t.jsxs)("div",{className:"flex h-16 items-center justify-between border-b border-light-gray/50 dark:border-gray-700 px-4 bg-glossy-white/80 backdrop-blur-md shadow-glossy dark:bg-gray-800",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[h&&(0,t.jsx)(y,{variant:"ghost",size:"icon",className:"h-10 w-10 mr-1 flex-shrink-0 rounded-full glossy-icon-button dark:bg-gray-700 dark:border-gray-600 dark:hover:bg-gray-600",onClick:h,"aria-label":"Back to groups",children:(0,t.jsx)(Q.A,{className:"h-5 w-5 dark:text-white"})}),(0,t.jsxs)("button",{className:"flex items-center gap-3",onClick:()=>R(!0),children:[(0,t.jsxs)(g,{className:"profile-picture h-10 w-10",children:[(0,t.jsx)(f,{src:a.avatar,alt:a.name}),(0,t.jsx)(b,{children:a.name.charAt(0)})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"font-medium flex items-center gap-2 dark:text-white",children:[a.name,(0,t.jsxs)(z,{variant:"outline",className:"text-xs bg-accent-blue/10 text-accent-blue border-accent-blue/20 dark:bg-accent-blue/20",children:[eL," members"]})]}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground dark:text-gray-400 flex items-center gap-1",children:[(0,t.jsxs)("span",{className:"relative flex h-2 w-2",children:[(0,t.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-500 opacity-75"}),(0,t.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]}),eD.length," online",X&&(0,t.jsx)("span",{className:"ml-2 text-xs bg-muted dark:bg-gray-700 px-1.5 py-0.5 rounded-full",children:"Muted"})]})]})]})]}),(0,t.jsx)("div",{className:"flex items-center gap-1",children:(0,t.jsxs)(k,{delayDuration:300,children:[P?(0,t.jsxs)("div",{className:"relative w-40 mr-1 animate-soft-bounce",children:[(0,t.jsx)("input",{ref:ex,type:"search",placeholder:"Search in group...",className:"w-full h-8 rounded-full border border-light-gray bg-glossy-white dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400 pl-8 pr-2 text-sm focus:outline-none focus:ring-1 focus:ring-accent-blue",value:I,onChange:e=>O(e.target.value)}),(0,t.jsx)(u.A,{className:"absolute left-2 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground dark:text-gray-400"}),(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 h-6 w-6 -translate-y-1/2 rounded-full",onClick:eM,children:[(0,t.jsx)(i.A,{className:"h-3 w-3 dark:text-white"}),(0,t.jsx)("span",{className:"sr-only",children:"Close search"})]})]}):(0,t.jsxs)(C,{children:[(0,t.jsx)(A,{asChild:!0,children:(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"glossy-icon-button dark:text-white dark:border-gray-700",onClick:eM,children:[(0,t.jsx)(u.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"sr-only",children:"Search in group"})]})}),(0,t.jsx)(S,{children:"Search in group"})]}),(0,t.jsxs)(C,{children:[(0,t.jsx)(A,{asChild:!0,children:(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"glossy-icon-button dark:text-white dark:border-gray-700",onClick:()=>R(!0),children:[(0,t.jsx)(c.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"sr-only",children:"Group members"})]})}),(0,t.jsx)(S,{children:"Group members"})]}),(0,t.jsxs)(eb,{children:[(0,t.jsx)(ep,{asChild:!0,children:(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"glossy-icon-button dark:text-white dark:border-gray-700",children:[(0,t.jsx)(et.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"sr-only",children:"More options"})]})}),(0,t.jsxs)(ej,{align:"end",className:"w-[200px] dark:bg-gray-800 dark:border-gray-700",children:[(0,t.jsxs)(ev,{onClick:()=>R(!0),className:"dark:text-white dark:focus:bg-gray-700",children:[(0,t.jsx)(er.A,{className:"mr-2 h-4 w-4"}),"Group info"]}),(0,t.jsxs)(ev,{onClick:()=>V(!0),className:"dark:text-white dark:focus:bg-gray-700",children:[(0,t.jsx)(ah.A,{className:"mr-2 h-4 w-4"}),"Create poll"]}),(0,t.jsxs)(ev,{onClick:()=>_(!0),className:"dark:text-white dark:focus:bg-gray-700",children:[(0,t.jsx)(ax.A,{className:"mr-2 h-4 w-4"}),"Add members"]}),(0,t.jsx)(ev,{onClick:()=>{K(!X),em({title:X?"Notifications unmuted":"Notifications muted",description:X?"You will now receive notifications from this group":"You will no longer receive notifications from this group"})},className:"dark:text-white dark:focus:bg-gray-700",children:X?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(el.A,{className:"mr-2 h-4 w-4"}),"Unmute notifications"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ee.A,{className:"mr-2 h-4 w-4"}),"Mute notifications"]})}),(0,t.jsx)(ey,{className:"dark:bg-gray-700"}),eT&&(0,t.jsxs)(ev,{onClick:()=>H(!0),className:"dark:text-white dark:focus:bg-gray-700",children:[(0,t.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Group settings"]}),(0,t.jsxs)(ev,{onClick:()=>W(!0),className:"text-destructive dark:text-red-400 dark:focus:bg-gray-700",children:[(0,t.jsx)(eu.A,{className:"mr-2 h-4 w-4"}),"Leave group"]})]})]})]})})]}),(0,t.jsxs)("div",{className:(0,l.cn)("flex-1 overflow-y-auto p-4",(()=>{switch(d){case"bg-1":default:return"bg-off-white/50 dark:bg-gray-900";case"bg-2":return"bg-blue-50 dark:bg-blue-950/30";case"bg-3":return"bg-green-50 dark:bg-green-950/30";case"bg-4":return"bg-purple-50 dark:bg-purple-950/30";case"bg-5":return"bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-950/30 dark:to-purple-950/30";case"bg-6":return"bg-gradient-to-br from-green-50 to-blue-50 dark:from-green-950/30 dark:to-blue-950/30";case"bg-7":return"bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-950/30 dark:to-red-950/30";case"bg-8":return"bg-gradient-to-br from-gray-50 to-slate-100 dark:from-gray-900 dark:to-slate-950"}})()),children:[G.length>0&&(0,t.jsxs)("div",{className:"mb-4 p-2 rounded-lg bg-accent-blue/5 dark:bg-accent-blue/10 border border-accent-blue/20 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(eo.A,{className:"h-4 w-4 text-accent-blue"}),(0,t.jsxs)("span",{className:"text-sm font-medium dark:text-white",children:[G.length," pinned message",G.length>1?"s":""]})]}),(0,t.jsx)(y,{variant:"ghost",size:"sm",className:"h-7 text-xs text-accent-blue hover:text-accent-blue hover:bg-accent-blue/10 dark:hover:bg-accent-blue/20",onClick:()=>R(!0),children:"View all"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[j.map(e=>{var r;return(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsxs)(g,{className:"h-8 w-8",children:[(0,t.jsx)(f,{src:(null===(r=a.members.find(a=>a.id===e.createdBy.id))||void 0===r?void 0:r.avatar)||"",alt:e.createdBy.name}),(0,t.jsx)(b,{children:e.createdBy.name.charAt(0)})]}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"text-sm font-medium dark:text-white",children:e.createdBy.name}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground dark:text-gray-400 ml-2",children:e.timestamp})]}),(0,t.jsx)(aN,{id:e.id,question:e.question,options:e.options,expiresAt:e.expiresAt,createdBy:e.createdBy,totalVotes:e.totalVotes,currentUserId:s.id,onVote:eS,className:"mt-1"})]})]})},e.id)}),ez.map((e,a)=>{var r;return(0,t.jsxs)("div",{className:(0,l.cn)("group",G.includes(e.id)&&"relative"),children:[G.includes(e.id)&&(0,t.jsx)("div",{className:"absolute -left-1 top-1/2 -translate-y-1/2 text-accent-blue",children:(0,t.jsx)(eo.A,{className:"h-4 w-4"})}),e.isSystemMessage?(0,t.jsx)("div",{className:"flex justify-center my-4",children:(0,t.jsx)("div",{className:"bg-secondary/30 dark:bg-gray-700/30 text-muted-foreground dark:text-gray-400 text-sm px-4 py-2 rounded-full",children:e.content})}):(0,t.jsx)(eV,{content:e.content,timestamp:e.timestamp,sender:{name:e.sender.name,avatar:e.sender.avatar,isOnline:(null===(r=ed.find(a=>a.id===e.sender.id))||void 0===r?void 0:r.status)==="online"},isSent:e.sender.id===s.id,isRead:!0,isEdited:e.isEdited,reactions:e.reactions,className:"animate-soft-bounce opacity-0",onReply:eN,onEdit:e.sender.id===s.id?()=>ew(e.id,e.content):void 0,onDelete:e.sender.id===s.id||"admin"===s.role?()=>ek(e.id):void 0,onPin:"admin"===s.role||"moderator"===s.role?()=>eC(e.id):void 0,isPinned:G.includes(e.id),onReaction:a=>eA(e.id,a),currentUserId:s.id,senderRole:e.sender.role,media:e.media},e.id)]},e.id)}),N.length>0&&(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsxs)(g,{className:"h-8 w-8",children:[(0,t.jsx)(f,{src:N[0].avatar,alt:N[0].name}),(0,t.jsx)(b,{children:N[0].name.charAt(0)})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("span",{className:"text-xs text-muted-foreground dark:text-gray-400",children:N[0].name}),(0,t.jsx)(e7,{})]})]}),(0,t.jsx)("div",{ref:eh})]})]}),(0,t.jsx)("div",{className:"border-t border-light-gray/50 dark:border-gray-700 bg-glossy-white/80 backdrop-blur-md shadow-glossy dark:bg-gray-800",children:(0,t.jsx)(e5,{onSendMessage:ef,onSendVoice:e=>{ef("\uD83C\uDFA4 Voice message (0:07)")},onSendMedia:(e,a,t)=>{let r=(0,l.v)(e.size);p([...x,{id:"msg-".concat(Date.now()),timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),sender:{id:s.id,name:s.name,avatar:s.avatar,role:s.role},isSent:!0,isEdited:!1,reactions:[],media:{type:a,url:t,fileName:e.name,fileSize:r}}]),ei([...en,{type:a,url:t,fileName:e.name,fileSize:r}]),em({title:"Media sent successfully",description:"".concat(e.name," has been sent to the group")})},replyingTo:M,onCancelReply:()=>{D(null),T(null)},isEditing:!!L})})]})}function aI(e){let{isOpen:a,onClose:s,onJoinGroup:l}=e,[n,i]=(0,r.useState)(""),[d,c]=(0,r.useState)(!1),[o,m]=(0,r.useState)(null),[u,h]=(0,r.useState)(!1),x=()=>{i(""),m(null),h(!1),c(!1),s()};return(0,t.jsx)(O,{open:a,onOpenChange:x,children:(0,t.jsxs)(V,{className:"sm:max-w-md",children:[(0,t.jsx)(Y,{children:(0,t.jsx)(_,{children:"Join Group"})}),(0,t.jsx)("div",{className:"space-y-4 py-4",children:u?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-8",children:[(0,t.jsx)("div",{className:"h-12 w-12 rounded-full bg-green-100 flex items-center justify-center mb-4",children:(0,t.jsx)(L.A,{className:"h-6 w-6 text-green-600"})}),(0,t.jsx)("p",{className:"text-lg font-medium",children:"Successfully joined the group!"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Redirecting you to the group chat..."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(F,{htmlFor:"group-id",children:"Group ID or Invite Link"}),(0,t.jsx)(N,{id:"group-id",placeholder:"Enter group ID or paste invite link",value:n,onChange:e=>{i(e.target.value),m(null)},className:"mt-1"}),o&&(0,t.jsx)("p",{className:"text-sm text-destructive mt-1",children:o})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Enter the group ID or paste the invite link shared with you to join the group."}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(y,{variant:"outline",onClick:x,children:"Cancel"}),(0,t.jsx)(y,{onClick:()=>{if(!n.trim()){m("Please enter a group ID");return}c(!0),m(null),setTimeout(()=>{"invalid"===n?(m("Invalid group ID or you don't have permission to join"),c(!1)):(h(!0),c(!1),setTimeout(()=>{l(n),x()},1500))},1e3)},disabled:!n.trim()||d,children:d?"Joining...":"Join Group"})]})]})})]})})}var aO=s(6546),aG=s(6748),aU=s(1794);let aB=[{id:"bg-1",class:"bg-off-white",darkClass:"dark:bg-gray-900",name:"Light"},{id:"bg-2",class:"bg-blue-50",darkClass:"dark:bg-blue-950/30",name:"Blue"},{id:"bg-3",class:"bg-green-50",darkClass:"dark:bg-green-950/30",name:"Green"},{id:"bg-4",class:"bg-purple-50",darkClass:"dark:bg-purple-950/30",name:"Purple"},{id:"bg-5",class:"bg-gradient-to-br from-blue-50 to-purple-50",darkClass:"dark:from-blue-950/30 dark:to-purple-950/30",name:"Blue-Purple"},{id:"bg-6",class:"bg-gradient-to-br from-green-50 to-blue-50",darkClass:"dark:from-green-950/30 dark:to-blue-950/30",name:"Green-Blue"},{id:"bg-7",class:"bg-gradient-to-br from-orange-50 to-red-50",darkClass:"dark:from-orange-950/30 dark:to-red-950/30",name:"Orange-Red"},{id:"bg-8",class:"bg-gradient-to-br from-gray-50 to-slate-100",darkClass:"dark:from-gray-900 dark:to-slate-950",name:"Gray"}];function aV(e){let{onClose:a,onUpdateUserProfile:s,onUpdateAppearance:n,userProfile:d,appearance:c}=e,[o,m]=(0,r.useState)(!0),[u,h]=(0,r.useState)(!0),[x,p]=(0,r.useState)(!0),[j,v]=(0,r.useState)(!0),[w,k]=(0,r.useState)(!1),[C,A]=(0,r.useState)(d.name),[S,M]=(0,r.useState)(d.email),[z,D]=(0,r.useState)(d.phone),[L,T]=(0,r.useState)(d.bio),[R,P]=(0,r.useState)(d.avatar),[I,O]=(0,r.useState)(c.theme),[G,U]=(0,r.useState)(c.chatBackground),{toast:B}=(0,eI.d)(),{theme:V,setTheme:Y}=(0,W.D)();(0,r.useEffect)(()=>{V&&O(V)},[V]);let _=()=>{n({theme:I,chatBackground:G}),Y(I),B({title:"Appearance settings updated",description:"Your appearance preferences have been saved"})},q=e=>{O(e),Y(e),n({theme:e,chatBackground:G})};return(0,t.jsx)("div",{className:"fixed inset-0 z-50 bg-background/80 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-slide-in",children:(0,t.jsxs)("div",{className:"bg-glossy-white dark:bg-gray-800 rounded-2xl shadow-glossy border border-light-gray/50 dark:border-gray-700 w-full max-w-md max-h-[90vh] overflow-hidden flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-light-gray/50 dark:border-gray-700",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold dark:text-white",children:"Settings"}),(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"rounded-full dark:text-white dark:hover:bg-gray-700",onClick:a,children:[(0,t.jsx)(i.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]}),(0,t.jsxs)(at,{defaultValue:"account",className:"flex-1 overflow-hidden",children:[(0,t.jsxs)(ar,{className:"grid grid-cols-3 px-4 py-2",children:[(0,t.jsx)(al,{value:"account",children:"Account"}),(0,t.jsx)(al,{value:"notifications",children:"Notifications"}),(0,t.jsx)(al,{value:"appearance",children:"Appearance"})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-4",children:[(0,t.jsxs)(an,{value:"account",className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)(g,{className:"h-24 w-24",children:[(0,t.jsx)(f,{src:R,alt:C}),(0,t.jsx)(b,{children:C.charAt(0)})]}),w&&(0,t.jsxs)("label",{htmlFor:"avatar-upload",className:"absolute bottom-0 right-0 bg-accent-blue text-white p-1 rounded-full cursor-pointer",children:[(0,t.jsx)(em.A,{className:"h-4 w-4"}),(0,t.jsx)("input",{id:"avatar-upload",type:"file",accept:"image/*",className:"hidden",onChange:e=>{var a;let s=null===(a=e.target.files)||void 0===a?void 0:a[0];if(s){let e=new FileReader;e.onload=()=>{"string"==typeof e.result&&P(e.result)},e.readAsDataURL(s)}}})]})]}),(0,t.jsxs)("div",{className:"text-center",children:[w?(0,t.jsx)(N,{value:C,onChange:e=>A(e.target.value),className:"text-center font-bold text-xl mb-2 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}):(0,t.jsx)("h3",{className:"text-xl font-bold dark:text-white",children:C}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground dark:text-gray-400",children:"Available"})]}),w?(0,t.jsxs)(y,{variant:"default",size:"sm",onClick:()=>{s({name:C,email:S,phone:z,bio:L,avatar:R}),k(!1),B({title:"Profile updated successfully",description:"Your profile information has been saved"})},children:[(0,t.jsx)(aS.A,{className:"mr-2 h-4 w-4"}),"Save Profile"]}):(0,t.jsxs)(y,{variant:"outline",size:"sm",onClick:()=>k(!0),className:"dark:text-white dark:border-gray-600 dark:hover:bg-gray-700",children:[(0,t.jsx)(aO.A,{className:"mr-2 h-4 w-4"}),"Edit Profile"]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[w?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(F,{htmlFor:"email",className:"dark:text-white",children:"Email"}),(0,t.jsx)(N,{id:"email",value:S,onChange:e=>M(e.target.value),className:"mt-1 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(F,{htmlFor:"phone",className:"dark:text-white",children:"Phone"}),(0,t.jsx)(N,{id:"phone",value:z,onChange:e=>D(e.target.value),className:"mt-1 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(F,{htmlFor:"bio",className:"dark:text-white",children:"Bio"}),(0,t.jsx)(E,{id:"bio",value:L,onChange:e=>T(e.target.value),className:"mt-1 dark:bg-gray-700 dark:border-gray-600 dark:text-white",rows:3})]})]}):(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"font-medium dark:text-white",children:"Account Information"}),(0,t.jsxs)("div",{className:"rounded-md border border-light-gray/50 dark:border-gray-700 p-3 dark:bg-gray-700/50",children:[(0,t.jsxs)("div",{className:"flex justify-between py-1",children:[(0,t.jsx)("span",{className:"text-muted-foreground dark:text-gray-400",children:"Phone"}),(0,t.jsx)("span",{className:"dark:text-white",children:z})]}),(0,t.jsxs)("div",{className:"flex justify-between py-1",children:[(0,t.jsx)("span",{className:"text-muted-foreground dark:text-gray-400",children:"Email"}),(0,t.jsx)("span",{className:"dark:text-white",children:S})]}),(0,t.jsxs)("div",{className:"flex justify-between py-1",children:[(0,t.jsx)("span",{className:"text-muted-foreground dark:text-gray-400",children:"Bio"}),(0,t.jsx)("span",{className:"dark:text-white max-w-[200px] truncate",children:L})]})]})]}),(0,t.jsx)("div",{className:"pt-4",children:(0,t.jsxs)(y,{variant:"destructive",className:"w-full",onClick:()=>B({title:"Logged out successfully",description:"You have been logged out of your account"}),children:[(0,t.jsx)(ag.A,{className:"mr-2 h-4 w-4"}),"Log Out"]})})]})]}),(0,t.jsx)(an,{value:"notifications",className:"space-y-6",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-md hover:bg-secondary/10 dark:hover:bg-gray-700/50",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(F,{htmlFor:"notifications",className:"font-medium dark:text-white",children:"Notifications"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground dark:text-gray-400",children:"Enable push notifications"})]}),(0,t.jsx)(ad,{id:"notifications",checked:o,onCheckedChange:e=>{m(e),B({title:e?"Notifications enabled":"Notifications disabled",description:e?"You will now receive notifications":"You will no longer receive notifications"})}})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-md hover:bg-secondary/10 dark:hover:bg-gray-700/50",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(F,{htmlFor:"sounds",className:"font-medium dark:text-white",children:"Sounds"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground dark:text-gray-400",children:"Play sounds for new messages"})]}),(0,t.jsx)(ad,{id:"sounds",checked:u,onCheckedChange:e=>{h(e),B({title:e?"Sounds enabled":"Sounds disabled",description:e?"You will now hear notification sounds":"Notification sounds are now muted"})}})]}),(0,t.jsxs)("div",{className:"space-y-2 p-3 rounded-md hover:bg-secondary/10 dark:hover:bg-gray-700/50",children:[(0,t.jsx)("h4",{className:"font-medium dark:text-white",children:"Notification Preview"}),(0,t.jsxs)(az,{defaultValue:"all",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(aD,{value:"all",id:"all",className:"dark:border-gray-600"}),(0,t.jsx)(F,{htmlFor:"all",className:"dark:text-white",children:"Show name and message"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(aD,{value:"name",id:"name",className:"dark:border-gray-600"}),(0,t.jsx)(F,{htmlFor:"name",className:"dark:text-white",children:"Show name only"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(aD,{value:"none",id:"none",className:"dark:border-gray-600"}),(0,t.jsx)(F,{htmlFor:"none",className:"dark:text-white",children:"No preview"})]})]})]})]})}),(0,t.jsx)(an,{value:"appearance",className:"space-y-6",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h4",{className:"font-medium dark:text-white",children:"Theme"}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,t.jsxs)("div",{className:(0,l.cn)("flex flex-col items-center justify-center p-3 rounded-lg border cursor-pointer","light"===I&&"border-accent-blue ring-1 ring-accent-blue","dark:border-gray-700"),onClick:()=>q("light"),children:[(0,t.jsx)("div",{className:"h-10 w-10 rounded-full bg-white border border-light-gray flex items-center justify-center mb-2",children:(0,t.jsx)(H.A,{className:"h-5 w-5 text-accent-blue"})}),(0,t.jsx)("span",{className:"text-sm font-medium dark:text-white",children:"Light"})]}),(0,t.jsxs)("div",{className:(0,l.cn)("flex flex-col items-center justify-center p-3 rounded-lg border cursor-pointer","dark"===I&&"border-accent-blue ring-1 ring-accent-blue","dark:border-gray-700"),onClick:()=>q("dark"),children:[(0,t.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-900 border border-gray-800 flex items-center justify-center mb-2",children:(0,t.jsx)(J.A,{className:"h-5 w-5 text-accent-blue"})}),(0,t.jsx)("span",{className:"text-sm font-medium dark:text-white",children:"Dark"})]}),(0,t.jsxs)("div",{className:(0,l.cn)("flex flex-col items-center justify-center p-3 rounded-lg border cursor-pointer","system"===I&&"border-accent-blue ring-1 ring-accent-blue","dark:border-gray-700"),onClick:()=>q("system"),children:[(0,t.jsx)("div",{className:"h-10 w-10 rounded-full bg-gradient-to-r from-white to-gray-900 border border-light-gray flex items-center justify-center mb-2",children:(0,t.jsx)(aG.A,{className:"h-5 w-5 text-accent-blue"})}),(0,t.jsx)("span",{className:"text-sm font-medium dark:text-white",children:"System"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground dark:text-gray-400",children:"Quick toggle:"}),(0,t.jsx)(K,{variant:"switch"})]})]}),(0,t.jsxs)("div",{className:"space-y-2 mt-6",children:[(0,t.jsx)("h4",{className:"font-medium dark:text-white",children:"Chat Background"}),(0,t.jsx)("div",{className:"grid grid-cols-4 gap-2",children:aB.map(e=>(0,t.jsx)("div",{className:(0,l.cn)("h-12 rounded-md border cursor-pointer",e.class,e.darkClass,G===e.id&&"border-accent-blue ring-1 ring-accent-blue","dark:border-gray-700"),onClick:()=>{U(e.id),_()},title:e.name},e.id))})]})]})})]})]}),(0,t.jsxs)("div",{className:"border-t border-light-gray/50 dark:border-gray-700 p-4 text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,t.jsx)(aU.A,{className:"h-4 w-4 text-muted-foreground dark:text-gray-400"}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground dark:text-gray-400",children:"Need help? Contact support"})]}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground dark:text-gray-400 mt-1",children:"Lumina Messaging v1.0.0"})]})]})})}var aY=s(6589),a_=s(1139),aq=s(5604);let aH=[{id:"1",contact:{id:"1",name:"Olivia Martinez",avatar:"/placeholder.svg?height=40&width=40"},type:"incoming",callType:"audio",timestamp:"Today, 10:30 AM",duration:"5:23",missed:!1},{id:"2",contact:{id:"2",name:"Ethan Wilson",avatar:"/placeholder.svg?height=40&width=40"},type:"outgoing",callType:"video",timestamp:"Today, 9:15 AM",duration:"12:07",missed:!1},{id:"3",contact:{id:"3",name:"Sophia Chen",avatar:"/placeholder.svg?height=40&width=40"},type:"missed",callType:"audio",timestamp:"Yesterday, 4:45 PM",duration:null,missed:!0},{id:"4",contact:{id:"1",name:"Olivia Martinez",avatar:"/placeholder.svg?height=40&width=40"},type:"outgoing",callType:"audio",timestamp:"Yesterday, 2:30 PM",duration:"3:12",missed:!1},{id:"5",contact:{id:"4",name:"Noah Johnson",avatar:"/placeholder.svg?height=40&width=40"},type:"incoming",callType:"video",timestamp:"Yesterday, 11:20 AM",duration:"8:45",missed:!1},{id:"6",contact:{id:"5",name:"Emma Davis",avatar:"/placeholder.svg?height=40&width=40"},type:"missed",callType:"audio",timestamp:"2 days ago, 5:15 PM",duration:null,missed:!0}];function aJ(e){let{onClose:a,onStartCall:s}=e,[n,d]=(0,r.useState)(""),[c,o]=(0,r.useState)("all"),m=aH.filter(e=>{let a=e.contact.name.toLowerCase().includes(n.toLowerCase()),s="all"===c||"missed"===c&&e.missed;return a&&s});return(0,t.jsx)("div",{className:"fixed inset-0 z-50 bg-background/80 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-slide-in",children:(0,t.jsxs)("div",{className:"bg-glossy-white dark:bg-white/95 rounded-2xl shadow-glossy border border-light-gray/50 w-full max-w-md max-h-[90vh] overflow-hidden flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-light-gray/50",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold",children:"Call History"}),(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"rounded-full",onClick:a,children:[(0,t.jsx)(i.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]}),(0,t.jsx)("div",{className:"p-4",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(u.A,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,t.jsx)(N,{placeholder:"Search calls...",className:"pl-9 border-light-gray",value:n,onChange:e=>d(e.target.value)})]})}),(0,t.jsxs)(at,{defaultValue:"all",value:c,onValueChange:e=>o(e),children:[(0,t.jsxs)(ar,{className:"grid grid-cols-2 mx-4",children:[(0,t.jsx)(al,{value:"all",children:"All"}),(0,t.jsx)(al,{value:"missed",children:"Missed"})]}),(0,t.jsx)(an,{value:"all",className:"flex-1 overflow-y-auto",children:(0,t.jsx)("div",{className:"divide-y",children:0===m.length?(0,t.jsx)("div",{className:"p-8 text-center text-muted-foreground",children:"No calls found"}):m.map(e=>(0,t.jsxs)("div",{className:"p-4 hover:bg-secondary/20",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(g,{className:"h-10 w-10",children:[(0,t.jsx)(f,{src:e.contact.avatar,alt:e.contact.name}),(0,t.jsx)(b,{children:e.contact.name.charAt(0)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e.contact.name}),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:["incoming"===e.type&&(0,t.jsx)(aY.A,{className:"h-3 w-3 text-green-500"}),"outgoing"===e.type&&(0,t.jsx)(a_.A,{className:"h-3 w-3 text-accent-blue"}),"missed"===e.type&&(0,t.jsx)(aq.A,{className:"h-3 w-3 text-destructive"}),(0,t.jsxs)("span",{className:(0,l.cn)("text-muted-foreground",e.missed&&"text-destructive"),children:["incoming"===e.type?"Incoming":"outgoing"===e.type?"Outgoing":"Missed"," ",e.callType," call"]}),(0,t.jsx)("span",{className:"text-muted-foreground",children:"•"}),(0,t.jsx)("span",{className:"text-muted-foreground",children:e.timestamp})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:["audio"===e.callType?(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full text-accent-blue hover:text-accent-blue hover:bg-accent-blue/10",onClick:()=>s(e.contact,"audio"),children:[(0,t.jsx)(ea.A,{className:"h-4 w-4"}),(0,t.jsxs)("span",{className:"sr-only",children:["Call ",e.contact.name]})]}):(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full text-accent-blue hover:text-accent-blue hover:bg-accent-blue/10",onClick:()=>s(e.contact,"video"),children:[(0,t.jsx)(es.A,{className:"h-4 w-4"}),(0,t.jsxs)("span",{className:"sr-only",children:["Video call ",e.contact.name]})]}),(0,t.jsxs)(eb,{children:[(0,t.jsx)(ep,{asChild:!0,children:(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full",children:[(0,t.jsx)(et.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"More options"})]})}),(0,t.jsxs)(ej,{align:"end",children:[(0,t.jsxs)(ev,{children:[(0,t.jsx)(er.A,{className:"mr-2 h-4 w-4"}),"Call info"]}),(0,t.jsxs)(ev,{className:"text-destructive",children:[(0,t.jsx)(eu.A,{className:"mr-2 h-4 w-4"}),"Delete from history"]})]})]})]})]}),e.duration&&(0,t.jsx)("div",{className:"ml-13 pl-13 mt-1",children:(0,t.jsxs)("span",{className:"text-xs text-muted-foreground ml-13 pl-13",children:["Duration: ",e.duration]})})]},e.id))})}),(0,t.jsx)(an,{value:"missed",className:"flex-1 overflow-y-auto",children:(0,t.jsx)("div",{className:"divide-y",children:0===m.filter(e=>e.missed).length?(0,t.jsx)("div",{className:"p-8 text-center text-muted-foreground",children:"No missed calls"}):m.filter(e=>e.missed).map(e=>(0,t.jsx)("div",{className:"p-4 hover:bg-secondary/20",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(g,{className:"h-10 w-10",children:[(0,t.jsx)(f,{src:e.contact.avatar,alt:e.contact.name}),(0,t.jsx)(b,{children:e.contact.name.charAt(0)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e.contact.name}),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[(0,t.jsx)(aq.A,{className:"h-3 w-3 text-destructive"}),(0,t.jsxs)("span",{className:"text-destructive",children:["Missed ",e.callType," call"]}),(0,t.jsx)("span",{className:"text-muted-foreground",children:"•"}),(0,t.jsx)("span",{className:"text-muted-foreground",children:e.timestamp})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:["audio"===e.callType?(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full text-accent-blue hover:text-accent-blue hover:bg-accent-blue/10",onClick:()=>s(e.contact,"audio"),children:[(0,t.jsx)(ea.A,{className:"h-4 w-4"}),(0,t.jsxs)("span",{className:"sr-only",children:["Call ",e.contact.name]})]}):(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full text-accent-blue hover:text-accent-blue hover:bg-accent-blue/10",onClick:()=>s(e.contact,"video"),children:[(0,t.jsx)(es.A,{className:"h-4 w-4"}),(0,t.jsxs)("span",{className:"sr-only",children:["Video call ",e.contact.name]})]}),(0,t.jsxs)(eb,{children:[(0,t.jsx)(ep,{asChild:!0,children:(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full",children:[(0,t.jsx)(et.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"More options"})]})}),(0,t.jsxs)(ej,{align:"end",children:[(0,t.jsxs)(ev,{children:[(0,t.jsx)(er.A,{className:"mr-2 h-4 w-4"}),"Call info"]}),(0,t.jsxs)(ev,{className:"text-destructive",children:[(0,t.jsx)(eu.A,{className:"mr-2 h-4 w-4"}),"Delete from history"]})]})]})]})]})},e.id))})})]})]})})}var aW=s(3621),aX=s(2486);let aK=e=>{let{value:a,onClick:s,winningSquare:r}=e;return(0,t.jsx)(X.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:(0,l.cn)("w-full aspect-square text-3xl md:text-4xl font-bold rounded-lg flex items-center justify-center","border-2 border-light-gray/50 bg-glossy-white shadow-glossy dark:bg-white/95","transition-all duration-300 ease-in-out",r&&"bg-accent-blue/10 border-accent-blue text-accent-blue animate-pulse-glossy"),onClick:s,children:a})};function aZ(){let[e,a]=(0,r.useState)(Array(9).fill(null)),[s,l]=(0,r.useState)(!0),[n,i]=(0,r.useState)(null),[d,c]=(0,r.useState)([]),[o,m]=(0,r.useState)({x:0,o:0,ties:0}),u=e=>{let a=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(let s=0;s<a.length;s++){let[t,r,l]=a[s];if(e[t]&&e[t]===e[r]&&e[t]===e[l])return{winner:e[t],line:a[s]}}return null},h=t=>{if(n||e[t])return;let r=[...e];r[t]=s?"X":"O",a(r),l(!s);let d=u(r);d?(i(d.winner),c(d.line),x(d.winner)):r.includes(null)||x(null)},x=e=>{m(a=>"X"===e?{...a,x:a.x+1}:"O"===e?{...a,o:a.o+1}:{...a,ties:a.ties+1})};return(0,t.jsx)(X.P.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full max-w-md mx-auto",children:(0,t.jsxs)("div",{className:"glossy-card p-4 mb-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsxs)("div",{className:"text-sm md:text-base",children:[(0,t.jsx)("span",{className:"font-medium text-accent-blue",children:"X:"})," ",o.x," wins"]}),(0,t.jsxs)("div",{className:"text-sm md:text-base",children:[(0,t.jsx)("span",{className:"font-medium",children:"Ties:"})," ",o.ties]}),(0,t.jsxs)("div",{className:"text-sm md:text-base",children:[(0,t.jsx)("span",{className:"font-medium text-accent-blue",children:"O:"})," ",o.o," wins"]})]}),(0,t.jsx)("div",{className:"text-center mb-4 font-medium text-lg",children:n?"Winner: ".concat(n):e.includes(null)?"Next player: ".concat(s?"X":"O"):"Game ended in a tie!"}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2 mb-4",children:e.map((e,a)=>(0,t.jsx)(aK,{value:e,onClick:()=>h(a),winningSquare:d.includes(a)},a))}),(0,t.jsxs)(y,{onClick:()=>{a(Array(9).fill(null)),l(!0),i(null),c([])},className:"w-full glossy-button",variant:"outline",children:[(0,t.jsx)(aX.A,{className:"mr-2 h-4 w-4"}),"Reset Game"]})]})})}function aQ(e){let{onStartChat:a,onStartGroupChat:s,onOpenCallHistory:n,onOpenSettings:i}=e,[m,u]=(0,r.useState)(!1);return(0,t.jsx)("div",{className:"flex flex-col items-center justify-center h-full p-4 md:p-8",children:m?(0,t.jsxs)("div",{className:"w-full max-w-md",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-accent-blue dark:text-white",children:"Tic-Tac-Toe"}),(0,t.jsx)(y,{variant:"outline",onClick:()=>u(!1),className:"glossy-icon-button dark:text-white dark:border-gray-700",children:"Back to Home"})]}),(0,t.jsx)(aZ,{})]}):(0,t.jsxs)(X.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md text-center",children:[(0,t.jsxs)("div",{className:"glossy-card p-8 mb-8 dark:bg-gray-800 dark:border-gray-700",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-accent-blue dark:text-white",children:"Welcome to Lumina"}),(0,t.jsx)(K,{variant:"button",className:"ml-auto"})]}),(0,t.jsx)("p",{className:"text-muted-foreground mb-6 dark:text-gray-300",children:"Waiting for a message? Hang on..."}),(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"typing-dot animate-typing-dot",style:{animationDelay:"0ms"}}),(0,t.jsx)("span",{className:"typing-dot animate-typing-dot",style:{animationDelay:"200ms"}}),(0,t.jsx)("span",{className:"typing-dot animate-typing-dot",style:{animationDelay:"400ms"}})]})})]}),(0,t.jsxs)("div",{className:(0,l.cn)("grid grid-cols-1 md:grid-cols-2 gap-4","transition-colors duration-300"),children:[(0,t.jsxs)(y,{onClick:a,className:"glossy-card flex flex-col items-center justify-center p-6 h-auto hover:shadow-glossy-hover dark:bg-gray-800 dark:border-gray-700 dark:text-white",variant:"outline",children:[(0,t.jsx)(d.A,{className:"h-10 w-10 text-accent-blue mb-2"}),(0,t.jsx)("span",{className:"font-medium",children:"Start a Chat"})]}),(0,t.jsxs)(y,{onClick:s,className:"glossy-card flex flex-col items-center justify-center p-6 h-auto hover:shadow-glossy-hover dark:bg-gray-800 dark:border-gray-700 dark:text-white",variant:"outline",children:[(0,t.jsx)(c.A,{className:"h-10 w-10 text-accent-blue mb-2"}),(0,t.jsx)("span",{className:"font-medium",children:"Join a Group"})]}),(0,t.jsxs)(y,{onClick:n,className:"glossy-card flex flex-col items-center justify-center p-6 h-auto hover:shadow-glossy-hover dark:bg-gray-800 dark:border-gray-700 dark:text-white",variant:"outline",children:[(0,t.jsx)(o.A,{className:"h-10 w-10 text-accent-blue mb-2"}),(0,t.jsx)("span",{className:"font-medium",children:"Call History"})]}),(0,t.jsxs)(y,{onClick:()=>u(!0),className:"glossy-card flex flex-col items-center justify-center p-6 h-auto hover:shadow-glossy-hover dark:bg-gray-800 dark:border-gray-700 dark:text-white",variant:"outline",children:[(0,t.jsx)(aW.A,{className:"h-10 w-10 text-accent-blue mb-2"}),(0,t.jsx)("span",{className:"font-medium",children:"Play Tic-Tac-Toe"})]})]})]})})}function a$(e){let{contacts:a,onSelectContact:s,onClose:n}=e,[d,c]=(0,r.useState)(""),o=a.filter(e=>e.name.toLowerCase().includes(d.toLowerCase())||e.lastMessage&&e.lastMessage.toLowerCase().includes(d.toLowerCase()));return(0,t.jsx)("div",{className:"fixed inset-0 z-50 bg-background/80 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-slide-in",children:(0,t.jsxs)("div",{className:"bg-glossy-white dark:bg-gray-800 rounded-2xl shadow-glossy border border-light-gray/50 dark:border-gray-700 w-full max-w-md max-h-[90vh] overflow-hidden flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-light-gray/50 dark:border-gray-700",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold dark:text-white",children:"Select Contact"}),(0,t.jsxs)(y,{variant:"ghost",size:"icon",className:"rounded-full",onClick:n,children:[(0,t.jsx)(i.A,{className:"h-5 w-5 dark:text-white"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]}),(0,t.jsx)("div",{className:"p-4",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(u.A,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground dark:text-gray-400"}),(0,t.jsx)(N,{placeholder:"Search contacts...",className:"pl-9 border-light-gray dark:border-gray-700 dark:bg-gray-700 dark:text-white",value:d,onChange:e=>c(e.target.value)})]})}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto",children:0===o.length?(0,t.jsx)("div",{className:"p-8 text-center text-muted-foreground dark:text-gray-400",children:"No contacts found"}):(0,t.jsx)("div",{className:"divide-y divide-light-gray/50 dark:divide-gray-700",children:o.map(e=>(0,t.jsx)("button",{className:"w-full text-left p-4 hover:bg-secondary/20 dark:hover:bg-gray-700 transition-colors",onClick:()=>{s(e),n()},children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(g,{className:"h-10 w-10",children:[(0,t.jsx)(f,{src:e.avatar,alt:e.name}),(0,t.jsx)(b,{children:e.name.charAt(0)}),(0,t.jsx)("span",{className:(0,l.cn)("absolute bottom-0 right-0 h-2.5 w-2.5 rounded-full border-2 border-background dark:border-gray-800","online"===e.status&&"bg-green-500","away"===e.status&&"bg-accent-blue","offline"===e.status&&"bg-muted")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium dark:text-white",children:e.name}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground dark:text-gray-400 truncate max-w-[180px]",children:e.lastMessage||"No messages yet"}),e.unreadCount&&(0,t.jsx)("span",{className:"ml-2 flex h-5 min-w-5 items-center justify-center rounded-full bg-accent-blue px-1.5 text-xs font-medium text-white",children:e.unreadCount})]})]}),(0,t.jsx)("div",{className:"ml-auto text-xs text-muted-foreground dark:text-gray-400",children:e.lastActive||""})]})},e.id))})})]})})}let a0=[{id:"1",name:"Olivia Martinez",avatar:"/placeholder.svg?height=40&width=40",status:"online",lastMessage:"Let's meet for coffee tomorrow",unreadCount:2,lastActive:"Just now"},{id:"2",name:"Ethan Wilson",avatar:"/placeholder.svg?height=40&width=40",status:"online",lastMessage:"I've sent you the files",lastActive:"5m ago"},{id:"3",name:"Sophia Chen",avatar:"/placeholder.svg?height=40&width=40",avatar:"/placeholder.svg?height=40&width=40",status:"away",lastMessage:"Thanks for your help!",lastActive:"2h ago"},{id:"4",name:"Noah Johnson",avatar:"/placeholder.svg?height=40&width=40",status:"offline",lastMessage:"See you at the meeting",lastActive:"1d ago"},{id:"5",name:"Emma Davis",avatar:"/placeholder.svg?height=40&width=40",status:"online",lastMessage:"How's the project going?",lastActive:"30m ago"}],a1=[{id:"group-1",name:"Project Team",description:"Team for the new product launch",avatar:"/placeholder.svg?height=40&width=40",members:[{id:"1",name:"Olivia Martinez",avatar:"/placeholder.svg?height=40&width=40",status:"online",role:"admin"},{id:"2",name:"Ethan Wilson",avatar:"/placeholder.svg?height=40&width=40",status:"online",role:"member"},{id:"3",name:"Sophia Chen",avatar:"/placeholder.svg?height=40&width=40",status:"away",role:"moderator"},{id:"4",name:"Noah Johnson",avatar:"/placeholder.svg?height=40&width=40",status:"offline",role:"member"},{id:"current-user",name:"You",avatar:"/placeholder.svg?height=40&width=40",status:"online",role:"member"}],createdAt:"Jan 15, 2023",createdBy:"Olivia Martinez",lastMessage:"Let's discuss the new features",lastActive:"10m ago"},{id:"group-2",name:"Design Team",description:"UI/UX discussions and resources",avatar:"/placeholder.svg?height=40&width=40",members:[{id:"1",name:"Olivia Martinez",avatar:"/placeholder.svg?height=40&width=40",status:"online",role:"member"},{id:"3",name:"Sophia Chen",avatar:"/placeholder.svg?height=40&width=40",status:"away",role:"member"},{id:"5",name:"Emma Davis",avatar:"/placeholder.svg?height=40&width=40",status:"online",role:"moderator"},{id:"current-user",name:"You",avatar:"/placeholder.svg?height=40&width=40",status:"online",role:"admin"}],createdAt:"Feb 3, 2023",createdBy:"You",lastMessage:"Check out this new design system",lastActive:"2h ago"},{id:"group-3",name:"Marketing Team",description:"Campaign planning and coordination",avatar:"/placeholder.svg?height=40&width=40",members:[{id:"2",name:"Ethan Wilson",avatar:"/placeholder.svg?height=40&width=40",status:"online",role:"member"},{id:"4",name:"Noah Johnson",avatar:"/placeholder.svg?height=40&width=40",status:"offline",role:"moderator"},{id:"5",name:"Emma Davis",avatar:"/placeholder.svg?height=40&width=40",status:"online",role:"member"},{id:"current-user",name:"You",avatar:"/placeholder.svg?height=40&width=40",status:"online",role:"admin"}],createdAt:"Mar 12, 2023",createdBy:"You",lastMessage:"The new campaign assets are ready",lastActive:"1d ago"},{id:"group-4",name:"Family Group",description:"Family updates and plans",avatar:"/placeholder.svg?height=40&width=40",members:[{id:"1",name:"Olivia Martinez",avatar:"/placeholder.svg?height=40&width=40",status:"online",role:"member"},{id:"3",name:"Sophia Chen",avatar:"/placeholder.svg?height=40&width=40",status:"away",role:"member"},{id:"current-user",name:"You",avatar:"/placeholder.svg?height=40&width=40",status:"online",role:"admin"}],createdAt:"Apr 5, 2023",createdBy:"You",lastMessage:"Weekend plans?",lastActive:"3h ago",unreadCount:5}];function a4(){var e;let[a,s]=(0,r.useState)({type:null,id:null}),[n,i]=(0,r.useState)(!1),[d,c]=(0,r.useState)(!1),[o,m]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!1),[x,g]=(0,r.useState)(!1),[f,b]=(0,r.useState)(!1),[p,j]=(0,r.useState)("audio"),[v,y]=(0,r.useState)(null),[N,w]=(0,r.useState)(a1),[k,C]=(0,r.useState)(a0),{theme:A,setTheme:S}=(0,W.D)();eB();let[M,z]=(0,r.useState)({name:"Your Name",email:"your.email@example.com",phone:"+1 (555) 123-4567",bio:"Available",avatar:"/placeholder.svg?height=96&width=96"}),[D,L]=(0,r.useState)({theme:A||"system",chatBackground:"bg-1"});(0,r.useEffect)(()=>{if(A&&(L(e=>({...e,theme:A})),o)){var e;null===(e=document.querySelector('[data-theme="'.concat(A,'"]')))||void 0===e||e.classList.add("selected-theme")}},[A,o]);let T="direct"===a.type?k.find(e=>e.id===a.id):null,E="group"===a.type?N.find(e=>e.id===a.id):null,[R,P]=(0,r.useState)(!1),F=e=>{s({type:"direct",id:e.id}),P(!0),C(a=>a.map(a=>a.id===e.id?{...a,unreadCount:0}:a))},I=()=>{P(!1)},O=e=>{let a={id:"group-".concat(N.length+1),name:e.name,description:e.description,avatar:e.avatar,members:[...e.members.map(e=>{let a=k.find(a=>a.id===e);return{id:(null==a?void 0:a.id)||"",name:(null==a?void 0:a.name)||"",avatar:(null==a?void 0:a.avatar)||"",status:(null==a?void 0:a.status)||"offline",role:"member"}}),{id:"current-user",name:"You",avatar:"/placeholder.svg?height=40&width=40",status:"online",role:"admin"}],createdAt:new Date().toLocaleDateString(),createdBy:"You",lastMessage:"Group created",lastActive:"Just now"};w([...N,a]),s({type:"group",id:a.id})},G=(e,a)=>{y(e),j(a),b(!0)},U=e=>{w(a=>a.filter(a=>a.id!==e)),s({type:null,id:null})};return(0,r.useEffect)(()=>{let e=()=>{window.innerWidth>=768&&R&&P(!1)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[R]),(0,t.jsxs)("div",{className:"flex h-screen overflow-hidden bg-gradient-to-br from-glossy-white to-off-white dark:from-gray-900 dark:to-gray-800 transition-colors duration-300",children:[(0,t.jsx)("div",{className:(0,l.cn)("flex-shrink-0 w-full md:w-72 md:flex-shrink-0 transition-all duration-300 ease-in-out",R?"hidden md:block":"block","border-r border-light-gray/50 dark:border-gray-700"),children:(0,t.jsx)(Z,{activeContactId:"direct"===a.type&&a.id||"",onContactSelect:F,groups:N,activeGroupId:"group"===a.type&&a.id||"",onGroupSelect:e=>{s({type:"group",id:e.id}),P(!0),w(a=>a.map(a=>a.id===e.id?{...a,unreadCount:0}:a))},onCreateGroup:O,contacts:k,onOpenSettings:()=>m(!0),onOpenCallHistory:()=>h(!0)})}),(0,t.jsxs)("main",{className:(0,l.cn)("flex-1 transition-all duration-300 ease-in-out",R?"block w-full":"hidden md:block"),children:[null===a.type?(0,t.jsx)(aQ,{onStartChat:()=>{g(!0)},onStartGroupChat:()=>{c(!0)},onOpenCallHistory:()=>h(!0),onOpenSettings:()=>m(!0)}):"direct"===a.type&&T?(0,t.jsx)(au,{contact:T,onStartCall:G,chatBackground:D.chatBackground,onBackToList:I}):"group"===a.type&&E?(0,t.jsx)(aF,{group:E,currentUser:{id:"current-user",name:"You",avatar:"/placeholder.svg?height=40&width=40",role:(null===(e=E.members.find(e=>"current-user"===e.id))||void 0===e?void 0:e.role)||"member"},chatBackground:D.chatBackground,onLeaveGroup:()=>U(E.id),onBackToList:I}):null,(0,t.jsx)(q,{isOpen:n,onClose:()=>i(!1),onCreateGroup:O,contacts:k}),(0,t.jsx)(aI,{isOpen:d,onClose:()=>c(!1),onJoinGroup:e=>{console.log("Joining group:",e),s({type:"group",id:"group-1"})}}),o&&(0,t.jsx)(aV,{onClose:()=>m(!1),onUpdateUserProfile:e=>{z(e)},onUpdateAppearance:e=>{L(e),e.theme!==A&&S(e.theme)},userProfile:M,appearance:D}),u&&(0,t.jsx)(aJ,{onClose:()=>h(!1),onStartCall:G}),x&&(0,t.jsx)(a$,{contacts:k,onSelectContact:F,onClose:()=>g(!1)}),f&&v&&(0,t.jsx)(e9,{contact:v,callType:p,onEndCall:()=>{b(!1),y(null)}})]})]})}},3695:(e,a,s)=>{Promise.resolve().then(s.bind(s,1036))},5844:(e,a,s)=>{"use strict";s.d(a,{d:()=>m});var t=s(2149);let r=0,l=new Map,n=e=>{if(l.has(e))return;let a=setTimeout(()=>{l.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,a)},i=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,5)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=a;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}},d=e=>{c=i(c,e),o.forEach(e=>{e(c)})},c={toasts:[]},o=[];function m(){let[e,a]=t.useState([]);return t.useEffect(()=>(o.push(a),()=>{let e=o.indexOf(a);e>-1&&o.splice(e,1)}),[]),{toasts:e,toast:e=>{let a=(r=(r+1)%Number.MAX_VALUE).toString(),s={...e,id:a,open:!0,onOpenChange:e=>{e||d({type:"DISMISS_TOAST",toastId:a})}};return d({type:"ADD_TOAST",toast:s}),a},dismiss:e=>d({type:"DISMISS_TOAST",toastId:e}),update:e=>{d({type:"UPDATE_TOAST",toast:e})}}}},7687:(e,a,s)=>{"use strict";s.d(a,{cn:()=>l,v:()=>n});var t=s(6522),r=s(4483);function l(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];return(0,r.QP)((0,t.$)(a))}function n(e){return e<1024?e+" bytes":e<1048576?(e/1024).toFixed(1)+" KB":e<0x40000000?(e/1048576).toFixed(1)+" MB":(e/0x40000000).toFixed(1)+" GB"}}},e=>{var a=a=>e(e.s=a);e.O(0,[30,178,497,954,358],()=>a(3695)),_N_E=e.O()}]);